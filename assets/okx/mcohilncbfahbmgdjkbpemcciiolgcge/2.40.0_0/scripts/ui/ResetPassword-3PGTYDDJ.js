import{a as F}from"./chunk-UJXR2XAQ.js";import{u as h}from"./chunk-SBW523XW.js";import"./chunk-NEW56Z2U.js";import{g as E}from"./chunk-HX34N4W4.js";import"./chunk-F7QJ6WQ5.js";import"./chunk-TNVBYBO5.js";import{qa as P,t as I,y as b}from"./chunk-KRRNVCWZ.js";import{Ca as a,Ma as l,Qa as f,_a as c,e as v,i as w,ja as x,k as u,qi as g,wa as d}from"./chunk-YC2Z7II3.js";w();u();var s=v(x());var L=({history:y})=>{var m,p;let _=l.useForm(),e=P(),[r,S]=s.default.useState({}),[C,i]=s.default.useState(null);I(()=>{!r.oldPassword||h(r.oldPassword).then(()=>{i(null),_.cleanErrors("oldPassword")}).catch(()=>{let o=e("wallet_set_password_errortip_password_wrong");i(o),_.setErrors({oldPassword:o})})},[r.oldPassword],{wait:500});let n=!!C||!r.oldPassword||!r.password||!r.confirm||((m=r.password)==null?void 0:m.length)<6||((p=r.confirm)==null?void 0:p.length)<6,N=b(async()=>{let{password:o,confirm:t}=r;if(n)return;if(o!==t){_.setErrors({confirm:e("wallet_settings_reset_passord_errortip_input_error")});return}await c().modifyPassword(t)&&(f.success(e("wallet_edit_wallet_toast_renamed_success")),y.push(g))},[n,r]);return s.default.createElement("div",{className:"reset-password"},s.default.createElement(E,{bordered:!1,closeable:!1}),s.default.createElement(l,{form:_,size:a.SIZE.lg,validateTrigger:["onChange","onBlur"],className:"reset-password__container",onSubmit:N,onValuesChange:(o,t)=>{S(t)}},s.default.createElement("h1",{className:"reset-password__title"},e("wallet_settings_reset_passord_maintitle_reset_password")),s.default.createElement("div",{className:"reset-password__desc"},e("wallet_settings_reset_passord_subtitle_not_store_explanation"),s.default.createElement("span",{className:"reset-password__more",onClick:()=>{globalThis.open(e("wallet_set_password_header_link_learn_more_url"))}},e("wallet_set_password_header_link_learn_more"))),s.default.createElement(l.Item,{name:"oldPassword",label:e("wallet_settings_reset_passord_subtitle_old_password"),className:"reset-password__input"},s.default.createElement(a.Password,{autoFocus:!0,autoComplete:"off",size:a.SIZE.xl,placeholder:e("wallet_settings_reset_passord_placeholder_input_old_password")})),s.default.createElement(l.Item,{name:"password",style:{marginBottom:8},className:"reset-password__input",label:e("wallet_settings_reset_passord_subtitle_new_password")},s.default.createElement(a.Password,{autoComplete:"off",size:a.SIZE.xl,placeholder:e("wallet_settings_reset_passord_placeholder_input_desc")})),s.default.createElement(l.Item,{noStyle:!0,style:{minHeight:25},shouldUpdate:(o,t)=>o.password!==t.password},({getFieldValue:o})=>{let t=o("password");return s.default.createElement(F,{password:t})}),s.default.createElement(l.Item,{name:"confirm",className:"reset-password__input",label:e("wallet_settings_reset_passord_subtitle_password_confirmation"),style:{flex:1}},s.default.createElement(a.Password,{autoComplete:"off",size:a.SIZE.xl,placeholder:e("wallet_settings_reset_passord_placeholder_input_password_confirmation"),onChange:()=>{_.cleanErrors("confirm")}})),s.default.createElement(l.Item,{noStyle:!0},s.default.createElement(d,{block:!0,htmlType:"submit",disabled:n,category:d.CATEGORY.fill,type:d.TYPE.highlight,size:d.SIZE.lg},e("wallet_set_password_btn_confirm")))))};export{L as default};

window.inOKXExtension = true;
window.ASSETS_BUILD_TYPE = "publish";

