import{l as B}from"./chunk-BZBZNG4R.js";import{S as A}from"./chunk-KRRNVCWZ.js";import{$k as L,Gh as x,Hb as r,Qk as N,Rk as $,Sk as E,e as U,i as S,k as j,na as q,uh as h,yb as O}from"./chunk-YC2Z7II3.js";S();j();var l=U(q());var z=L({name:"balanceSlice",initialState:{amountObj:{}},reducers:{setAmountObj:(o,{payload:t})=>{o.amountObj=(0,l.cloneDeep)(t)}}}),{actions:D,reducer:G}=z;function _(o){let t={},f={},p=r(0),g=x(o).symbol||"$",{balance:y}=o.metamask,b=h(o),R=(0,l.groupBy)(b,"keyringId"),T=b.map(e=>e.walletId),W=B(o);return T.forEach(e=>{var d,C,k;let m=(d=y[e])==null?void 0:d.data,s=(C=y[e])==null?void 0:C.nft,i=(k=y[e])==null?void 0:k.defi;if(m&&m.length>0){let v=N(o)||[],F=$(o)[e]||[],M=E(o)[e]||[],u=r(0),a="0";if(m.map(n=>{if((n.currencyAmount>=1||F.some(c=>c.key===n.key)||v.some(c=>c.key===n.key))&&!n.voucherToken&&!M.some(c=>c.key===n.key)){let c=n.currencyAmount||0;u=u.plus(r(`${c}`)),n.platformType===0&&(a=O(a,c))}return null}),W){let n=(s==null?void 0:s.currencyAmount)||0;u=u.plus(r(`${n}`))}u=u.plus(r(`${(i==null?void 0:i.currencyAmount)||0}`)),t[e]=u,f[e]=a}else t[e]=r(0),f[e]="0"}),Object.entries(R).forEach(([e,m])=>{let s=m.reduce((i,d)=>i.plus(r(String(Number(t[d.walletId]||0).toFixed(10)))),r(0));t[e]=s,p=p.plus(s)}),Object.keys(t).forEach(e=>{t[e]=A(String(t[e]),g)}),t.amount=A(String(p),g),t.platformAssetAmount=f,t}var{setAmountObj:w}=D,I=G;export{_ as a,I as b};

window.inOKXExtension = true;
window.ASSETS_BUILD_TYPE = "publish";

