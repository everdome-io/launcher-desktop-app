import{a as A}from"./chunk-AGUPFE3F.js";import{a as I}from"./chunk-4VBWXLGM.js";import{b as x}from"./chunk-NEW56Z2U.js";import{d as C}from"./chunk-HX34N4W4.js";import{A as b,L as S,qa as _}from"./chunk-KRRNVCWZ.js";import{Fc as l,Nk as h,Oj as g,cl as y,de as d,e as J,i,ja as k,k as u,ke as p,xc as m}from"./chunk-YC2Z7II3.js";i();u();var a=J(k());i();u();var N=[{label:"wallet_extension_mid_text_from",value:"address",type:"address"},{label:"wallet_extension_confirm_item_nonce",value:"nonce",type:"hex"},{label:"wallet_extension_confirm_item_account_id",value:"accountId",type:"hex"}];var P=()=>{let{accountMap:e}=I();return e[m]},Y=()=>{let e=p(),n=P(),r=async o=>{let s={fromAddr:n},t={address:n,coinId:o},{info:c}=await y(t,s);return c||{}};return async({coinId:o,baseCoinId:s})=>{if([Number(s),Number(o)].includes(l)){let{accountId:t,nonce:c}=await r(o);if(c===0)return e.push(`${g}?coinId=${o}&nonce=${c}&accountId=${t}`),!1}return!0}},tt=()=>{let e=b(),n=Number(e.get("nonce")),r=Number(e.get("coinId")),o=Number(e.get("accountId")),s=P(),{coin:t}=S(r);return{...t,nonce:n,coinId:r,address:s,accountId:o}},et=e=>{let n=_();return N.map(({type:r,label:o,value:s})=>{let t=e[s];return r==="address"&&(t=a.default.createElement(C.Address,{address:t})),r==="hex"&&(t=`0x${h(t)}`),{label:n(o),value:t}})},ot=({nonce:e=0,address:n,accountId:r})=>{let o=p(),s=d(),[t,c]=(0,a.useState)(!1),w=(0,a.useCallback)(()=>{o.go(-1)},[]),T=(0,a.useCallback)(async()=>{let K=Number(e),Z={nonce:e,accountId:r,type:"changePubkey",from:n},{txHash:v,...f}=await x(Z,n,m),{type:R}=f,$={txHash:v,signedTx:JSON.stringify({fastProcessing:null,tx:{nonce:K,...f},signature:null}),toAdr:"",txSource:2,coinAmount:0,fromAdr:n,serviceCharge:"0",coinId:l,extJson:JSON.stringify({type:R||"ChangePubKey"})};c(!0);try{await s(A($)),o.go(-1)}catch(E){console.log(E)}finally{c(!1)}},[]);return[t,{onCancel:w,onConfirm:T}]};export{Y as a,tt as b,et as c,ot as d};

window.inOKXExtension = true;
window.ASSETS_BUILD_TYPE = "publish";

