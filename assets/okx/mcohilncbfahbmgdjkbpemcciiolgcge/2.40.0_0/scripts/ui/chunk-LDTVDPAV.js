import{w as me,x as de}from"./chunk-TV2DN7Q7.js";import{Ha as B}from"./chunk-SBW523XW.js";import{L as se,eb as E,fb as L,mb as fe,nb as ue,ob as le,qa as N}from"./chunk-KRRNVCWZ.js";import{Db as re,Pb as D,Sc as oe,Zf as b,c as g,de as U,e as P,ee as A,fc as He,fi as ce,i as c,ja as F,k as s,ke as R,ld as ne,md as ae,qi as C,tk as H,wh as S,yd as ie}from"./chunk-YC2Z7II3.js";var ye=g(O=>{"use strict";c();s();Object.defineProperty(O,"__esModule",{value:!0});O.fromAscii=O.toAscii=void 0;function Ne(e){let t=r=>r.split("").map(o=>{let n=o.charCodeAt(0);if(n<32||n>126)throw new Error("Cannot encode character that is out of printable ASCII range: "+n);return n});return Uint8Array.from(t(e))}O.toAscii=Ne;function Ee(e){return(r=>r.map(o=>{if(o<32||o>126)throw new Error("Cannot decode character that is out of printable ASCII range: "+o);return String.fromCharCode(o)}))(Array.from(e)).join("")}O.fromAscii=Ee});var ve=g(z=>{"use strict";c();s();z.byteLength=qe;z.toByteArray=$e;z.fromByteArray=Ze;var y=[],d=[],Le=typeof Uint8Array<"u"?Uint8Array:Array,Q="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(v=0,ge=Q.length;v<ge;++v)y[v]=Q[v],d[Q.charCodeAt(v)]=v;var v,ge;d["-".charCodeAt(0)]=62;d["_".charCodeAt(0)]=63;function be(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");r===-1&&(r=t);var o=r===t?0:4-r%4;return[r,o]}function qe(e){var t=be(e),r=t[0],o=t[1];return(r+o)*3/4-o}function ze(e,t,r){return(t+r)*3/4-r}function $e(e){var t,r=be(e),o=r[0],n=r[1],a=new Le(ze(e,o,n)),u=0,l=n>0?o-4:o,f;for(f=0;f<l;f+=4)t=d[e.charCodeAt(f)]<<18|d[e.charCodeAt(f+1)]<<12|d[e.charCodeAt(f+2)]<<6|d[e.charCodeAt(f+3)],a[u++]=t>>16&255,a[u++]=t>>8&255,a[u++]=t&255;return n===2&&(t=d[e.charCodeAt(f)]<<2|d[e.charCodeAt(f+1)]>>4,a[u++]=t&255),n===1&&(t=d[e.charCodeAt(f)]<<10|d[e.charCodeAt(f+1)]<<4|d[e.charCodeAt(f+2)]>>2,a[u++]=t>>8&255,a[u++]=t&255),a}function We(e){return y[e>>18&63]+y[e>>12&63]+y[e>>6&63]+y[e&63]}function Ge(e,t,r){for(var o,n=[],a=t;a<r;a+=3)o=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(e[a+2]&255),n.push(We(o));return n.join("")}function Ze(e){for(var t,r=e.length,o=r%3,n=[],a=16383,u=0,l=r-o;u<l;u+=a)n.push(Ge(e,u,u+a>l?l:u+a));return o===1?(t=e[r-1],n.push(y[t>>2]+y[t<<4&63]+"==")):o===2&&(t=(e[r-2]<<8)+e[r-1],n.push(y[t>>10]+y[t>>4&63]+y[t<<2&63]+"=")),n.join("")}});var Ae=g(p=>{"use strict";c();s();var Ye=p&&p.__createBinding||(Object.create?function(e,t,r,o){o===void 0&&(o=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,o,n)}:function(e,t,r,o){o===void 0&&(o=r),e[o]=t[r]}),Je=p&&p.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Ke=p&&p.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&Ye(t,e,r);return Je(t,e),t};Object.defineProperty(p,"__esModule",{value:!0});p.fromBase64=p.toBase64=void 0;var we=Ke(ve());function Qe(e){return we.fromByteArray(e)}p.toBase64=Qe;function Ve(e){if(!e.match(/^[a-zA-Z0-9+/]*={0,2}$/))throw new Error("Invalid base64 string format");return we.toByteArray(e)}p.fromBase64=Ve});var Ce=g(m=>{"use strict";c();s();var Xe=m&&m.__createBinding||(Object.create?function(e,t,r,o){o===void 0&&(o=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,o,n)}:function(e,t,r,o){o===void 0&&(o=r),e[o]=t[r]}),ke=m&&m.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),et=m&&m.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&Xe(t,e,r);return ke(t,e),t};Object.defineProperty(m,"__esModule",{value:!0});m.Bech32=m.normalizeBech32=m.fromBech32=m.toBech32=void 0;var $=et(He());function X(e,t,r){return $.encode(e,$.toWords(t),r)}m.toBech32=X;function k(e,t=1/0){let r=$.decode(e,t);return{prefix:r.prefix,data:new Uint8Array($.fromWords(r.words))}}m.fromBech32=k;function tt(e){let{prefix:t,data:r}=k(e);return X(t,r)}m.normalizeBech32=tt;var V=class{static encode(t,r,o){return X(t,r,o)}static decode(t,r=1/0){return k(t,r)}};m.Bech32=V});var Be=g(T=>{"use strict";c();s();Object.defineProperty(T,"__esModule",{value:!0});T.fromHex=T.toHex=void 0;function rt(e){let t="";for(let r of e)t+=("0"+r.toString(16)).slice(-2);return t}T.toHex=rt;function ot(e){if(e.length%2!==0)throw new Error("hex string length must be a multiple of 2");let t=new Uint8Array(e.length/2);for(let r=0;r<t.length;r++){let o=2*r,n=e.slice(o,o+2);if(!n.match(/[0-9a-f]{2}/i))throw new Error("hex string contains invalid characters");t[r]=parseInt(n,16)}return t}T.fromHex=ot});var Oe=g(x=>{"use strict";c();s();Object.defineProperty(x,"__esModule",{value:!0});x.toRfc3339=x.fromRfc3339=void 0;var nt=/^(\d{4})-(\d{2})-(\d{2})[T ](\d{2}):(\d{2}):(\d{2})(\.\d{1,9})?((?:[+-]\d{2}:\d{2})|Z)$/;function j(e,t=2){return e.toString().padStart(t,"0")}function at(e){let t=nt.exec(e);if(!t)throw new Error("Date string is not in RFC3339 format");let r=+t[1],o=+t[2],n=+t[3],a=+t[4],u=+t[5],l=+t[6],f=t[7]?Math.floor(+t[7]*1e3):0,h,w,M;t[8]==="Z"?(h=1,w=0,M=0):(h=t[8].substring(0,1)==="-"?-1:1,w=+t[8].substring(1,3),M=+t[8].substring(4,6));let G=h*(w*60+M)*60,Z=Date.UTC(r,o-1,n,a,u,l,f)-G*1e3;return new Date(Z)}x.fromRfc3339=at;function it(e){let t=e.getUTCFullYear(),r=j(e.getUTCMonth()+1),o=j(e.getUTCDate()),n=j(e.getUTCHours()),a=j(e.getUTCMinutes()),u=j(e.getUTCSeconds()),l=j(e.getUTCMilliseconds(),3);return`${t}-${r}-${o}T${n}:${a}:${u}.${l}Z`}x.toRfc3339=it});var Te=g(I=>{"use strict";c();s();Object.defineProperty(I,"__esModule",{value:!0});I.fromUtf8=I.toUtf8=void 0;function ct(e){return new TextEncoder().encode(e)}I.toUtf8=ct;function st(e,t=!1){let r=!t;return new TextDecoder("utf-8",{fatal:r}).decode(e)}I.fromUtf8=st});var Fe=g(i=>{"use strict";c();s();Object.defineProperty(i,"__esModule",{value:!0});i.toUtf8=i.fromUtf8=i.toRfc3339=i.fromRfc3339=i.toHex=i.fromHex=i.toBech32=i.normalizeBech32=i.fromBech32=i.Bech32=i.toBase64=i.fromBase64=i.toAscii=i.fromAscii=void 0;var je=ye();Object.defineProperty(i,"fromAscii",{enumerable:!0,get:function(){return je.fromAscii}});Object.defineProperty(i,"toAscii",{enumerable:!0,get:function(){return je.toAscii}});var xe=Ae();Object.defineProperty(i,"fromBase64",{enumerable:!0,get:function(){return xe.fromBase64}});Object.defineProperty(i,"toBase64",{enumerable:!0,get:function(){return xe.toBase64}});var W=Ce();Object.defineProperty(i,"Bech32",{enumerable:!0,get:function(){return W.Bech32}});Object.defineProperty(i,"fromBech32",{enumerable:!0,get:function(){return W.fromBech32}});Object.defineProperty(i,"normalizeBech32",{enumerable:!0,get:function(){return W.normalizeBech32}});Object.defineProperty(i,"toBech32",{enumerable:!0,get:function(){return W.toBech32}});var Ie=Be();Object.defineProperty(i,"fromHex",{enumerable:!0,get:function(){return Ie.fromHex}});Object.defineProperty(i,"toHex",{enumerable:!0,get:function(){return Ie.toHex}});var Me=Oe();Object.defineProperty(i,"fromRfc3339",{enumerable:!0,get:function(){return Me.fromRfc3339}});Object.defineProperty(i,"toRfc3339",{enumerable:!0,get:function(){return Me.toRfc3339}});var Pe=Te();Object.defineProperty(i,"fromUtf8",{enumerable:!0,get:function(){return Pe.fromUtf8}});Object.defineProperty(i,"toUtf8",{enumerable:!0,get:function(){return Pe.toUtf8}})});c();s();var ee=P(F());c();s();var q=P(F());c();s();var pe=P(F());var he=e=>{let t=A(ce);return(0,pe.useMemo)(()=>{var n;let o=((n=t.find(a=>a.coinId==e))==null?void 0:n.coinAmountInt)||0;return D(o)},[e])};var _e=({unapproved:e,coinId:t})=>{let r=N(),o=U(),n=R(),{baseCoin:a={}}=se(t),[u,l]=(0,q.useState)(!1),f=A(te=>{let Y=e.walletId,J=S(te),K=H(te);return{icon:K[e.origin].icon,host:K[e.origin].host,name:K[e.origin].name,unapproved:e,address:J[Y].account.solana,walletName:J[Y].walletName,keyringName:J[Y].keyringName}}),{cosmosFee:h=0,loading:w}=fe({coinId:t,address:f.address},!0),M=he(a.coinId),G=le(h,a),Z=ue(h,a),Se=re(M,D(h));return q.default.createElement(me,{errorText:r("wallet_extension_popup_insufficient_network_fee",{token:a.symbol}),navTitle:r("wallet_extension_popup_title_contract_interaction"),walletInfo:f,unapproved:e,baseCoin:a,isSufficientGas:w||Se,coinToDisplay:Z,feeToDisplay:G,reject:async()=>{await o(B()),await o(E(f.unapproved.id)),n.push(C)},confirm:async()=>{l(!0);try{await o(L(f.unapproved.id)),await o(B()),n.push(C)}finally{l(!1)}},rejectText:r("wallet_dapp_connection_btn_reject"),confirmText:r("wallet_set_password_btn_confirm"),loadingTx:u,loading:w})};c();s();var De=P(F());var Ue=P(Fe());var Re=({unapproved:e})=>{let t=N(),r=U(),o=R(),n=A(u=>{let l=e.walletId,f=S(u),h=H(u);return{icon:h[e.origin].icon,host:h[e.origin].host,name:h[e.origin].name,unapproved:e,address:f[l].account.solana,wallet:`${f[l].walletName} - ${f[l].keyringName}`}}),a=typeof e.params.transaction.data=="string"?e.params.transaction.data:(0,Ue.toBase64)(ie(e.params.transaction.data));return De.default.createElement(de,{navTitle:t("wallet_dapp_conncetion_notify_signature_request"),walletInfo:n,message:a,rejectText:t("wallet_dapp_connection_btn_reject"),confirmText:t("wallet_set_password_btn_confirm"),reject:async()=>{await r(E(n.unapproved.id)),await r(B()),o.push(C)},confirm:async()=>{await r(L(n.unapproved.id)),await r(B()),o.push(C)}})};var hr=({unapproved:e})=>{let t="";switch(e.localType===oe?t=ne:t=ae,e.method){case b.SIGN_AMINO:case b.RPC_SIGN_AMINO:case b.SIGN_DIRECT:case b.RPC_SIGN_DIRECT:return ee.default.createElement(_e,{unapproved:e,coinId:t});case b.SIGN_ARBITRARY:case b.RPC_SIGN_ARBITRARY:return ee.default.createElement(Re,{unapproved:e,coinId:t});default:return""}};export{hr as a};

window.inOKXExtension = true;
window.ASSETS_BUILD_TYPE = "publish";

