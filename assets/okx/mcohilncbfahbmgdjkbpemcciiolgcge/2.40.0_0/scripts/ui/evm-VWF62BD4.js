import{B as wi,D as ki,E as hi,F as bi,H as yi,J as ni,s as Ni}from"./chunk-RO6IVRID.js";import"./chunk-SRF3OTW4.js";import"./chunk-MO6HYXXQ.js";import"./chunk-SULN63BG.js";import"./chunk-GCK4PCMX.js";import"./chunk-CKFSIZPF.js";import"./chunk-PFUOJJI2.js";import"./chunk-P4R64FMZ.js";import{m as mi}from"./chunk-POEDNLGY.js";import"./chunk-MLPBPWR7.js";import"./chunk-IWZNXKTF.js";import"./chunk-MFUKPLPN.js";import{b as ei}from"./chunk-4SCEKLXQ.js";import"./chunk-RYMLTDAH.js";import"./chunk-VNM7HA44.js";import{Ha as gi,xa as oi}from"./chunk-SBW523XW.js";import"./chunk-NEW56Z2U.js";import{g as P}from"./chunk-HX34N4W4.js";import"./chunk-F7QJ6WQ5.js";import{a as Pi}from"./chunk-TNVBYBO5.js";import{c as Di,k as ti,qa as C}from"./chunk-KRRNVCWZ.js";import{Aa as H,Ca as A,Eb as ri,Gd as li,Hk as ui,Ik as M,Jk as fi,La as y,Mi as vi,Na as F,Oa as si,Pa as N,Tg as L,de as j,e as x,fe as ii,i as p,ja as Y,k as v,ke as q,nj as _i,pa as d,qi as ci,ra as R,tg as W,va as Z,wa as n,xg as di,zi as pi}from"./chunk-YC2Z7II3.js";p();v();var S=x(Y());p();v();var J=x(Y());p();v();var i=x(Y()),K=x(Di());p();v();var s=x(Y()),$=x(Pi());var zi=({visible:t,amount:e,tokenSymbol:_,onChange:c,onClose:u})=>{let a=C(),h=0,g=10**13,[m,E]=(0,s.useState)(e>=g),[f,O]=(0,s.useState)(m?"":e),[r,w]=(0,s.useState)(!0),[k,z]=s.default.useState(!1),D=()=>{z(!k)},T=s.default.createElement("div",{onClick:()=>{E(!0),O("")},className:(0,$.default)("token-approve-amount--unlimited",{active:m})},a("wallet_dapp_connection_subtitle_approval_amount_unlimitied")),B=b=>{let G=di(b);O(G)},Q=s.default.createElement("div",{onClick:()=>{E(!1),w(!0)},className:(0,$.default)("token-approve-amount--customize",{active:!m})},s.default.createElement(d,{className:(0,$.default)(`token-approve-amount--icon ${!m&&r?"okx-wallet-plugin-arrow-small-up":"okx-wallet-plugin-arrow-small-down"}`),onClick:b=>{w(!r),m||b.stopPropagation()}}),s.default.createElement("div",{className:"token-approve-amount--top-title"},a("wallet_transfer_gasfee_subtitle_gasfee_custom")),s.default.createElement("div",{className:(0,$.default)("token-approve-amount--toggle",{"customize-show":!m&&r})},s.default.createElement("div",{className:"token-approve-amount--title"},a("wallet_dapp_connection_subtitle_input_the_maximum",{tokenSymbol:_||""})),s.default.createElement(A.Number,{className:"token-approve-amount--input",min:0,type:"number",step:1,value:f,enableMinus:!1,placeholder:h,onChange:b=>B(b)}))),X=((b,G)=>b?!1:G===""?!0:!ri(`${G||0}`,0))(m,f);return s.default.createElement(H,{visible:t,containerMode:!0,isFull:!0,className:"token-approve-amount--dialog",windowStyle:{width:"100%",height:"100%",maxHeight:"100%",top:"0"}},s.default.createElement("div",{className:"token-approve-amount--main"},s.default.createElement(P,{onBack:u,closeable:!1,title:s.default.createElement("div",{className:"token-approve-amount--page-title"},s.default.createElement("span",null,a("wallet_contract_interaction_approval_permission_authorized_amount")),s.default.createElement(d,{className:"okx-wallet-plugin-information-circle",style:{fontSize:"20px",color:"#929292",marginLeft:"4px"},onClick:()=>{z(!0)}}))}),s.default.createElement("div",{className:"token-approve-amount--padding"},T,Q,s.default.createElement(n,{className:"token-approve-amount--button",category:n.CATEGORY.fill,type:n.TYPE.highlight,disabled:X,onClick:()=>{c(m?g:f)}},a("wallet_set_password_btn_confirm"))),s.default.createElement(H,{windowClass:"approve-dialog",whiteboard:!0,visible:k,hideCloseBtn:!0},s.default.createElement("div",{className:"approve-dialog--title"},a("wallet_extension_protocol_popup_title_approved_amount")),s.default.createElement("div",{className:"approve-dialog--desc"},a("wallet_extension_protocol_popup_approved_amount_desc")),s.default.createElement("div",{className:"approve-dialog--bottom"},s.default.createElement(n,{category:n.CATEGORY.fill,type:n.TYPE.highlight,size:n.SIZE.md,onClick:D,block:!0},a("wallet_extension_protocol_popup_approved_amount_btn_gotit"))))))},Ci=zi;var Ei=({unapprovedTx:t})=>{let e=C(),[_,{toggle:c}]=ti(!1),[u,{toggle:a}]=ti(!1),[h,g]=(0,i.useState)(!1),[m,E]=ki(t),{type:f,title:O,auth:r,meta:w,chain:k,nonce:z,fee:D,gas:T,loading:B}=m,{sign:Q,cancel:ai,setNonce:X,setGasLimit:b,setGasPrice:G,setAuthAmount:Si}=E,Oi=()=>{try{mi({chain_id:parseInt(k.chainId,16),wallet_address:t.from})}catch(I){console.error(I)}Q()};return i.default.createElement("div",{className:"evm-confirm-transaction--main"},i.default.createElement(P,{title:O,closeable:!1,backable:!1}),i.default.createElement("div",{className:"evm-confirm-transaction"},i.default.createElement("div",{className:"evm-confirm-transaction--header"},f===L.TOKEN_METHOD_APPROVE&&r.symbol?i.default.createElement(ni,{text:r.symbol&&r.symbol[0],theme:"lightBlue",size:"larger"}):i.default.createElement(F,{width:56,height:56,alt:"",src:w.icon||M,errorImg:M,className:"evm-confirm-transaction--chain-icon"}),i.default.createElement("div",{className:"evm-confirm-transaction--currency-amount"},w.name),i.default.createElement("div",{className:"evm-confirm-transaction--desc"},w.host)),i.default.createElement("div",{className:"evm-confirm-transaction--body"},i.default.createElement("div",{className:"evm-confirm-transaction--item evm-confirm-transaction--item-normal"},i.default.createElement("div",{className:"evm-confirm-transaction--title"},e("wallet_transfer_confirmation_subtitle_wallet")),i.default.createElement("div",{className:"evm-confirm-transaction--value evm-confirm-transaction--value-normal"},i.default.createElement("span",null,w.wallet))),i.default.createElement("div",{className:"evm-confirm-transaction--item evm-confirm-transaction--item-normal"},i.default.createElement("div",{className:"evm-confirm-transaction--title"},e("wallet_transfer_subtitle_send_address")),i.default.createElement("div",{className:"evm-confirm-transaction--value evm-confirm-transaction--value-normal"},i.default.createElement("span",null,W(t.from)),i.default.createElement("img",{onClick:()=>{(0,K.default)(t.from),N.success({title:e("wallet_transaction_history_toast_address_copied"),desc:t.from,containerClassName:"address-copy-notification"})},src:"/static/images/dapp-copy.svg",className:"confirm-transaction--copy"}))),t.to?i.default.createElement("div",{className:"evm-confirm-transaction--item evm-confirm-transaction--item-normal"},i.default.createElement("div",{className:"evm-confirm-transaction--title"},e("wallet_extension_popup_text_interact_with")),i.default.createElement("div",{className:"evm-confirm-transaction--value evm-confirm-transaction--value-normal"},i.default.createElement("span",null,W(t.to)),i.default.createElement("img",{onClick:()=>{(0,K.default)(t.to),N.success({title:e("wallet_transaction_history_toast_address_copied"),desc:t.to,containerClassName:"address-copy-notification"})},src:"/static/images/dapp-copy.svg",className:"confirm-transaction--copy"}))):null,f===L.TOKEN_METHOD_APPROVE&&!r.isRevoke&&i.default.createElement("div",{className:"evm-confirm-transaction--item evm-confirm-transaction--item-normal"},i.default.createElement("div",{className:"evm-confirm-transaction--title"},e("wallet_contract_interaction_approval_permission_authorized_amount")),B.token?i.default.createElement(Z,null):i.default.createElement("div",{className:"evm-confirm-transaction--value evm-confirm-transaction--value-highlight"},i.default.createElement("span",{onClick:()=>{g(!0)}},r.approveAmountDisplay),i.default.createElement(d,{className:"okx-wallet-plugin-arrow-small-right"}))),f===L.TOKEN_METHOD_APPROVE&&i.default.createElement("div",{className:"evm-confirm-transaction--item evm-confirm-transaction--item-normal"},i.default.createElement("div",{className:"evm-confirm-transaction--title"},e("wallet_extension_popup_text_project")),i.default.createElement("div",{className:"evm-confirm-transaction--value evm-confirm-transaction--value-normal"},i.default.createElement(F,{width:20,height:20,alt:"",src:w.originInfo.icon||fi,errorImg:ui,className:"evm-confirm-transaction--text-image"}),i.default.createElement("span",null,w.originInfo.name))),f===L.TOKEN_METHOD_APPROVE&&r.address&&i.default.createElement("div",{className:"evm-confirm-transaction--item evm-confirm-transaction--item-normal"},i.default.createElement("div",{className:"evm-confirm-transaction--title"},e("wallet_extension_popup_text_project_contract")),i.default.createElement("div",{className:"evm-confirm-transaction--value evm-confirm-transaction--value-normal"},i.default.createElement("span",null,W(r.address)),i.default.createElement("img",{onClick:()=>{(0,K.default)(r.address),N.success({title:e("wallet_transaction_history_toast_address_copied"),desc:r.address,containerClassName:"address-copy-notification"})},src:"/static/images/dapp-copy.svg",className:"confirm-transaction--copy"}))),i.default.createElement("div",{className:"confirm-transaction--line"}),i.default.createElement("div",{className:"evm-confirm-transaction--item evm-confirm-transaction--item-normal"},i.default.createElement("div",{className:"evm-confirm-transaction--title"},e("wallet_dapp_conncetion_subtitle_network")),i.default.createElement("div",{className:"evm-confirm-transaction--value evm-confirm-transaction--value-normal"},i.default.createElement(ni,{className:"evm-confirm-transaction--network-icon",text:k.name&&k.name[0],theme:"deepBlue",size:"small",icon:k==null?void 0:k.icon}),i.default.createElement("span",null,k.name))),i.default.createElement("div",{className:"evm-confirm-transaction--item evm-confirm-transaction--item-normal"},i.default.createElement("div",{className:"evm-confirm-transaction--title"},e("wallet_dapp_conncetion_subtitle_network_fee")),D.loading?i.default.createElement(Z,null):i.default.createElement("div",{className:"evm-confirm-transaction--value evm-confirm-transaction--value-normal"},i.default.createElement("div",{className:"evm-confirm-transaction--expand",onClick:c},i.default.createElement("div",{className:"evm-confirm-transaction--expand-text"},i.default.createElement(ei,{text:D.gasDisplay,maxWidth:"200px"})),i.default.createElement(d,{className:_?"okx-wallet-plugin-arrow-small-up":"okx-wallet-plugin-arrow-small-down"})))),_?i.default.createElement("div",{className:"evm-confirm-transaction--gas"},i.default.createElement("div",{className:"evm-confirm-transaction--gas-item"},i.default.createElement("div",{className:"evm-confirm-transaction--gas-title"},e("developer_mode_dapp_connection_title_gas_price",{gasprice:""})),i.default.createElement(A.Number,{size:A.SIZE.sm,placeholder:T.price.suggested,className:"evm-confirm-transaction--gas-input",value:T.price.custom,onChange:I=>{G(I)}})),i.default.createElement("div",{className:"evm-confirm-transaction--gas-item"},i.default.createElement("div",{className:"evm-confirm-transaction--gas-title"},e("developer_mode_dapp_connection_title_gas_limit")),i.default.createElement(A.Number,{size:A.SIZE.sm,placeholder:T.limit.suggested,className:"evm-confirm-transaction--gas-input",value:T.limit.custom,onChange:I=>{b(I)},error:()=>T.limit.custom===T.limit.suggested&&T.limit.suggested===0?e("developer_mode_send_input_gaslimit_failure"):!1}))):null,f!==L.TOKEN_METHOD_APPROVE&&i.default.createElement("div",{className:"evm-confirm-transaction--item evm-confirm-transaction--item-normal"},i.default.createElement("div",{className:"evm-confirm-transaction--title"},e("wallet_transation_confirmation_subtitle_total_cost")),D.loading?i.default.createElement(Z,null):i.default.createElement("div",{className:"evm-confirm-transaction--value evm-confirm-transaction--value-normal"},i.default.createElement("span",null,i.default.createElement(ei,{text:D.totalDisplay,maxWidth:"200px"})))),D.lackCoin&&i.default.createElement("div",{className:"evm-confirm-transaction--insufficient-gas"},e("wallet_extension_popup_insufficient_network_fee",{token:k.symbol})),i.default.createElement("div",{className:"confirm-transaction--line"}),i.default.createElement("div",{className:"evm-confirm-transaction--item evm-confirm-transaction--item-input"},i.default.createElement("div",{className:"evm-confirm-transaction--title"},e("developer_mode_dapp_connection_title_custom")),z.pending?i.default.createElement(Z,null):i.default.createElement("div",{className:"evm-confirm-transaction--value evm-confirm-transaction--value-input"},i.default.createElement(A.Number,{placeholder:z.suggested,className:"evm-confirm-transaction--gas-input",size:A.SIZE.sm,value:z.custom,precision:0,onChange:I=>{X(I)},withOperation:!0,alwaysOperation:!0}))),i.default.createElement("div",{className:"confirm-transaction--line"}),t.data&&i.default.createElement("div",{className:"evm-confirm-transaction--item evm-confirm-transaction--item-normal"},i.default.createElement("div",{className:"evm-confirm-transaction--title"},e("wallet_dapp_connection_subtitle_data_label")),i.default.createElement("div",{className:"evm-confirm-transaction--value evm-confirm-transaction--value-normal"},i.default.createElement(d,{onClick:a,className:u?"okx-wallet-plugin-arrow-small-up":"okx-wallet-plugin-arrow-small-down"}))),t.data&&u&&i.default.createElement("div",{className:"evm-confirm-transaction--data"},i.default.createElement(y,{style:{marginLeft:"20px",marginRight:"20px",zIndex:"9"},title:e("wallet_receive_btn_copy_address"),type:y.TYPES.neutral,prefixClassName:"confirm-transaction--tooltip",trigger:y.TRIGGER_TYPES.hover},i.default.createElement("span",{style:{userSelect:"all",cursor:"text"},onClick:()=>{(0,K.default)(t.data).then(()=>{N.success({title:e("wallet_backup_wallet_toast_private_key_copied"),duration:1.5,placement:N.DIRECTION.top})})}},t.data))))),i.default.createElement("div",{className:"evm-confirm-transaction--button-group"},i.default.createElement(n,{className:"ok-confirm-transaction-button",category:n.CATEGORY.outline,type:n.TYPE.secondary,size:n.SIZE.md,block:!0,onClick:ai},e("wallet_dapp_connection_btn_reject")),i.default.createElement(n,{block:!0,loading:B.sign,className:"ok-confirm-transaction-button",category:n.CATEGORY.fill,type:n.TYPE.highlight,size:n.SIZE.md,disabled:D.lackCoin||z.pending||B.sign||B.token,onClick:Oi},e("wallet_set_password_btn_confirm"))),i.default.createElement(Ci,{visible:h,amount:r.formattedAmount,tokenSymbol:r.symbol,onChange:I=>{Si(I),g(!1)},onClose:()=>{g(!1)}}))};var Ti=({unapprovedTxList:t})=>{let e=t[t.length-1];return J.default.createElement(J.default.Fragment,null,J.default.createElement(Ei,{unapprovedTx:e}))};p();v();var l=x(Y());var Yi=({unapprovedStList:t})=>{let e=yi(t),_=q(),c=C(),u=j(),[a,h]=(0,l.useState)(!1),g=wi(),{url:m,chainId:E}=g,f=Ni(m),O=async()=>{h(!0),await f(E,e.address);let r=1.5;N.success({title:c("wallet_extension_addressbook_toast_address_added"),duration:r,placement:N.DIRECTION.top}),await new Promise(w=>{setTimeout(w,r*1e3)}),u(oi()).then(()=>{_.push(_i)}),h(!1)};return l.default.createElement("div",{className:"add-suggested-token--main"},l.default.createElement(P,{title:c("wallet_dapp_connection_maintitle_add_suggested_tokens"),backable:!1,closeable:!1}),l.default.createElement("div",{className:"add-suggested-token--item"},l.default.createElement("div",{className:"add-suggested-token--item-left"},l.default.createElement(F,{width:56,height:56,alt:"",src:e.image||M,errorImg:M,className:"add-suggested-token--item-icon"}),l.default.createElement("div",{className:"add-suggested-token--item-name"},l.default.createElement("span",{className:"add-suggested-token--item-symbol"},e.symbol),e.net&&l.default.createElement("span",{className:"add-suggested-token--item-net"},e.net))),l.default.createElement("div",{className:"add-suggested-token--item-right"},l.default.createElement("div",{className:"add-suggested-token--item-amount"},e.amount||0),l.default.createElement("div",{className:"add-suggested-token--item-currency"},e.currencyAmountFormated||"$0.00"))),l.default.createElement("div",{className:"evm-confirm-transaction--button-group add-suggested-token--button"},l.default.createElement(n,{className:"ok-confirm-transaction-button",category:n.CATEGORY.outline,type:n.TYPE.secondary,size:n.SIZE.md,block:!0,onClick:()=>{u(oi())}},c("wallet_dapp_connection_btn_reject")),l.default.createElement(n,{block:!0,loading:a,className:"ok-confirm-transaction-button",category:n.CATEGORY.fill,type:n.TYPE.highlight,size:n.SIZE.md,onClick:O},c("wallet_dapp_connection_subtitle_add_token"))))},Ii=Yi;p();v();var o=x(Y());p();v();var V=x(Y());var xi=({visible:t,title:e,iconName:_="okx-wallet-plugin-warning-circle-fill",buttonText:c="developer_mode_add_network_btn_gotit",onClick:u})=>{let a=C();return V.default.createElement(H,{hideCloseBtn:!0,noContentPadding:!0,visible:t},V.default.createElement("div",{className:"dapp-dialog"},V.default.createElement(d,{className:`${_} dapp-dialog--logo`}),V.default.createElement("h1",{className:"dapp-dialog--title"},e),V.default.createElement(n,{className:"dapp-dialog--button",category:n.CATEGORY.fill,type:n.TYPE.highlight,onClick:u,size:n.SIZE.lg},a(c))))};var Bi=()=>{let t=C(),[e,_]=(0,o.useState)(!1),[c,u]=(0,o.useState)(!1),[a,{cancel:h,approve:g}]=hi(),m=async()=>{_(!0),await g(),N.success({title:t("developer_mode_home_toast_added"),duration:1.5,placement:N.DIRECTION.top}),_(!1)};return o.default.createElement("div",{className:"switch-network"},o.default.createElement(P,{title:t("developer_mode_add_network_maintitle_add_network"),backable:!1,closeable:!1}),o.default.createElement(R,{title:t("developer_mode_add_network_errortip_risk_aware"),type:R.TYPE.warn,closable:!1}),o.default.createElement("div",{className:"switch-network--content"},o.default.createElement("div",{className:"switch-network--header"},o.default.createElement("div",{className:"switch-network--header-icon"},o.default.createElement("img",{src:a.icon,className:"switch-network--header-icon-image"})),o.default.createElement("div",{className:"switch-network--header-name"},a.name),o.default.createElement("div",{className:"switch-network--header-origin"},a.origin)),o.default.createElement("div",{className:"switch-network--info"},o.default.createElement("div",{className:"switch-network--info-item"},o.default.createElement("div",{className:"switch-network--info-item-title"},o.default.createElement("span",null,t("developer_mode_add_network_title_network_name")),o.default.createElement(y,{title:t("wallet_dapp_conncetion_add_network_subtitle_network_name_tips")},o.default.createElement(d,{className:"okx-wallet-plugin-information-circle"}))),o.default.createElement("div",{className:"switch-network--info-item-value"},a.type||a.chainName)),a.switchType===li.ADD_ETHEREUM_CHAIN&&o.default.createElement(o.default.Fragment,null,o.default.createElement("div",{className:"switch-network--info-item"},o.default.createElement("div",{className:"switch-network--info-item-title"},o.default.createElement("span",null,t("developer_mode_add_network_title_networkurl")),o.default.createElement(y,{title:t("wallet_dapp_conncetion_add_network_subtitle_network_url_tips")},o.default.createElement(d,{className:"okx-wallet-plugin-information-circle"}))),o.default.createElement("div",{className:"switch-network--info-item-value"},a.rpcUrl)),o.default.createElement("div",{className:"switch-network--info-item"},o.default.createElement("div",{className:"switch-network--info-item-title"},o.default.createElement("span",null,t("developer_mode_add_network_title_chainid")),o.default.createElement(y,{title:t("wallet_dapp_conncetion_add_network_subtitle_chain_id_tips")},o.default.createElement(d,{className:"okx-wallet-plugin-information-circle"}))),o.default.createElement("div",{className:"switch-network--info-item-value"},a.chainIdToDisplay)),o.default.createElement("div",{className:"switch-network--info-item"},o.default.createElement("div",{className:"switch-network--info-item-title"},o.default.createElement("span",null,t("developer_mode_add_network_title_currency_symbol")),o.default.createElement(y,{title:t("wallet_dapp_conncetion_add_network_subtitle_currency_symbol_tips")},o.default.createElement(d,{className:"okx-wallet-plugin-information-circle"}))),o.default.createElement("div",{className:"switch-network--info-item-value"},a.ticker)),o.default.createElement("div",{className:"switch-network--info-item"},o.default.createElement("div",{className:"switch-network--info-item-title"},o.default.createElement("span",null,t("developer_mode_add_network_title_block_explorerurl")),o.default.createElement(y,{title:t("wallet_dapp_conncetion_add_network_subtitle_explorer_url_tips")},o.default.createElement(d,{className:"okx-wallet-plugin-information-circle"}))),o.default.createElement("div",{className:"switch-network--info-item-value"},a.explorers||a.blockExplorerUrl))))),o.default.createElement("div",{className:"switch-network--button"},o.default.createElement(n,{className:"ok-confirm-transaction-button",category:n.CATEGORY.outline,type:n.TYPE.secondary,size:n.SIZE.lg,block:!0,onClick:h},t("developer_mode_add_network_btn_cancel")),o.default.createElement(n,{block:!0,loading:e,className:"ok-confirm-transaction-button",category:n.CATEGORY.fill,type:n.TYPE.highlight,size:n.SIZE.lg,onClick:m},t("developer_mode_add_network_btn_approve")),o.default.createElement(xi,{visible:c,title:t("developer_mode_add_network_toast_add_fail"),onClick:()=>{u(!1)}})))},Ai=Bi;var Ko=()=>{let{unapprovedTxList:t,unapprovedTxCount:e,unapprovedSmCount:_,unapprovedStList:c,unapprovedStCount:u,unapprovedSnList:a,unapprovedSnCount:h,unapprovedPermissionsRequestId:g,unapprovedPermissionCount:m,unapprovedRequestCount:E}=bi(),f=j(),O=q();return(0,S.useEffect)(()=>{(async()=>{E===0&&(await f(gi()),O.push(ci))})()},[E]),m>0?S.default.createElement(ii,{to:`${pi}/${g}`}):_>0?S.default.createElement(ii,{to:vi}):u>0?S.default.createElement(Ii,{unapprovedStList:c}):h>0?S.default.createElement(Ai,{unapprovedSnList:a}):e>0?S.default.createElement(Ti,{unapprovedTxList:t}):S.default.createElement(si,{delayTime:5e3})};export{Ko as default};

window.inOKXExtension = true;
window.ASSETS_BUILD_TYPE = "publish";

