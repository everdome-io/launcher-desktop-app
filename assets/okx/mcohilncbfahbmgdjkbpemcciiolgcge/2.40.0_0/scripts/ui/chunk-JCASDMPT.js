import{a as F,b as st,c as rt}from"./chunk-TL6DTDXH.js";import{a as Ko}from"./chunk-XKAB6HLO.js";import{a as vt}from"./chunk-LDTVDPAV.js";import{a as ho}from"./chunk-EQU2E42M.js";import{t as Ht}from"./chunk-Z3F5FSEH.js";import{b as ie}from"./chunk-HXYG5WFL.js";import{b as Yt,f as zt}from"./chunk-POEDNLGY.js";import{b as Co}from"./chunk-JHZWQWSH.js";import{a as Ho}from"./chunk-3HAJNEFC.js";import{a as Yo}from"./chunk-APQAOS3P.js";import{a as zo}from"./chunk-QYLV6ZSX.js";import{a as wo,c as Ao,d as So,e as Mo,f as Do,g as Oo,h as $o,i as Go,j as Bo,k as Uo,q as Lo,r as Wo,s as _t,t as jo,u as gt,v as Fo}from"./chunk-TV2DN7Q7.js";import{a as ue}from"./chunk-MXVCAI6G.js";import{a as Io,b as Eo,c as ko}from"./chunk-PGO4M2SB.js";import{b as L}from"./chunk-4SCEKLXQ.js";import{a as qo}from"./chunk-ZHOBAN7R.js";import{b as Po,c as Q}from"./chunk-KWSHYTX5.js";import{$ as ao,H as Ie,I as oo,K as so,Y as ro,Z as no,_ as io,aa as co,ba as mo,ca as po,la as lo,ma as uo,na as fo,oa as _o,pa as go,qa as vo,ra as yo}from"./chunk-SBW523XW.js";import{g as Ee}from"./chunk-HX34N4W4.js";import{a as we}from"./chunk-TNVBYBO5.js";import{Va as xo,Xa as No,c as Te,db as bo,l as We,o as To,qa as b}from"./chunk-KRRNVCWZ.js";import{$ as nr,Ag as be,Bd as U,Dh as Re,Fh as et,Fk as Rt,Gd as I,Hc as ft,Hd as j,Jc as Bt,Kc as Ut,Kk as eo,La as k,Mk as to,Na as Gt,Nk as Ce,Pa as W,Pf as Kt,Qc as Lt,Qh as tt,Sc as Wt,Tc as jt,Ug as Zt,Wg as Xt,ae as re,ce as X,de as Xe,e as p,ee as xe,g as l,i,ig as Je,ii as Pe,j as d,ja as C,je as ne,jh as Jt,k as a,ke as Ne,lj as Qt,mi as qe,na as ir,oa as M,pa as B,pg as Vt,qi as ot,ra as ut,tg as J,ub as ar,ug as Qe,wa as h,wd as Ft,zg as Le}from"./chunk-YC2Z7II3.js";i();a();var z=p(C());i();a();var fe=p(C()),yt=p(we());var nt=p(M());i();a();var ke="tx-handler",Vo=r=>{let o=b(),{handleChangeTx:e,editIdx:t,unapprovedRequestsCount:s}=r;return s<=1?null:fe.default.createElement("div",{className:ke},fe.default.createElement("div",{className:(0,yt.default)(`${ke}__arrow`,"prev",{hidden:t===0}),onClick:()=>{e(-1)}},fe.default.createElement(B,{className:`${ke}__arrow-icon okx-wallet-plugin-arrow-small-right`})),fe.default.createElement("div",{className:`${ke}__title`},o("wallet_transaction_confirm_subtitle_pending_orders_number",{index:t+1,total:s})),fe.default.createElement("div",{className:(0,yt.default)(`${ke}__arrow`,{hidden:t===s-1}),onClick:()=>{e(1)}},fe.default.createElement(B,{className:`${ke}__arrow-icon okx-wallet-plugin-arrow-small-right`})))};Vo.propTypes={editIdx:nt.default.number.isRequired,unapprovedRequestsCount:nt.default.number.isRequired,handleChangeTx:nt.default.func.isRequired};var Zo=Vo;i();a();var he=p(C());i();a();i();a();i();a();var T=p(C()),D=p(M());i();a();i();a();var Ae=p(C()),Se=p(M());i();a();function ee({account:r,className:o,displayAddress:e=!1,handleClick:t,icon:s=null}){let{name:n,address:c,balance:m}=r||{};return Ae.default.createElement("div",{className:`account-list-item ${o}`,onClick:()=>t==null?void 0:t({name:n,address:c,balance:m})},Ae.default.createElement("div",{className:"account-list-item__top-row"},Ae.default.createElement("div",{className:"account-list-item__account-name"},n||c),s&&Ae.default.createElement("div",{className:"account-list-item__icon"},s)),e&&n&&Ae.default.createElement("div",{className:"account-list-item__account-address"},Vt(c)))}ee.propTypes={account:Se.default.object.isRequired,className:Se.default.string.isRequired,displayAddress:Se.default.bool.isRequired,handleClick:Se.default.func.isRequired,icon:Se.default.node.isRequired};var _e=class extends T.Component{constructor(){super(...arguments);l(this,"state",{fromAccount:this.props.fromAccount});l(this,"componentDidMount",()=>{j(window.location.href)===U&&window.addEventListener("beforeunload",this.beforeUnload)});l(this,"componentWillUnmount",()=>{this.removeBeforeUnload()});l(this,"beforeUnload",async e=>{let{clearConfirmTransaction:t,cancelEncryptionPublicKey:s,txData:n}=this.props;await s(n,e),t()});l(this,"removeBeforeUnload",()=>{j(window.location.href)===U&&window.removeEventListener("beforeunload",this.beforeUnload)});l(this,"renderHeader",()=>T.default.createElement("div",{className:"request-encryption-public-key__header"},T.default.createElement("div",{className:"request-encryption-public-key__header-background"}),T.default.createElement("div",{className:"request-encryption-public-key__header__text"},this.context.t("wallet_dapp_conncetion_notify_public_key_request")),T.default.createElement("div",{className:"request-encryption-public-key__header__tip-container"},T.default.createElement("div",{className:"request-encryption-public-key__header__tip"}))));l(this,"renderAccount",()=>{let{fromAccount:e}=this.state,{t}=this.context;return T.default.createElement("div",{className:"request-encryption-public-key__account"},T.default.createElement("div",{className:"request-encryption-public-key__account-text"},`${t("wallet_manage_wallet_top_account")}:`),T.default.createElement("div",{className:"request-encryption-public-key__account-item"},T.default.createElement(ee,{account:e})))});l(this,"renderBalance",()=>{let{conversionRate:e,nativeCurrency:t}=this.props,{t:s}=this.context,{fromAccount:{balance:n}}=this.state,c=be(n,{fromNumericBase:"hex",toNumericBase:"dec",fromDenomination:"WEI",numberOfDecimals:6,conversionRate:e});return T.default.createElement("div",{className:"request-encryption-public-key__balance"},T.default.createElement("div",{className:"request-encryption-public-key__balance-text"},`${s("wallet_dapp_connection_subtitle_balance")}:`),T.default.createElement("div",{className:"request-encryption-public-key__balance-value"},`${c} ${t}`))});l(this,"renderRequestIcon",()=>T.default.createElement("div",{className:"request-encryption-public-key__request-icon"}));l(this,"renderAccountInfo",()=>T.default.createElement("div",{className:"request-encryption-public-key__account-info"},this.renderAccount(),this.renderRequestIcon(),this.renderBalance()));l(this,"renderBody",()=>{let{domainMetadata:e,txData:t}=this.props,{t:s}=this.context,n=e[t.origin],c=s("wallet_dapp_conncetion_notify_public_key_notice",{siteName:t.origin}),m=(n==null?void 0:n.hostname)||t.origin;return T.default.createElement("div",{className:"request-encryption-public-key__body"},this.renderAccountInfo(),T.default.createElement("div",{className:"request-encryption-public-key__visual"},T.default.createElement("section",null,n!=null&&n.icon?T.default.createElement("img",{className:"request-encryption-public-key__visual-identicon",src:n.icon,alt:""}):T.default.createElement("i",{className:"request-encryption-public-key__visual-identicon--default"},m.charAt(0).toUpperCase()),T.default.createElement("div",{className:"request-encryption-public-key__notice"},c))))});l(this,"renderFooter",()=>{let{cancelEncryptionPublicKey:e,clearConfirmTransaction:t,encryptionPublicKey:s,history:n,mostRecentOverviewPage:c,txData:m}=this.props,{t:f}=this.context;return T.default.createElement("div",{className:"request-encryption-public-key__footer"},T.default.createElement(h,{category:h.CATEGORY.fill,type:h.TYPE.gray,size:h.SIZE.md,className:"request-encryption-public-key__footer__cancel-button",onClick:async u=>{this.removeBeforeUnload(),await e(m,u),t(),n.push(c)}},this.context.t("wallet_transfer_btn_cancel_transaction")),T.default.createElement(h,{category:h.CATEGORY.fill,type:h.TYPE.primary,size:h.SIZE.md,className:"request-encryption-public-key__footer__sign-button",onClick:async u=>{this.removeBeforeUnload(),await s(m,u),t(),n.push(c)}},f("wallet_dapp_conncetion_btn_provide")))});l(this,"render",()=>T.default.createElement("div",{className:"request-encryption-public-key__container"},this.renderHeader(),this.renderBody(),this.renderFooter()))}};_e.contextTypes={t:D.default.func.isRequired};_e.propTypes={fromAccount:D.default.shape({address:D.default.string.isRequired,balance:D.default.string,name:D.default.string}).isRequired,clearConfirmTransaction:D.default.func.isRequired,cancelEncryptionPublicKey:D.default.func.isRequired,encryptionPublicKey:D.default.func.isRequired,conversionRate:D.default.number.isRequired,history:D.default.object.isRequired,txData:D.default.object.isRequired,domainMetadata:D.default.object.isRequired,mostRecentOverviewPage:D.default.string.isRequired,nativeCurrency:D.default.string.isRequired};function cr(r,o){let{unapproved:e}=o,{metamask:{domainMetadata:t={}}}=r,s=Pe(r),n=e;n||(n=s[0]);let{msgParams:c}=n,m=et(r,c);return{txData:n,domainMetadata:t,fromAccount:m,requester:null,requesterAddress:null,conversionRate:qe(r),mostRecentOverviewPage:ie(r),nativeCurrency:Rt(r)}}function mr(r){return{goHome:()=>r(Ie()),clearConfirmTransaction:()=>r(Q()),encryptionPublicKey:(o,e)=>{let t={data:o.msgParams,metamaskId:o.id};return e.stopPropagation(),r(go(t))},cancelEncryptionPublicKey:(o,e)=>(e.stopPropagation(),r(co(o)))}}var ht=re(ne,X(cr,mr))(_e);i();a();i();a();i();a();var _=p(C()),O=p(M()),Xo=p(Te()),it=p(we());var ge=class extends _.Component{constructor(){super(...arguments);l(this,"state",{fromAccount:this.props.fromAccount,copyToClipboardPressed:!1});l(this,"componentDidMount",()=>{j(window.location.href)===U&&window.addEventListener("beforeunload",this.beforeUnload)});l(this,"componentWillUnmount",()=>{this.removeBeforeUnload()});l(this,"beforeUnload",async e=>{let{clearConfirmTransaction:t,cancelDecryptMessage:s,txData:n}=this.props;await s(n,e),t()});l(this,"removeBeforeUnload",()=>{j(window.location.href)===U&&window.removeEventListener("beforeunload",this.beforeUnload)});l(this,"copyMessage",()=>{(0,Xo.default)(this.state.rawMessage)});l(this,"renderHeader",()=>_.default.createElement("div",{className:"request-decrypt-message__header"},_.default.createElement("div",{className:"request-decrypt-message__header-background"}),_.default.createElement("div",{className:"request-decrypt-message__header__text"},this.context.t("wallet_dapp_conncetion_subtitle_decrypt_request")),_.default.createElement("div",{className:"request-decrypt-message__header__tip-container"},_.default.createElement("div",{className:"request-decrypt-message__header__tip"}))));l(this,"renderAccount",()=>{let{fromAccount:e}=this.state,{t}=this.context;return _.default.createElement("div",{className:"request-decrypt-message__account"},_.default.createElement("div",{className:"request-decrypt-message__account-text"},`${t("wallet_manage_wallet_top_account")}:`),_.default.createElement("div",{className:"request-decrypt-message__account-item"},_.default.createElement(ee,{account:e})))});l(this,"renderBalance",()=>{let{conversionRate:e}=this.props,{fromAccount:{balance:t}}=this.state,{t:s}=this.context,n=be(t,{fromNumericBase:"hex",toNumericBase:"dec",fromDenomination:"WEI",numberOfDecimals:6,conversionRate:e});return _.default.createElement("div",{className:"request-decrypt-message__balance"},_.default.createElement("div",{className:"request-decrypt-message__balance-text"},`${s("wallet_dapp_connection_subtitle_balance")}:`),_.default.createElement("div",{className:"request-decrypt-message__balance-value"},`${n} ETH`))});l(this,"renderRequestIcon",()=>_.default.createElement("div",{className:"request-decrypt-message__request-icon"}));l(this,"renderAccountInfo",()=>_.default.createElement("div",{className:"request-decrypt-message__account-info"},this.renderAccount(),this.renderRequestIcon(),this.renderBalance()));l(this,"renderBody",()=>{let{decryptMessageInline:e,domainMetadata:t,txData:s}=this.props,{t:n}=this.context,c=t[s.msgParams.origin],m=(c==null?void 0:c.hostname)||s.msgParams.origin,f=n("wallet_dapp_conncetion_notify_decrypt_message",{siteName:s.msgParams.origin}),{hasDecrypted:u,hasError:v,rawMessage:y,errorMessage:x,copyToClipboardPressed:A}=this.state;return _.default.createElement("div",{className:"request-decrypt-message__body"},this.renderAccountInfo(),_.default.createElement("div",{className:"request-decrypt-message__visual"},_.default.createElement("section",null,c!=null&&c.icon?_.default.createElement("img",{className:"request-decrypt-message__visual-identicon",src:c.icon,alt:""}):_.default.createElement("i",{className:"request-decrypt-message__visual-identicon--default"},m.charAt(0).toUpperCase()),_.default.createElement("div",{className:"request-decrypt-message__notice"},f))),_.default.createElement("div",{className:"request-decrypt-message__message"},_.default.createElement("div",{className:"request-decrypt-message__message-text"},!u&&!v?s.msgParams.data:y,v?x:""),_.default.createElement("div",{className:(0,it.default)({"request-decrypt-message__message-cover":!0,"request-decrypt-message__message-lock--pressed":u||v})}),_.default.createElement("div",{className:(0,it.default)({"request-decrypt-message__message-lock":!0,"request-decrypt-message__message-lock--pressed":u||v}),onClick:S=>{e(s,S).then(q=>{q.error?this.setState({hasError:!0,errorMessage:this.context.t("wallet_dapp_conncetion_errortip_decrypt_error",{errorMessage:q.error})}):this.setState({hasDecrypted:!0,rawMessage:q.rawData})}).catch(()=>{})}},_.default.createElement("img",{src:"/static/images/lock.svg",alt:""}),_.default.createElement("div",{className:"request-decrypt-message__message-lock-text"},n("wallet_dapp_conncetion_subtitle_decrypt_metamask_information")))),u?_.default.createElement("div",{className:(0,it.default)({"request-decrypt-message__message-copy":!0,"request-decrypt-message__message-copy--pressed":A}),onClick:()=>this.copyMessage(),onMouseDown:()=>this.setState({copyToClipboardPressed:!0}),onMouseUp:()=>this.setState({copyToClipboardPressed:!1})},_.default.createElement("div",{className:"request-decrypt-message__message-copy-text"},n("wallet_dapp_conncetion_subtitle_decrypt_copy"))):_.default.createElement("div",null))});l(this,"renderFooter",()=>{let{cancelDecryptMessage:e,clearConfirmTransaction:t,decryptMessage:s,history:n,mostRecentOverviewPage:c,txData:m}=this.props,{t:f}=this.context;return _.default.createElement("div",{className:"request-decrypt-message__footer"},_.default.createElement(h,{category:h.CATEGORY.fill,type:h.TYPE.gray,size:h.SIZE.md,className:"request-decrypt-message__footer__cancel-button",onClick:async u=>{this.removeBeforeUnload(),await e(m,u),t(),n.push(c)}},f("wallet_transfer_btn_cancel_transaction")),_.default.createElement(h,{category:h.CATEGORY.fill,type:h.TYPE.primary,size:h.SIZE.md,className:"request-decrypt-message__footer__sign-button",onClick:async u=>{this.removeBeforeUnload(),await s(m,u),t(),n.push(c)}},f("wallet_dapp_conncetion_subtitle_decrypt")))});l(this,"render",()=>_.default.createElement("div",{className:"request-decrypt-message__container"},this.renderHeader(),this.renderBody(),this.renderFooter()))}};ge.contextTypes={t:O.default.func.isRequired};ge.propTypes={fromAccount:O.default.shape({address:O.default.string.isRequired,balance:O.default.string,name:O.default.string}).isRequired,clearConfirmTransaction:O.default.func.isRequired,cancelDecryptMessage:O.default.func.isRequired,decryptMessage:O.default.func.isRequired,decryptMessageInline:O.default.func.isRequired,conversionRate:O.default.number.isRequired,history:O.default.object.isRequired,mostRecentOverviewPage:O.default.string.isRequired,txData:O.default.object.isRequired,domainMetadata:O.default.object.isRequired};function pr(r,o){let{unapproved:e}=o,{metamask:{domainMetadata:t={}}}=r,s=Pe(r),n=e;n||(n=s[0]);let{msgParams:{from:c}}=n,m=et(r,c);return{txData:n,domainMetadata:t,fromAccount:m,requester:null,requesterAddress:null,conversionRate:qe(r),mostRecentOverviewPage:ie(r)}}function lr(r){return{goHome:()=>r(Ie()),clearConfirmTransaction:()=>r(Q()),decryptMessage:(o,e)=>{let t=o.msgParams;return t.metamaskId=o.id,e.stopPropagation(e),r(_o(t))},cancelDecryptMessage:(o,e)=>(e.stopPropagation(e),r(ao(o))),decryptMessageInline:(o,e)=>{let t=o.msgParams;return t.metamaskId=o.id,e.stopPropagation(e),r(fo(t))}}}var Tt=re(ne,X(pr,lr))(ge);i();a();var E=p(M()),He=p(C());var oe=p(nr());i();a();i();a();i();a();var H=p(C()),K=p(M());i();a();i();a();var te=p(C()),xt=p(M()),Jo=p(we());var ae=class extends te.PureComponent{renderNode(o){return te.default.createElement("div",{className:"signature-request-message--node"},Object.entries(o).map(([e,t],s)=>te.default.createElement("div",{className:(0,Jo.default)("signature-request-message--node",{"signature-request-message--node-leaf":typeof t!="object"||t===null}),key:s},te.default.createElement("span",{className:"signature-request-message--node-label"},e,":"," "),typeof t=="object"&&t!==null?this.renderNode(t):te.default.createElement("span",{className:"signature-request-message--node-value"},`${t}`))))}render(){let{data:o}=this.props;return te.default.createElement("div",{className:"signature-request-message"},te.default.createElement("div",{className:"signature-request-message--root"},this.renderNode(o)))}};l(ae,"propTypes",{data:xt.default.object.isRequired}),l(ae,"contextTypes",{t:xt.default.func});i();a();i();a();var je=class extends H.PureComponent{constructor(){super(...arguments);l(this,"beforeUnload",e=>{let{clearConfirmTransaction:t,cancel:s}=this.props;t(),s(e)})}componentDidMount(){j()===U&&window.addEventListener("beforeunload",this.beforeUnload)}removeBeforeUnload(){j()===U&&window.removeEventListener("beforeunload",this.beforeUnload)}formatWallet(e){return`${e.slice(0,8)}...${e.slice(e.length-8,e.length)}`}render(){let{txData:{msgParams:{data:e}},cancel:t,sign:s,txData:n,history:c,clearConfirmTransaction:m,mostRecentOverviewPage:f,domainMetadata:u}=this.props,{message:v}=JSON.parse(e),y=n.msgParams.origin?u==null?void 0:u[n.msgParams.origin]:null,x={name:y==null?void 0:y.name,icon:y==null?void 0:y.icon,host:y==null?void 0:y.host};return H.default.createElement("div",{className:"page-container signature-request"},H.default.createElement(st,{header:H.default.createElement(Ee,{backable:!1,closeable:!1,title:this.context.t("wallet_dapp_conncetion_notify_signature_request")}),contentWrapClass:"ok-request-signature__content",content:H.default.createElement(H.default.Fragment,null,H.default.createElement(F,{className:"dapp-wrapper"},H.default.createElement(ue,{dappInfo:x})),H.default.createElement(ae,{data:v})),footer:H.default.createElement(rt,{cancelText:this.context.t("wallet_transfer_btn_cancel_transaction"),cancelProps:{onClick:async A=>{this.removeBeforeUnload(),await t(A),m(),c.push(f)}},confirmText:this.context.t("wallet_set_password_btn_confirm"),confirmProps:{onClick:async A=>{this.removeBeforeUnload(),await s(A),m(),c.push(f)}}})}))}};je.propTypes={txData:K.default.object.isRequired,fromAccount:K.default.shape({address:K.default.string.isRequired,balance:K.default.string,name:K.default.string}).isRequired,clearConfirmTransaction:K.default.func.isRequired,cancel:K.default.func.isRequired,sign:K.default.func.isRequired,domainMetadata:K.default.object.isRequired};je.contextTypes={t:K.default.func};var Qo=je;function dr(r){return{allAccounts:Re(r),domainMetadata:tt(r)}}function ur(r){return{clearConfirmTransaction:()=>r(Q())}}function fr(r,o,e){let{allAccounts:t,domainMetadata:s}=r,{signPersonalMessage:n,signTypedMessage:c,cancelPersonalMessage:m,cancelTypedMessage:f,signMessage:u,cancelMessage:v,txData:y}=e,{type:x,msgParams:{from:A}}=y,S=Qe(t,A),q,w;return x===I.PERSONAL_SIGN?(q=m,w=n):x===I.ETH_SIGN_TYPED_DATA?(q=f,w=c):x===I.ETH_SIGN&&(q=v,w=u),{...e,...o,fromAccount:S,domainMetadata:s,txData:y,cancel:q,sign:w}}var Nt=X(dr,ur,fr)(Qo);i();a();i();a();i();a();var g=p(C()),G=p(M()),Ro=p(ar());var es=p(Te());i();a();var Fe=class extends g.Component{constructor(){super(...arguments);l(this,"state",{fromAccount:this.props.fromAccount});l(this,"componentDidMount",()=>{j()===U&&window.addEventListener("beforeunload",this.beforeUnload)});l(this,"componentWillUnmount",()=>{this.removeBeforeUnload()});l(this,"beforeUnload",e=>{let{clearConfirmTransaction:t,cancel:s}=this.props;t(),s(e)});l(this,"removeBeforeUnload",()=>{j()===U&&window.removeEventListener("beforeunload",this.beforeUnload)});l(this,"renderHeader",()=>g.default.createElement("div",{className:"request-signature__header"},g.default.createElement("div",{className:"request-signature__header-background"}),g.default.createElement("div",{className:"request-signature__header__text"},this.context.t("wallet_dapp_conncetion_notify_signature_request")),g.default.createElement("div",{className:"request-signature__header__tip-container"},g.default.createElement("div",{className:"request-signature__header__tip"}))));l(this,"renderAccount",()=>{let{fromAccount:e}=this.state;return g.default.createElement("div",{className:"request-signature__account"},g.default.createElement("div",{className:"request-signature__account-text"},`${this.context.t("wallet_manage_wallet_top_account")}:`),g.default.createElement("div",{className:"request-signature__account-item"},g.default.createElement(ee,{account:e})))});l(this,"renderBalance",()=>{let{conversionRate:e}=this.props,{fromAccount:{balance:t}}=this.state,s=be(t,{fromNumericBase:"hex",toNumericBase:"dec",fromDenomination:"WEI",numberOfDecimals:6,conversionRate:e});return g.default.createElement("div",{className:"request-signature__balance"},g.default.createElement("div",{className:"request-signature__balance-text"},`${this.context.t("wallet_dapp_connection_subtitle_balance")}:`),g.default.createElement("div",{className:"request-signature__balance-value"},`${s} ETH`))});l(this,"renderRequestIcon",()=>g.default.createElement("div",{className:"request-signature__request-icon"}));l(this,"renderAccountInfo",()=>g.default.createElement("div",{className:"request-signature__account-info"},this.renderAccount(),this.renderRequestIcon(),this.renderBalance()));l(this,"renderOriginInfo",()=>{let{txData:e,domainMetadata:t}=this.props,{t:s}=this.context,n=e.msgParams.origin?t==null?void 0:t[e.msgParams.origin]:null;return g.default.createElement("div",{className:"request-signature__origin-row"},g.default.createElement("div",{className:"request-signature__origin-label"},`${s("origin")}:`),n!=null&&n.icon?g.default.createElement(Ko,{icon:n.icon,name:n.hostname,size:24}):null,g.default.createElement("div",{className:"request-signature__origin"},e.msgParams.origin))});l(this,"msgHexToText",e=>{try{let t=(0,Ro.stripHexPrefix)(e),s=d.Buffer.from(t,"hex");return s.length===32?e:s.toString("utf8")}catch{return e}});l(this,"handleCopy",e=>{(0,es.default)(e).then(()=>{W.success({title:this.context.t("wallet_backup_wallet_toast_private_key_copied"),duration:1.5,placement:W.DIRECTION.top})}).catch(()=>{})});l(this,"renderBody",()=>{let e,{txData:t}=this.props,{type:s,msgParams:{data:n}}=t;s===I.PERSONAL_SIGN?e=[{name:this.context.t("wallet_trade_subtitle_sign_data"),value:this.msgHexToText(n)}]:s===I.ETH_SIGN_TYPED_DATA?e=n:s===I.ETH_SIGN&&(e=[{name:this.context.t("wallet_trade_subtitle_sign_data"),value:n}]);let{t:c}=this.context,{domainMetadata:m}=this.props,f=t.msgParams.origin?m==null?void 0:m[t.msgParams.origin]:null,u={name:f==null?void 0:f.name,icon:f==null?void 0:f.icon,host:f==null?void 0:f.host};return g.default.createElement("div",{className:"request-signature__body"},g.default.createElement("div",{className:"dapp-wrapper"},s===I.ETH_SIGN&&g.default.createElement(ut,{className:"dapp-warn",type:ut.TYPE.warn,closable:!1,title:c("wallet_extension_eth_sign")}),g.default.createElement(F,null,g.default.createElement(ue,{dappInfo:u}))),g.default.createElement("div",{className:"request-signature__rows"},e.map(({name:v,value:y},x)=>(typeof y=="boolean"&&(y=y.toString()),g.default.createElement("div",{className:"request-signature__row",key:`request-signature-row-${x}`},g.default.createElement("div",{className:"request-signature__row-title"},`${v}:`),g.default.createElement(k,{title:c("wallet_receive_btn_copy_address"),type:k.TYPES.neutral},g.default.createElement("div",{className:"request-signature__row-value",onClick:()=>{this.handleCopy(y)}},y)))))))});l(this,"renderFooter",()=>{let{cancel:e,clearConfirmTransaction:t,history:s,mostRecentOverviewPage:n,sign:c}=this.props;return g.default.createElement(rt,{cancelText:this.context.t("wallet_transfer_btn_cancel_transaction"),cancelProps:{onClick:async m=>{this.removeBeforeUnload(),await e(m),t(),s.push(n)}},confirmText:this.context.t("wallet_set_password_btn_confirm"),confirmProps:{onClick:async m=>{this.removeBeforeUnload(),await c(m),t(),s.push(n)}}})});l(this,"render",()=>g.default.createElement("div",{className:"page-container request-signature__container"},g.default.createElement(st,{header:g.default.createElement(Ee,{backable:!1,closeable:!1,title:this.context.t("wallet_dapp_conncetion_notify_signature_request")}),contentWrapClass:"ok-request-signature__content",content:this.renderBody(),footer:this.renderFooter()})))}};Fe.contextTypes={t:G.default.func.isRequired};Fe.propTypes={fromAccount:G.default.shape({address:G.default.string.isRequired,balance:G.default.string,name:G.default.string}).isRequired,cancel:G.default.func.isRequired,clearConfirmTransaction:G.default.func.isRequired,conversionRate:G.default.number.isRequired,history:G.default.object.isRequired,mostRecentOverviewPage:G.default.string.isRequired,sign:G.default.func.isRequired,txData:G.default.object.isRequired,domainMetadata:G.default.object.isRequired};var ts=Fe;function _r(r){return{requester:null,requesterAddress:null,conversionRate:qe(r),mostRecentOverviewPage:ie(r),allAccounts:Re(r),domainMetadata:tt(r)}}function gr(r){return{goHome:()=>r(Ie()),clearConfirmTransaction:()=>r(Q())}}function vr(r,o,e){let{signPersonalMessage:t,signTypedMessage:s,cancelPersonalMessage:n,cancelTypedMessage:c,signMessage:m,cancelMessage:f,txData:u}=e,{allAccounts:v,...y}=r,{type:x,msgParams:{from:A}}=u,S=Qe(v,A),q,w;return x===I.PERSONAL_SIGN?(q=n,w=t):x===I.ETH_SIGN_TYPED_DATA?(q=c,w=s):x===I.ETH_SIGN&&(q=f,w=m),{...e,...y,...o,fromAccount:S,txData:u,cancel:q,sign:w}}var bt=re(ne,X(_r,gr,vr))(ts);function yr(r,o){var u;let{unapproved:e}=o,{metamask:t,appState:s}=r,{unapprovedMsgCount:n,unapprovedPersonalMsgCount:c,unapprovedTypedMessagesCount:m}=t,{txId:f}=s;return{unapproved:e,identities:r.metamask.identities,mostRecentOverviewPage:ie(r),unapprovedTxs:r.metamask.unapprovedTxs,unapprovedMsgs:r.metamask.unapprovedMsgs,unapprovedPersonalMsgs:r.metamask.unapprovedPersonalMsgs,unapprovedTypedMessages:r.metamask.unapprovedTypedMessages,index:f,warning:r.appState.warning,network:r.metamask.network,chainId:r.metamask.provider.chainId,currentCurrency:(u=r.metamask.selectedCurrency)==null?void 0:u.isoCode,blockGasLimit:r.metamask.currentBlockGasLimit,unapprovedMsgCount:n,unapprovedPersonalMsgCount:c,unapprovedTypedMessagesCount:m,send:r.metamask.send,currentNetworkTxList:r.metamask.currentNetworkTxList}}var Ye=class extends He.Component{getUnapprovedMessagesTotal(){let{unapprovedMsgCount:o=0,unapprovedPersonalMsgCount:e=0,unapprovedTypedMessagesCount:t=0}=this.props;return t+o+e}getTxData(){let{unapproved:o}=this.props;if(o)return o;let{network:e,index:t,unapprovedTxs:s,unapprovedMsgs:n,unapprovedPersonalMsgs:c,unapprovedTypedMessages:m,match:{params:{id:f}={}},chainId:u}=this.props,v=Le(s,n,c,m,e,u);return oe.default.info(`rendering a combined ${v.length} unconf msgs & txs`),f?v.find(({id:y})=>`${y}`===f):v[t]}signatureSelect(o,e){return o===I.ETH_SIGN_TYPED_DATA&&(e==="V3"||e==="V4")?Nt:bt}signMessage(o,e){oe.default.info("conf-tx.js: signing message");let t=o.msgParams;return t.metamaskId=o.id,this.stopPropagation(e),this.props.dispatch(lo(t))}stopPropagation(o){o.stopPropagation&&o.stopPropagation()}signPersonalMessage(o,e){oe.default.info("conf-tx.js: signing personal message");let t=o.msgParams;return t.metamaskId=o.id,this.stopPropagation(e),this.props.dispatch(uo(t))}signTypedMessage(o,e){oe.default.info("conf-tx.js: signing typed message");let t=o.msgParams;return t.metamaskId=o.id,this.stopPropagation(e),this.props.dispatch(vo(t))}cancelMessage(o,e){return oe.default.info("canceling message"),this.stopPropagation(e),this.props.dispatch(no(o))}cancelPersonalMessage(o,e){return oe.default.info("canceling personal message"),this.stopPropagation(e),this.props.dispatch(io(o))}cancelTypedMessage(o,e){return oe.default.info("canceling typed message"),this.stopPropagation(e),this.props.dispatch(mo(o))}componentDidMount(){let{unapprovedTxs:o={},history:e,mostRecentOverviewPage:t,network:s,chainId:n,send:c}=this.props;Le(o,{},{},{},s,n).length===0&&!c.to&&this.getUnapprovedMessagesTotal()===0&&e.push(t)}componentDidUpdate(o){let{unapprovedTxs:e={},network:t,chainId:s,currentNetworkTxList:n,send:c,history:m,match:{params:{id:f}={}},mostRecentOverviewPage:u}=this.props,v;if(f)v=n.find(({id:x})=>`${x}`===f);else{let{index:x,unapprovedTxs:A}=o,q=Le(A,{},{},{},t,s)[x]||{};v=n.find(({id:w})=>w===q.id)||{}}let y=Le(e,{},{},{},t,s);if(v&&v.status===Zt.DROPPED){this.props.dispatch(oo({name:"TRANSACTION_CONFIRMED",onSubmit:()=>m.push(u)}));return}y.length===0&&!c.to&&this.getUnapprovedMessagesTotal()===0&&this.props.history.push(u)}render(){let{currentCurrency:o,blockGasLimit:e}=this.props,t=this.getTxData()||{},{msgParams:s,type:n,msgParams:{version:c}}=t;if(oe.default.debug("msgParams detected, rendering pending msg"),!s)return He.default.createElement(ho,null);let m=this.signatureSelect(n,c);return He.default.createElement(m,{txData:t,key:t.id,identities:this.props.identities,currentCurrency:o,blockGasLimit:e,signMessage:this.signMessage.bind(this,t),signPersonalMessage:this.signPersonalMessage.bind(this,t),signTypedMessage:this.signTypedMessage.bind(this,t),cancelMessage:this.cancelMessage.bind(this,t),cancelPersonalMessage:this.cancelPersonalMessage.bind(this,t),cancelTypedMessage:this.cancelTypedMessage.bind(this,t)})}};Ye.propTypes={mostRecentOverviewPage:E.default.string.isRequired,unapprovedMsgCount:E.default.number,unapprovedPersonalMsgCount:E.default.number,unapprovedTypedMessagesCount:E.default.number,network:E.default.string.isRequired,chainId:E.default.string.isRequired,index:E.default.number.isRequired,unapprovedTxs:E.default.object.isRequired,match:E.default.shape({params:E.default.shape({id:E.default.string})}).isRequired,currentNetworkTxList:E.default.array.isRequired,currentCurrency:E.default.string.isRequired,blockGasLimit:E.default.number,history:E.default.object.isRequired,identities:E.default.object.isRequired,dispatch:E.default.func.isRequired,send:E.default.shape({to:E.default.string}).isRequired};Ye.defaultProps={unapprovedMsgCount:0,unapprovedPersonalMsgCount:0,unapprovedTypedMessagesCount:0,blockGasLimit:0};var os=re(ne,X(yr))(Ye);i();a();var bs=p(we());var P=p(C());i();a();var Me=p(C()),hr=()=>Me.default.createElement("div",{className:"okx-wallet-loader"},Me.default.createElement("img",{className:"okx-wallet-loader__logo",src:"./static/images/logo.svg",alt:""}),Me.default.createElement("div",{className:"okx-wallet-loader__spinner"})),ss=(0,Me.memo)(hr);var mt=p(ir());i();a();var se=p(C()),rs=p(we()),ns=p(Te()),is=p(M());i();a();var De="data-field",Pt=({value:r})=>{let o=b(),[e,{toggle:t}]=We(!0);return r?se.default.createElement("div",{className:De},se.default.createElement("div",{className:`${De}__main`},se.default.createElement("div",{className:`${De}__main-title`},o("wallet_dapp_connection_subtitle_data_label")),se.default.createElement("div",{className:`${De}__main-data`},se.default.createElement("img",{alt:"arrow",onClick:t,src:"/static/images/up-arrow.svg",className:(0,rs.default)(`${De}__main-data-arrow`,{fold:e})}))),!e&&se.default.createElement("div",{className:`${De}__data`},se.default.createElement(k,{title:o("wallet_receive_btn_copy_address"),type:k.TYPES.neutral,trigger:k.TRIGGER_TYPES.hover},se.default.createElement("span",{onClick:()=>{(0,ns.default)(r),W.success({title:o("wallet_backup_wallet_toast_private_key_copied"),duration:1.5,placement:W.DIRECTION.top})}},r)))):null};Pt.propTypes={value:is.default.string};Pt.defaultProps={value:""};var as=Pt;i();a();var R=p(C()),cs=p(M());i();a();var at="total-coast",ms=r=>{let o=b(),{transactionTotalDisplay:e}=r;return R.default.createElement("div",{className:at},R.default.createElement(L,{maxWidth:"170px",className:`${at}__title`,text:R.default.createElement(R.default.Fragment,null,o("extension_contract_interaction_maintitle_total_cost"),R.default.createElement(k,{title:o("extension_infor_tooltip_asset_changestips"),trigger:k.TRIGGER_TYPES.hover},R.default.createElement(B,{className:"okx-wallet-plugin-information-circle",style:{color:"#929292",fontSize:"16px",cursor:"pointer",marginLeft:"4px"}})))}),R.default.createElement("div",{className:`${at}__data`},R.default.createElement("div",{className:`${at}__data-value`},R.default.createElement(L,{text:e}))))};ms.propTypes={transactionTotalDisplay:cs.default.string.isRequired};var ps=ms;i();a();var Oe=p(C()),$e=p(M());i();a();var ze="approved-amount",qt=r=>{let o=b(),e=Ne(),{authorizedAmount:t,isOffline:s,amountDecimal:n,id:c,tokenSymbol:m}=r;return Oe.default.createElement("div",{className:ze,onClick:()=>{s||(e.push(`${Qt}/${c}`),zt())}},Oe.default.createElement(L,{maxWidth:"170px",className:`${ze}__title`,text:`${o("wallet_contract_interaction_approval_permission_authorized_amount")}`}),Oe.default.createElement("div",{className:`${ze}__data`},Oe.default.createElement("div",{className:`${ze}__data-value`,style:{color:"#f16514"}},t>=10**13?o("wallet_dapp_connection_subtitle_approval_amount_unlimitied"):`${Ft(t,s&&n?n:2)} ${m}`),!s&&Oe.default.createElement("img",{alt:"",src:"/static/images/dapp-arrow-right.svg",className:`${ze}-arrow`})))};qt.propTypes={id:$e.default.number,tokenSymbol:$e.default.string.isRequired,authorizedAmount:$e.default.string.isRequired,amountDecimal:$e.default.number,isOffline:$e.default.bool};qt.defaultProps={isOffline:!1,amountDecimal:2,id:""};var ls=qt;i();a();var $=p(C());i();a();var V=p(C());var ds=p(Te()),Ge=p(M());i();a();var ce="approve-nft",us=({analyzedResult:r,title:o})=>{let e=b(),{image:t,projectName:s,projectAddress:n}=r;return V.default.createElement("div",{className:ce},V.default.createElement("div",{className:`${ce}__title`},o),V.default.createElement("div",{className:`${ce}__content`},V.default.createElement(Gt,{className:`${ce}__content-icon`,src:t||eo}),V.default.createElement("div",{className:`${ce}__content-info`},V.default.createElement("div",null,V.default.createElement(L,{maxWidth:"256px",className:`${ce}__content-info-symbol`,text:s})),V.default.createElement("div",{className:`${ce}__content-info-address`},e("extension_confirmation_maintitle_contract"),J(n),V.default.createElement(k,{title:e("wallet_extension_top_copy_address")},V.default.createElement(B,{className:`${ce}__content-info-copy okx-wallet-plugin-copy`,onClick:()=>{(0,ds.default)(n),W.success({title:e("extension_toast_title_contractadd_copied"),desc:n,containerClassName:"address-copy-notification"})}}))))))};us.propTypes={analyzedResult:Ge.default.shape({projectName:Ge.default.string,image:Ge.default.string,projectAddress:Ge.default.string}).isRequired,title:Ge.default.string.isRequired};var fs=us;i();a();var Z=p(C());var _s=p(Te()),Be=p(M());i();a();var me="approve-token",gs=({approveTokenInfo:r,title:o})=>{let e=b(),{symbol:t,image:s,projectAddress:n}=r;return Z.default.createElement("div",{className:me},Z.default.createElement("div",{className:`${me}__title`},o),Z.default.createElement("div",{className:`${me}__content`},Z.default.createElement("img",{className:`${me}__content-icon`,alt:"",src:s}),Z.default.createElement("div",{className:`${me}__content-info`},Z.default.createElement("div",null,Z.default.createElement(L,{maxWidth:"256px",className:`${me}__content-info-symbol`,text:t})),Z.default.createElement("div",{className:`${me}__content-info-address`},e("extension_confirmation_maintitle_contract"),J(n),Z.default.createElement(k,{title:e("wallet_extension_top_copy_address")},Z.default.createElement(B,{className:`${me}__content-info-copy okx-wallet-plugin-copy`,onClick:()=>{(0,_s.default)(n),W.success({title:e("extension_toast_title_contractadd_copied"),desc:n,containerClassName:"address-copy-notification"})}}))))))};gs.propTypes={approveTokenInfo:Be.default.shape({image:Be.default.string,projectAddress:Be.default.string,symbol:Be.default.string}).isRequired,title:Be.default.string.isRequired};var vs=gs;i();a();var pe=p(C()),ys=p(we()),Ve=p(M());i();a();var Ke="asset-decrease",Ct=r=>{let o=b(),{isSufficientBalance:e,ethTransactionAmount:t,baseCoinSymbol:s,baseCoinIcon:n}=r;return pe.default.createElement("div",{className:(0,ys.default)(Ke,{"balance-danger":!e})},pe.default.createElement("div",{className:`${Ke}__title`},o("extension_contract_interaction_maintitle_asset_changes"),pe.default.createElement(k,{title:o("extension_infor_tooltip_asset_changestips"),trigger:k.TRIGGER_TYPES.hover},pe.default.createElement(B,{className:"okx-wallet-plugin-information-circle"}))),pe.default.createElement("div",{className:`${Ke}__content`},pe.default.createElement("img",{alt:"icon",className:`${Ke}__content-icon`,src:n}),pe.default.createElement(L,{maxWidth:"256px",className:`${Ke}__content-info`,text:`- ${t} ${s}`})))};Ct.propTypes={isSufficientBalance:Ve.default.bool,ethTransactionAmount:Ve.default.string.isRequired,baseCoinSymbol:Ve.default.string.isRequired,baseCoinIcon:Ve.default.string.isRequired};Ct.defaultProps={isSufficientBalance:!0};var hs=Ct;i();a();var Y=p(C());var Ts=p(Te()),ve=p(M());i();a();var le="project-info",It=r=>{let o=b(),{dappInfo:e,to:t,desc:s,title:n}=r;return Y.default.createElement("div",{className:le},Y.default.createElement("div",{className:`${le}__title`},n),Y.default.createElement("div",{className:`${le}__content`},Y.default.createElement("img",{alt:"",className:`${le}__content-icon`,src:e.icon}),Y.default.createElement("div",{className:`${le}__content-info`},Y.default.createElement("div",null,Y.default.createElement(L,{className:`${le}__content-info-symbol`,maxWidth:"256px",text:e.name})),Y.default.createElement("div",{className:`${le}__content-info-address`},o("extension_confirmation_maintitle_contract"),J(t),Y.default.createElement(k,{title:o("wallet_extension_top_copy_address")},Y.default.createElement(B,{className:`${le}__content-info-copy okx-wallet-plugin-copy`,onClick:()=>{(0,Ts.default)(t),W.success({title:o("extension_toast_title_contractadd_copied"),desc:t,containerClassName:"address-copy-notification"})}}))))),!!s&&Y.default.createElement(gt,{type:gt.TYPE.warn,title:s}))};It.propTypes={dappInfo:ve.default.shape({icon:ve.default.string,name:ve.default.string.isRequired}).isRequired,to:ve.default.string.isRequired,title:ve.default.string.isRequired,desc:ve.default.string};It.defaultProps={desc:""};var wt=It;i();a();var ye="smart-header",Tr=r=>{let o=b(),{dappInfo:e,assetInfo:t,approveTokenInfo:s,txTypeUtil:n,analyzedResult:c,safeAddressData:m,to:f}=r,{hasBaseCoinChange:u}=t,{isTokenTx:v,isNftTx:y,isApproveTx:x}=n;if(y()){let S=o("extension_revoke_approval_maintitle_revoke_approval"),q=o("wallet_extension_popup_text_project"),w=o("extension_revoke_approval_alert_evoke_authorization",{contract:e.name,asset:c.projectName});return x()&&(S=o("extension_approve_maintitle_approve"),w=o("extension_approve_alert_authorized_tips",{contract:e.name,asset:c.projectName})),$.default.createElement(F,{className:ye},$.default.createElement(fs,{title:S,analyzedResult:c,approveTokenInfo:s,txTypeUtil:n}),$.default.createElement("div",{className:`${ye}-line`}),$.default.createElement(wt,{to:f,title:q,dappInfo:e,desc:w}))}if(v()){let S=o("extension_revoke_approval_maintitle_revoke_approval"),q=o("wallet_extension_popup_text_project"),w=o("extension_revoke_approval_alert_evoke_authorization",{contract:e.name,asset:(s==null?void 0:s.symbol)||J(s.tokenAddress)});return x()&&(S=o("extension_approve_maintitle_approve"),w=o("extension_approve_alert_authorized_tips",{contract:e.name,asset:(s==null?void 0:s.symbol)||J(s.tokenAddress)})),$.default.createElement(F,{className:ye},$.default.createElement(vs,{approveTokenInfo:s,title:S}),$.default.createElement("div",{className:`${ye}-line`}),$.default.createElement(wt,{to:f,desc:w,title:q,dappInfo:e}))}if(u)return $.default.createElement(F,{className:ye},$.default.createElement(hs,{...t}),$.default.createElement("div",{className:`${ye}-line`}),$.default.createElement(ue,{dappInfo:e}));let A="";return(m==null?void 0:m.approveType)===Je.INCREASE_ALLOWANCE&&(A=o("wallet_extension_contract_interaction_transactiontips",{address:J(m==null?void 0:m.approveAddress)})),$.default.createElement(F,{className:ye},$.default.createElement(ue,{dappInfo:e,desc:A}))},xs=Tr;i();a();var ct=p(C());i();a();var xr="footer-btns",Nr=({isSubmitting:r,handleCancel:o,safeAddressData:e,AuthApproveType:t,customGasInfo:s,isOffline:n,handleSubmit:c,isSufficientGas:m,isSufficientBalance:f})=>{let u=b(),v=!m||!f||_t(s);return ct.default.createElement("footer",{className:`${xr}`},ct.default.createElement(h,{className:"ok-confirm-transaction-button",category:h.CATEGORY.outline,type:h.TYPE.secondary,size:h.SIZE.md,block:!0,onClick:()=>{o(),((e==null?void 0:e.approveType)===t.SET_APPROVE_FOR_ALL||(e==null?void 0:e.approveType)===t.INCREASE_ALLOWANCE)&&Yt()}},u("wallet_dapp_connection_btn_reject")),ct.default.createElement(h,{loading:r,block:!0,className:"ok-confirm-transaction-button",category:h.CATEGORY.fill,type:h.TYPE.highlight,size:h.SIZE.md,disabled:n?_t(s):v,onClick:()=>{c()}},u("wallet_set_password_btn_confirm")))},Ns=Nr;i();a();var Et="common-contract",br=r=>{let{unapproved:o}=r,e=b(),{id:t,isOffline:s,txParams:n={},extParams:c={}}=o,{to:m,data:f,from:u,value:v}=n,{amountDecimal:y}=c,x=Do(),{coinId:A,symbol:S,chainName:q,image:w}=x,Is=Mo(o),ws=Ne(),Es=Ao(o),pt=Xe();Bo(o);let ks=Oo().type,{analyseLoading:As,analyzedResult:kt}=Wo(o),lt=Go(kt,o),Ue=So(o),{nonce:At,grayAddress:Ss,safeAddressData:St}=jo({tx:o,approveTokenInfo:Ue,coinId:A}),Ms=$o(o),[Ds,{setTrue:Os,setFalse:$s}]=We(!1),{run:Gs}=To(de=>{pt(bo.setCustomGasInfo({gasTxId:t,gasInfo:de}))},{wait:30}),{gasCoinDisplay:Bs,gasFeeCurrencyDisplay:Us,supportEip1559:Ls,customMaxFeePerGas:Ws,customGasPrice:js,customGasLimit:Fs,gasLimitInfo:Mt,ethTransactionAmount:Hs,hasBaseCoinChange:Ys,isSufficientGas:Ze,isSufficientBalance:dt,isGasLimitLoading:zs,transactionTotalDisplay:Ks,customMaxPriorityFeePerGas:Vs}=Uo(o),[Zs,Dt]=(0,P.useState)(!1),Xs=xe(de=>xo(de,t)||{}),Js={value:q||ks,icon:w},[Ot,{setTrue:Qs,setFalse:Rs}]=We(!1),er=de=>{let N=(0,mt.cloneDeep)(de);return Ls?(N==null||delete N.txParams.gasPrice,N.txParams.maxFeePerGas=Ce(Ws),N.txParams.maxPriorityFeePerGas=Ce(Vs),N.txParams.type=Kt.FEE_MARKET):(N==null||delete N.txParams.maxFeePerGas,N==null||delete N.txParams.maxPriorityFeePerGas,N==null||delete N.txParams.type,N.txParams.gasPrice=Ce(js)),N.txParams.gas=Ce(Fs),At&&(N.txParams.nonce=Ce(At)),N.gasLimitInfo=Mt||{},N},tr=()=>{Qs(),pt(ro(er(o),!0)).then(de=>{let{serverTxId:N}=de||{};Ht({tx_id:N}),Rs()}).catch(mt.noop)},$t=async()=>{so(""),await pt(po({id:t})),Q(),ws.push(ot)},or=Fo({grayAddress:Ss,isSufficientBalance:dt,isSufficientGas:Ze,setSupplyGasVisible:Dt,baseCoinSymbol:S,gasLimitInfo:Mt,handleCancel:$t,isOffline:s}),sr=Lo(lt,o),rr={isSubmitting:Ot,handleCancel:$t,safeAddressData:St,AuthApproveType:Je,customGasInfo:Xs,isOffline:s,handleSubmit:tr,isSufficientGas:Ze,isSufficientBalance:dt};return As?P.default.createElement(ss,null):P.default.createElement("div",{className:(0,bs.default)(Et,{isSubmitting:Ot})},P.default.createElement(Ee,{title:e(sr),closeable:!1,backable:!1,className:`${Et}__header`}),P.default.createElement("main",{className:`${Et}__main`},or(),P.default.createElement(xs,{to:m,dappInfo:Is,approveTokenInfo:Ue,txTypeUtil:lt,analyzedResult:kt,safeAddressData:St,assetInfo:{isSufficientBalance:dt,ethTransactionAmount:Hs,hasBaseCoinChange:Ys,baseCoinSymbol:S,baseCoinIcon:w}}),P.default.createElement(F,null,P.default.createElement(ko,{loading:zs,onClick:Os,gasCoinDisplay:Bs,gasFeeCurrencyDisplay:Us,isSufficientGas:Ze,isOffline:s})),P.default.createElement(F,null,P.default.createElement(Io,{walletFieldData:Es}),!!m&&P.default.createElement(wo,{value:m}),lt.isApproveTokenTx()&&P.default.createElement(ls,{id:t,isOffline:s,authorizedAmount:Ue.authorizedAmount,amountDecimal:y,tokenSymbol:Ue.symbol}),P.default.createElement(Eo,{...Js}),!Ue.isApprove&&P.default.createElement(ps,{transactionTotalDisplay:Ks}),P.default.createElement(as,{value:f}))),P.default.createElement(Ns,{...rr}),P.default.createElement(Co,{visible:Ds,coinId:A,address:u,inputData:f,tokenAddress:m,value:to(v),onBack:$s,onClose:null,onGasChange:Gs,initialGasData:Ms}),P.default.createElement(qo,{visible:Zs,closeCallback:()=>Dt(!1),coinId:A,txId:t,receiveOnly:Ze}))},Ps=(0,P.memo)(br);var qs=({unapproved:r})=>{let o=Xe();switch((0,he.useEffect)(()=>{var e;if(r!=null&&r.id){let{type:t,id:s}=r;Xt(t)&&yo((e=r==null?void 0:r.txParams)==null?void 0:e.to),o(Po(s))}},[r,o]),r.type){case I.ETH_GET_ENCRYPTION_PUBLIC_KEY:return he.default.createElement(ht,{unapproved:r});case I.ETH_DECRYPT:return he.default.createElement(Tt,{unapproved:r});case I.ETH_SIGN:case I.PERSONAL_SIGN:case I.ETH_SIGN_TYPED_DATA:return he.default.createElement(os,{unapproved:r});default:return he.default.createElement(Ps,{unapproved:r})}};i();a();var Pr=()=>{let o=xe(Pe).map(t=>({...t,localType:ft}));return[...xe(Jt),...o].sort((t,s)=>s.time-t.time)},qr={[Bt]:Ho,[ft]:qs,[Lt]:Yo,[Ut]:zo,[Wt]:vt,[jt]:vt},Cs="dapp-entry",Cr=()=>{let r=Ne(),o=Pr(),e=o.length,t=xe(No);(0,z.useEffect)(()=>{e===0&&!t&&r.push(ot)},[e,r]);let[s,n]=(0,z.useState)(0),c=o[s];(0,z.useEffect)(()=>{n(0)},[e]);let m=(0,z.useCallback)(u=>{let v=s+u;o[v]&&n(v)},[s,o]),f=()=>{if(!c)return null;let{localType:u}=c,v=qr[u];return v?z.default.createElement(v,{unapproved:c,key:c.id,unapprovedRequestsCount:e}):null};return e===0?null:z.default.createElement("div",{className:Cs},z.default.createElement(Zo,{unapprovedRequestsCount:e,editIdx:s,handleChangeTx:m}),z.default.createElement("div",{className:`${Cs}-content`},f()))},al=Cr;export{ht as a,Tt as b,os as c,ss as d,Ps as e,Pr as f,al as g};

window.inOKXExtension = true;
window.ASSETS_BUILD_TYPE = "publish";

