import{a as le}from"./chunk-FMH5IOJD.js";import{a as ae}from"./chunk-XRONFNCJ.js";import"./chunk-EA42FJLL.js";import"./chunk-WF3X5RMC.js";import{a as N}from"./chunk-4PTE5JIT.js";import{a as se,b as oe}from"./chunk-CYZJ2MTU.js";import"./chunk-FJ7GWYCT.js";import{a as ne}from"./chunk-FQDBFLDR.js";import"./chunk-TXMRZH72.js";import{c as re,d as ie}from"./chunk-PBP4MB33.js";import{k as y}from"./chunk-CKFSIZPF.js";import"./chunk-PFUOJJI2.js";import{c as h}from"./chunk-P4R64FMZ.js";import{a as Z}from"./chunk-6TY3WXUG.js";import{i as Y}from"./chunk-BZBZNG4R.js";import{b as $,c as ee,f as te}from"./chunk-3TZVDMZB.js";import{Qa as K,Sa as J,i as P,p as G}from"./chunk-SBW523XW.js";import{c as V,d as z}from"./chunk-NEW56Z2U.js";import{d as Q}from"./chunk-HX34N4W4.js";import"./chunk-F7QJ6WQ5.js";import"./chunk-TNVBYBO5.js";import{qa as X}from"./chunk-KRRNVCWZ.js";import{Cj as v,Dj as D,Ej as q,Oh as H,Ph as U,Qa as w,Za as R,_g as x,ce as L,ch as _,e as A,ee as S,ek as B,fe as T,g as l,i as c,ja as E,k as m,ke as O,mk as j,oa as pe,pa as C,qi as M,uh as F}from"./chunk-YC2Z7II3.js";c();m();var W=A(E());c();m();c();m();var d=A(E()),r=A(pe());c();m();c();m();var u=A(E());var de=[{name:"wallet_manage_filter_btn_add_wallet",iconName:"okx-wallet-plugin-plus",actionRoute:q},{name:"wallet_manage_filter_btn_edit_wallet",iconName:"okx-wallet-plugin-edit-wallet",actionRoute:v}];function k({markedEditWallet:n,showBackUpWallets:s}){let e=X(),t=O(),[a,o]=(0,u.useState)(!1),p=async g=>{n&&await n(),t.push(g),o(!1)},i=de;return s&&(i=[...de,{name:"wallet_manage_filter_btn_backup_wallet",iconName:"okx-wallet-plugin-security",actionRoute:D}]),u.default.createElement("div",{className:"dropdown-manage__container"},u.default.createElement("div",{className:"dropdown-manage__main-text-button",onClick:()=>o(!0)},e("wallet_manage_btn_manage")),u.default.createElement(se,{isOpen:a,onClickOutside:()=>o(!1),innerStyle:{position:"absolute",top:"12px",right:"-3px",minWidth:"148px",padding:"8px 0",zIndex:55,background:"#FFFFFF",whiteSpace:"nowrap"},style:{position:"absolute",right:0}},i.map((g,ue)=>u.default.createElement(oe,{key:ue,closeMenu:()=>o(!1),onClick:()=>{p(g.actionRoute)},style:{color:"#000000",backgroundColor:"#FFFFFF",padding:"8px 32px 8px 16px"}},u.default.createElement("style",null,`
                  li.dropdown-menu-item:hover {
                    background-color: rgba(0, 0, 0, 0.04) !important;
                  }
                  li.dropdown-menu-item:active {
                    background-color: rgba(0, 0, 0, 0.08) !important;
                  }
                `),u.default.createElement(C,{className:g.iconName,style:{fontSize:"18px"}}),u.default.createElement("span",{className:"dropdown-manage__item-text"},e(g.name))))))}var ce=null,b=null,f=class extends d.PureComponent{constructor(){super(...arguments);l(this,"state",{createdId:"",walletIdentitiesLength:0});l(this,"getAccount",async()=>{ae()});l(this,"handlePrevPage",async()=>{let{history:e}=this.props,{from:t}=N(e.location.search.slice(1));t==="seedVerify"?e.replace(M):e.goBack()});l(this,"handlerClickSelectWallet",async e=>{let{setSelectedWallet:t,selectedWallet:a,history:o}=this.props;if(e!==a)try{await t(e),R().getChainFromServer(),o.push(M)}catch{}});l(this,"handleClickAddAccount",async e=>{let{t}=this.context,{addNewWallet:a}=this.props;try{let o=await a(e);this.setState({createdId:o.walletId},()=>{setTimeout(()=>{this.setState({createdId:""})},3e3)}),w.success({title:t("wallet_addacount_toast_account_created")}),await this.getAccount()}catch(o){o.message===V&&w.error(t("wallet_home_toast_network_error")),o.message===z&&w.error(t("extension_wallet_addwallet_toast_wallets_added",{amount:100}))}});l(this,"markedEditWallet",async()=>{let{keyringIdentities:e,setEditKeyringIdentities:t,setMarkedEditWallet:a}=this.props;await a(!0),await t(JSON.parse(JSON.stringify(e)))});l(this,"renderManageOptions",()=>{let{showBackUpWallets:e}=this.props;return d.default.createElement(k,{markedEditWallet:this.markedEditWallet,showBackUpWallets:e})});l(this,"setHiddenAssets",async()=>{let{isHiddenAssets:e,setHiddenAssets:t}=this.props;await t(!e)});l(this,"renderTotalAmount",()=>{let{t:e}=this.context,{amountObj:t}=this.props,{isHiddenAssets:a}=this.props,o=a?"*****":(t==null?void 0:t.amount)||"--";return d.default.createElement("div",{className:"wallet-management-page__amount"},d.default.createElement("div",{className:"wallet-management-page__amount-text"},e("wallet_manage_wallet_subtitle_total_assests")),d.default.createElement(Q.AdaptiveText,{autoSize:!0,ellipsis:{tooltip:d.default.createElement("span",{style:{wordBreak:"break-all"}},o)},className:"wallet-management-page__amount-number",text:o,onClick:this.setHiddenAssets}))});l(this,"updateSessionAccountStatusInfo",(e,t)=>{let{sessionAccountStatusInfo:a={}}=this.props,{updateSessionAccountStatusInfo:o}=this.props,p=JSON.parse(JSON.stringify(a));p[e]=t,o(p)});l(this,"getSessionStatuById",e=>{let{sessionAccountStatusInfo:t={}}=this.props;return Object.keys(t).includes(e)?t[e]:"notsession"});l(this,"renderListCard",()=>{let{createdId:e}=this.state,{amountObj:t}=this.props,{selectedWallet:a,keyringIdentities:o,isHiddenAssets:p}=this.props;return d.default.createElement("div",{className:"wallet-management-page__list-wrapper animate__slideInUp"},o.map(i=>d.default.createElement(le,{key:i.keyringId,createdId:e,amountObj:t,isHiddenAssets:p?"***":"",walletName:i.keyringName,walletColor:i.keyringColor,needBackup:Boolean(i.walletIdentities[0].backupData.length),needAddButton:i.keyringIdentityType===_.MNEMONIC,needHardwareTip:i.keyringIdentityType===_.HARDWARE,handleClickAddAccount:this.handleClickAddAccount,selectedWallet:a,verifySeedWalletId:i.walletIdentities[0].walletId,handlerSelectWallet:this.handlerClickSelectWallet,data:i,dataList:i.walletIdentities||[],needCheckStatus:!0,sessionAccountStatus:this.getSessionStatuById(i.keyringId),updateSessionAccountStatusInfo:this.updateSessionAccountStatusInfo})))})}async componentDidMount(){let{clearAccounts:e}=this.props;await e(),await this.getAccount(),b=setInterval(()=>{this.getAccount()},1e3*60*3)}static getDerivedStateFromProps(e,t){var a,o;return((a=e==null?void 0:e.walletIdentities)==null?void 0:a.length)!==(t==null?void 0:t.walletIdentitiesLength)?{walletIdentitiesLength:(o=e==null?void 0:e.walletIdentities)==null?void 0:o.length}:null}componentDidUpdate(e){let{selectedWallet:t}=this.props,{selectedWallet:a}=e;a!==t&&this.props.setNftFilterInfo({filterInfo:{collectionFilter:[],chainListFilter:[],saleStatusFilter:[]}})}componentWillUnmount(){clearTimeout(ce),clearTimeout(b),ce=null,b=null}render(){let{history:e}=this.props,{fromHome:t}=N(e.location.search.slice(1));return d.default.createElement(ne,{closeable:{children:this.renderManageOptions()},backable:{icon:t==="1"?"okds-close":"okds-arrow-chevron-left-centered-md"},themeTypeClass:"darkThemeWrapper",onBack:()=>this.handlePrevPage(),bordered:!1},d.default.createElement("div",{className:"wallet-management__container scroller-container wallet-management-home-page",id:"wallet-manage-list"},this.renderTotalAmount(),this.renderListCard()))}};f.propTypes={keyringIdentities:r.default.array.isRequired,addNewWallet:r.default.func.isRequired,selectedWallet:r.default.string.isRequired,history:r.default.object.isRequired,setSelectedWallet:r.default.func.isRequired,clearAccounts:r.default.func.isRequired,amountObj:r.default.object.isRequired,setMarkedEditWallet:r.default.func.isRequired,setEditKeyringIdentities:r.default.func.isRequired,isHiddenAssets:r.default.bool.isRequired,setHiddenAssets:r.default.func.isRequired,updateSessionAccountStatusInfo:r.default.func.isRequired,sessionAccountStatusInfo:r.default.object.isRequired,walletIdentities:r.default.array.isRequired};f.contextTypes={t:r.default.func};var ge=n=>{var s;return{walletsList:n.metamask.wallets,selectedWallet:n.metamask.selectedWallet,walletIdentities:F(n),keyringIdentities:n.metamask.keyringIdentities,showBackUpWallets:(s=n.metamask.keyringIdentities)==null?void 0:s.some(({keyringIdentityType:e})=>e!==_.HARDWARE),sessionAccountStatusInfo:U(n)||{},createAccountsEffectList:$(n),isHiddenAssets:H(n),amountObj:Z(n),isRpcMode:h(n).isRpcMode,rpcType:y(n)}},_e=n=>({setNftFilterInfo:s=>n(Y.setNftFilterInfo(s)),setSelectedWallet:s=>n(G(s)),addNewWallet:s=>n(P(s)),clearAccounts:()=>n(te()),openManageWalletHomePage:()=>n(ee()),setMarkedEditWallet:s=>n(re(s)),setEditKeyringIdentities:s=>n(ie(s)),setHiddenAssets:s=>n(K(s)),updateSessionAccountStatusInfo:s=>n(J(s))}),me=L(ge,_e)(f);var ut=n=>{let{isRpcMode:s}=S(h),e=S(y);return s?e===x.EVM?W.default.createElement(T,{to:B}):W.default.createElement(T,{to:j}):W.default.createElement(me,{...n})};export{ut as default};

window.inOKXExtension = true;
window.ASSETS_BUILD_TYPE = "publish";

