import{a as ut}from"./chunk-65FA4JB3.js";import{g as lt}from"./chunk-HX34N4W4.js";import{a as Ee}from"./chunk-TNVBYBO5.js";import{L as rt,M as at,N as mt,O as ct,fa as x,ka as se,qa as $}from"./chunk-KRRNVCWZ.js";import{$f as Q,Bb as _e,Ca as p,Cb as pe,Db as Me,Gb as de,Ib as I,Kb as ie,Ub as ot,_f as e,cg as ye,e as w,i as a,ja as le,k as m,na as Kt,oa as ue,wa as te,wd as nt,yb as st,zb as fe}from"./chunk-YC2Z7II3.js";a();m();var t=w(le()),c=w(ue()),Pt=w(Kt());a();m();var g=w(le()),n=w(ue()),dt=w(Ee());a();m();var i=w(le()),_=w(ue()),K=w(Ee());a();m();var Ie=({className:u,isSelected:l,estimatedTime:h,unitPrice:f,totalPrice:F,unitPricePrefix:r,unitPriceSuffix:S,totalPricePrefix:C,totalPriceSuffix:k,totalFiat:N,canConfirm:v,onConfirm:o,onClick:B,components:D})=>{let s=$(),[y,G]=(0,i.useState)(l),[X,oe]=(0,i.useState)(!1),ne=(0,K.default)("network-fee-custom",u,{"network-fee-custom--selected":l}),Te=(0,K.default)("network-fee-custom__head",{"network-fee-custom__head--unfold":y}),Pe=(0,K.default)("network-fee-custom__narrow-icon",{"network-fee-custom__narrow-icon--up":y,"network-fee-custom__narrow-icon--down":!y}),we=(0,K.default)("network-fee-custom__main__time",{"network-fee--refresh-animation":!X}),U=(0,K.default)("network-fee-custom__sub",{"network-fee--refresh-animation":!X}),re=()=>{oe(!0),B()};return(0,i.useEffect)(()=>{G(l)},[l]),i.default.createElement("div",{className:ne,onClick:re},i.default.createElement("div",{className:Te},i.default.createElement("div",{className:"network-fee-custom__type-icon"},i.default.createElement("img",{src:"/static/images/network-fee/okx-wallet-plugin-custom.svg"})),i.default.createElement("div",{className:"network-fee-custom__content"},i.default.createElement("div",{className:"network-fee-custom__main"},i.default.createElement("div",{className:"network-fee-custom__main__title"},s(Q[e.CUSTOM])),i.default.createElement("div",{className:we},h)),i.default.createElement("div",{className:U},f?i.default.createElement("div",{className:"network-fee-custom__sub__unit"},f):i.default.createElement("div",{className:"network-fee-custom__sub__unit-price"},i.default.createElement("div",{className:"network-fee-custom__sub__unit-price--prefix"},r,"\xA0"),i.default.createElement("div",{className:"network-fee-custom__sub__unit-price--suffix"},S)),F?i.default.createElement("div",{className:"network-fee-custom__sub__total"},F):i.default.createElement(i.default.Fragment,null,i.default.createElement("div",{className:"network-fee-custom__sub__total-price"},i.default.createElement("div",{className:"network-fee-custom__sub__total-price--prefix"},C,"\xA0"),i.default.createElement("div",{className:"network-fee-custom__sub__total-price--suffix"},k,"\xA0")),i.default.createElement("div",{className:"network-fee-custom__sub__total-fiat"},N)))),i.default.createElement("div",{className:Pe,onClick:()=>{G(!y)}})),i.default.createElement("div",{className:(0,K.default)({"network-fee-custom--hide":!y})},i.default.createElement("div",{className:"network-fee-custom__body"},D()),i.default.createElement("div",{className:"network-fee-custom__foot"},i.default.createElement(te,{className:"network-fee-custom__confirm",category:te.CATEGORY.fill,type:te.TYPE.highlight,size:te.SIZE.lg,onClick:o,disabled:!v,block:!0},s("extension_wallet_transaction_btn_gasfeeconfirm")))))};Ie.propTypes={isSelected:_.default.bool,onConfirm:_.default.func,onClick:_.default.func,estimatedTime:_.default.string,unitPrice:_.default.string,totalPrice:_.default.string,unitPricePrefix:_.default.string,unitPriceSuffix:_.default.string,totalPricePrefix:_.default.string,totalPriceSuffix:_.default.string,totalFiat:_.default.string,canConfirm:_.default.bool,components:_.default.any};Ie.defaultProps={isSelected:!1,onConfirm:()=>{},onClick:()=>{},estimatedTime:"--",unitPrice:"",totalPrice:"",unitPricePrefix:"",unitPriceSuffix:"",totalPricePrefix:"",totalPriceSuffix:"",totalFiat:"",canConfirm:!1,components:""};var ft=(0,i.memo)(Ie);a();m();var d=w(le()),_t=w(Ee()),O=w(ue());a();m();var We=({className:u,isSelected:l,estimatedTime:h,unitPrice:f,totalPrice:F,onClick:r,type:S,typeIcon:C})=>{let k=(0,_t.default)("network-fee-item",{className:u,"network-fee-item--selected":l});return d.default.createElement("div",{className:k,onClick:r},d.default.createElement("div",{className:"network-fee-item__type-icon"},d.default.createElement("img",{src:`/static/images/network-fee/${C}.svg`})),d.default.createElement("div",{className:"network-fee-item__content"},d.default.createElement("div",{className:"network-fee-item__main"},d.default.createElement("div",{className:"network-fee-item__main__title"},S),d.default.createElement("div",{className:"network-fee-item__main__time network-fee--refresh-animation"},h)),d.default.createElement("div",{className:"network-fee-item__sub network-fee--refresh-animation"},d.default.createElement("div",{className:"network-fee-item__sub__unit"},f),d.default.createElement("div",{className:"network-fee-item__sub__total"},F))))};We.propTypes={className:O.default.string,isSelected:O.default.bool,type:O.default.string,estimatedTime:O.default.string,unitPrice:O.default.string,totalPrice:O.default.string,onClick:O.default.func};We.defaultProps={className:"",isSelected:!1,type:"",estimatedTime:"",unitPrice:"",totalPrice:"",onClick:()=>{}};var pt=(0,d.memo)(We);a();m();var Vt=()=>{let u=$();return l=>l===e.SLOW?`1 ${u("extension_wallet_transaction_text_minute")}`:l===e.STANDARD?`30 ${u("extension_wallet_transaction_text_second")}`:l===e.FAST?`15 ${u("extension_wallet_transaction_text_second")}`:"--"},Oe=({className:u,feeDataList:l,feeType:h=e.STANDARD,onBack:f,onClose:F,custom:r,onChange:S})=>{let C=$(),k=Vt(),[N,v]=(0,g.useState)(h),o=(0,dt.default)("network-fee",{className:u}),D=[{type:C(Q[e.SLOW]),typeKey:e.SLOW,typeIcon:ye[e.SLOW],estimatedTime:k(e.SLOW),isSelected:N===e.SLOW},{type:C(Q[e.STANDARD]),typeKey:e.STANDARD,typeIcon:ye[e.STANDARD],estimatedTime:k(e.STANDARD),isSelected:N===e.STANDARD},{type:C(Q[e.FAST]),typeKey:e.FAST,typeIcon:ye[e.FAST],estimatedTime:k(e.FAST),isSelected:N===e.FAST}].map(s=>{let y=l.find(G=>G.typeKey===s.typeKey);return{...s,...y}});return g.default.createElement("div",{className:o},g.default.createElement(lt,{className:"network-fee__head",title:C("wallet_transfer_subtitle_network_fee"),onBack:f,onClose:F,closeable:!!onclose}),g.default.createElement("div",{className:"network-fee__body"},D.map((s,y)=>g.default.createElement(pt,{key:y,...s,onClick:()=>{v(s.typeKey),setTimeout(()=>{var G;(G=s==null?void 0:s.onClick)==null||G.call(s),f==null||f()},100),S==null||S(s)}})),r&&g.default.createElement(ft,{...r,isSelected:N===e.CUSTOM,onClick:()=>{var s;v(e.CUSTOM),(s=r==null?void 0:r.onClick)==null||s.call(r)},onConfirm:()=>{var s;f==null||f(),(s=r==null?void 0:r.onConfirm)==null||s.call(r)}})))};Oe.propTypes={className:n.default.string,feeDataList:n.default.array,feeType:n.default.string,onBack:n.default.func,onClose:n.default.func,custom:n.default.shape({onClick:n.default.func,onConfirm:n.default.func,canConfirm:n.default.bool,components:n.default.any,className:n.default.string,isSelected:n.default.bool,type:n.default.string,estimatedTime:n.default.string,unitPricePrefix:n.default.string,unitPriceSuffix:n.default.string,totalPricePrefix:n.default.string,totalPriceSuffix:n.default.string,totalFiat:n.default.string})};Oe.defaultProps={className:"",feeDataList:[],feeType:e.STANDARD,onBack:()=>{},onClose:()=>{},custom:{}};var yt=(0,g.memo)(Oe);a();m();var Tt=()=>l=>ot(l,0);a();m();var V=u=>(0,Pt.isNil)(u)||pe(u,0),he=({visible:u,address:l,inputData:h,tokenAddress:f,coinId:F,value:r,initialGasData:S,gasLimitOptions:C,onBack:k,onClose:N,onGasChange:v})=>{var it;let o=$(),B=ct(),{baseCoin:D}=rt(F),s=Tt(),{initialGasType:y=e.STANDARD,initialCustomMaxBaseFee:G,initialCustomMaxPriorityFee:X,initialCustomGasPrice:oe,initialCustomGasLimit:ne}=S||{},Te=V(G)?void 0:ie(G),Pe=V(X)?void 0:ie(X),we=V(oe)?void 0:ie(oe),U=V(ne)?void 0:ne,[re,wt]=(0,t.useState)(),[Be,xt]=(0,t.useState)(),[Ue,Ft]=(0,t.useState)(),[$e,Ct]=(0,t.useState)(),[Gt,Ke]=(0,t.useState)(y),[T,ae]=(0,t.useState)(y),xe=at({coinId:F,address:l}),[P,R]=mt({address:l,inputData:h,tokenAddress:f,coinId:F,value:r},{wait:200,...C}),ee=((it=xe==null?void 0:xe.info)==null?void 0:it.gasPrice)||ut,{min:Ve,normal:ze,max:Ze,minGasPrice:gt,supportEip1559:b,suggestBaseFee:St,safePriorityFee:Fe,proposePriorityFee:Ce,fastPriorityFee:Ge}=ee,z=s(Ve),Z=s(ze),H=s(Ze),A=`${(P==null?void 0:P.gasLimit)||0}`,He=`${(P==null?void 0:P.minGasLimit)||A}`,kt=`${(P==null?void 0:P.maxGasLimit)||1500*1e4}`,Ye=x(z),me=x(Z),je=x(H),qe=ie(gt),ge=x(St),vt=x(fe(Ve,Fe)),Se=x(fe(ze,Ce)),Nt=x(fe(Ze,Ge)),Dt=x(Fe),ke=x(Ce),bt=x(Ge),At=se(z,U||A,D),Lt=se(Z,U||A,D),Mt=se(H,U||A,D),ve=(0,t.useRef)(me),Ne=(0,t.useRef)(Se),De=(0,t.useRef)(ke),Et={[e.SLOW]:Ye,[e.STANDARD]:me,[e.FAST]:je,[e.CUSTOM]:V(ve.current)?me:ve.current},It={[e.SLOW]:vt,[e.STANDARD]:Se,[e.FAST]:Nt,[e.CUSTOM]:V(Ne.current)?Se:Ne.current},Wt={[e.SLOW]:Dt,[e.STANDARD]:ke,[e.FAST]:bt,[e.CUSTOM]:V(De.current)?ke:De.current},Y=typeof Ue=="string"?Ue:we||Et[T],j=typeof re=="string"?re:Te||It[T],q=typeof Be=="string"?Be:Pe||Wt[T],J=typeof $e=="string"?$e:U||A,Je=pe(j,0)?o("extension_wallet_transaction_errortip_basefeelimit"):"",Qe=_e(j,ge)&&Me(j,0)?o("extension_wallet_transaction_errortip_notsuccess",{baseFee:ge}):"",Xe=pe(q,0)?o("extension_wallet_transaction_errortip_priorityfeelimit"):"",Re=_e(Y,qe)?o("wallet_extension_transaction_customize_error_gasprice_mustbe",{minGasPriceGWei:qe}):"",et=_e(J,He)||Me(J,kt)?o("wallet_extension_transaction_customize_error_gas_restriction",{minGasLimit:nt(He,0),maxGasLimit:"15M"}):"",tt=!et&&(!b&&!Re||b&&!Je&&!Xe),be=st(j,q),Ae=I(de((b?be:Y)||0)),Ot=x(Ae),ht=se(de(Ae),de(J),D),Bt=[{typeKey:e.SLOW,unitPrice:`${Ye} ${o("extension_wallet_transaction_input_gwei")}`,totalPrice:At,estimatedTime:B(ee,z),onClick:()=>ae(e.SLOW)},{typeKey:e.STANDARD,unitPrice:`${me} ${o("extension_wallet_transaction_input_gwei")}`,totalPrice:Lt,estimatedTime:B(ee,Z),onClick:()=>ae(e.STANDARD)},{typeKey:e.FAST,unitPrice:`${je} ${o("extension_wallet_transaction_input_gwei")}`,totalPrice:Mt,estimatedTime:B(ee,H),onClick:()=>ae(e.FAST)}],Ut=B(ee,Ae,!tt),$t={unitPricePrefix:Ot,unitPriceSuffix:o("extension_wallet_transaction_input_gwei"),totalPrice:ht,estimatedTime:Ut,onClick:()=>{Ke(e.CUSTOM)},canConfirm:tt,onConfirm:()=>{ae(e.CUSTOM);let L=I(Y),M=I(be),E=I(q),ce=J;v({gasType:e.CUSTOM,maxFeePerGas:M,maxPriorityFeePerGas:E,gasPrice:L,gasLimit:ce,isGasLimitLoading:R,supportEip1559:b,gasLimitInfo:P}),ve.current=Y,Ne.current=j,De.current=q}};if((0,t.useEffect)(()=>{Ke(T)},[u]),(0,t.useEffect)(()=>{if(T===e.CUSTOM){let L=I(Y),M=I(be),E=I(q);v({gasType:T,maxFeePerGas:M,maxPriorityFeePerGas:E,gasPrice:L,gasLimit:J,isGasLimitLoading:R,supportEip1559:b,gasLimitInfo:P})}},[b,R,A]),(0,t.useEffect)(()=>{if(T===e.CUSTOM)return;let L,M,E,ce=U||A;T===e.SLOW?(E=z,L=z,M=Fe):T===e.STANDARD?(E=Z,L=Z,M=Ce):T===e.FAST&&(E=H,L=H,M=Ge),v({gasType:T,maxFeePerGas:L,maxPriorityFeePerGas:M,gasPrice:E,gasLimit:ce,isGasLimitLoading:R,supportEip1559:b,gasLimitInfo:P})},[T,z,Z,H,A,R,v]),!u)return null;let Le=()=>t.default.createElement("span",{className:"ethereum-network-fee__custom__GWei"},o("extension_wallet_transaction_input_gwei"));return t.default.createElement(yt,{feeType:Gt,feeDataList:Bt,onBack:k,onClose:N,custom:{...$t,components:()=>t.default.createElement(t.default.Fragment,null,b?t.default.createElement(t.default.Fragment,null,t.default.createElement(p.Number,{className:"ethereum-network-fee__custom__maxBaseFee",size:p.SIZE.sm,title:t.default.createElement("div",{className:"network-fee--refresh-animation"},o("extension_wallet_transaction_text_maxbase_fee"),t.default.createElement("span",{className:"ethereum-network-fee__custom__input-sub-title"},o("extension_wallet_transaction_text_current",{number:ge}))),value:j,error:Je,errorType:p.TIP_TYPE.always,precision:9,enableMinus:!1,onChange:wt,max:1e7,tips:Qe&&t.default.createElement("div",{className:"ethereum-network-fee__custom__maxBaseFee--warning"},Qe),suffix:Le()}),t.default.createElement(p.Number,{className:"ethereum-network-fee__custom__maxPriorityFee",size:p.SIZE.sm,title:o("extension_wallet_transaction_text_priority_fee"),value:q,error:Xe,errorType:p.TIP_TYPE.always,precision:9,enableMinus:!1,onChange:xt,max:1e7,suffix:Le()})):t.default.createElement(p.Number,{className:"ethereum-network-fee__custom__gasPrice",size:p.SIZE.sm,title:t.default.createElement(t.default.Fragment,null,o("wallet_transfer_gasfee_subtitle_gas_price"),t.default.createElement("span",{className:"ethereum-network-fee__custom__input-sub-title"},o("extension_wallet_transaction_input_gwei"))),value:Y,error:Re,errorType:p.TIP_TYPE.always,precision:9,enableMinus:!1,onChange:Ft,max:1e7,suffix:Le()}),t.default.createElement(p.Number,{className:"ethereum-network-fee__custom__gasLimit",size:p.SIZE.sm,title:o("wallet_transfer_gasfee_subtitle_custom_gas_limit"),value:J,error:et,errorType:p.TIP_TYPE.always,enableMinus:!1,onChange:Ct,max:15e6,min:0,precision:0}))}})};he.propTypes={visible:c.default.bool,address:c.default.string,inputData:c.default.string,tokenAddress:c.default.string,coinId:c.default.oneOfType([c.default.string,c.default.number]),value:c.default.string,initialGasData:c.default.shape({initialGasType:c.default.string,initialCustomMaxBaseFee:c.default.string,initialCustomMaxPriorityFee:c.default.string,initialCustomGasPrice:c.default.string,initialCustomGasLimit:c.default.string}),onBack:c.default.func,onClose:c.default.func,onGasChange:c.default.func};he.defaultProps={visible:!1,address:"",inputData:"",tokenAddress:"",coinId:"",value:"0",initialGasData:{initialGasType:e.STANDARD,initialCustomMaxBaseFee:"0",initialCustomMaxPriorityFee:"0",initialCustomGasPrice:"0",initialCustomGasLimit:"0"},onBack:()=>{},onClose:()=>{},onGasChange:()=>{}};var Hi=(0,t.memo)(he);export{yt as a,Hi as b};

window.inOKXExtension = true;
window.ASSETS_BUILD_TYPE = "publish";

