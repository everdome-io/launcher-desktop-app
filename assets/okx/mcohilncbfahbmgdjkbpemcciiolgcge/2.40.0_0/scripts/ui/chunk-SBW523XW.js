import{$ as v,$e as Le,$k as Xe,Ae as W,Bd as D,Be as ce,C as xt,Ce as fe,De as le,Ee as me,Fe as G,Ge as de,Hd as M,He as pe,Je as ge,Kd as J,Ke as ye,Le as Ae,Ng as qe,Og as Ye,Pe as we,Qd as z,Qe as Te,Re as Ee,Se,Ud as ee,Ve as xe,Wa as R,Wd as te,We as Pe,Xd as ne,Xe as Ce,Ye as _e,Za as s,Ze as be,_a as i,_e as Oe,af as Ie,bf as Ne,cf as ve,df as ke,e as C,ef as Re,fd as Z,ff as De,h as process,hf as Me,i as l,if as We,ja as Pt,k as m,nf as Ue,nh as Ve,of as He,pe as re,pf as Be,qe as oe,qf as Fe,re as ae,tf as Ge,ue,ve as se,vf as Ke,wf as he,xf as $e,ze as ie,zg as je}from"./chunk-YC2Z7II3.js";l();m();var P=C(v());l();m();l();m();l();m();function K(){return{type:re}}function Qe(e){return{type:oe,payload:e}}function wn(e){return{type:ae,payload:e}}function Ze(e){return{type:Ie,value:e}}function U(){return{type:Se}}function Je(){return{type:fe}}function ze(e){return{type:le,value:e}}function et(e){return{type:me,value:e}}function tt(e){return{type:Pe,newTokens:e}}function nt(){return{type:Me}}function Tn(e){return{type:ue,value:e}}function En(){return{type:se}}function d(e){return{type:_e,value:e}}function rt(e){return{type:Oe,value:e}}function Sn({device:e,path:t}){return{type:Ce,value:{device:e,path:t}}}function c(){return{type:be}}function ot(){return{type:Le}}function f(e){return{type:de,value:e}}function xn(e){return{type:Ge,value:e}}function Pn(e){return{type:Ke,value:e}}function Cn(e){return{type:$e,value:e}}function _n(){return{type:pe}}function at(){return{type:Re}}function ut(){return{type:De}}function st(){return{type:Ue}}function it(){return{type:He}}function H(e){return{type:he,value:e}}l();m();var g=C(v());l();m();var $=C(v());function ft(e){return{type:Te,message:e.message}}function x(e){return(t,n)=>{let r=n(),{unapprovedTxs:o,unapprovedMsgs:a,unapprovedPersonalMsgs:u,unapprovedTypedMessages:p,network:w,provider:{chainId:N}}=r.metamask,Et=je(o,a,u,p,w,N).filter(St=>St.id!==e);t({type:we,value:{id:e,unconfirmedActionsCount:Et.length}})}}function h(e,t){return{type:Ee,id:e,value:t}}function Un(e,t){return async n=>{!t&&n(d());try{await i().updateTransaction(e)}catch(r){throw n(h(e.id,e.txParams)),n(c()),n(ft(r)),n(K()),$.default.error(r.message),r}try{n(h(e.id,e.txParams));let r=await k();return n(y(r)),n(ct({id:e.id})),e}finally{n(c())}}}function Hn(e,t){return async n=>{!t&&n(d());let{networkType:r}=e;return r&&await n(lt(r)),new Promise((o,a)=>{s().updateAndApproveTransaction(e,(u,p)=>{if(n(h(e.id,e.txParams)),n(U()),u){n(ft(u)),n(K()),$.default.error(u.message),a(u);return}e.hash=p.hash,e.serverTxId=p.serverTxId,o(e)})}).then(()=>k()).then(o=>n(y(o))).then(()=>(n(U()),n(x(e.id)),n(c()),n(Ze("")),n(T()),e)).catch(o=>{throw n(c()),o})}}function Bn(e){return async t=>{t(d());let n;try{n=await i().cancelMessage(e.id)}finally{t(c())}return t(y(n)),t(x(e.id)),t(T()),e}}function Fn(e){return async t=>{t(d());let n;try{n=await i().cancelPersonalMessage(e.id)}finally{t(c())}return t(y(n)),t(x(e.id)),t(T()),e}}function Gn(e){return async t=>{t(d());let n;try{n=await i().cancelDecryptMessage(e.id)}finally{t(c())}return t(y(n)),t(x(e.id)),t(T()),e}}function Kn(e){return async t=>{t(d());let n;try{n=await i().cancelEncryptionPublicKey(e.id)}finally{t(c())}return t(y(n)),t(x(e.id)),t(T()),e}}function hn(e){return async t=>{t(d());let n;try{n=await i().cancelTypedMessage(e.id)}finally{t(c())}return t(y(n)),t(x(e.id)),t(T()),e}}function $n(e,t=!0,n=!0){return r=>(t&&r(d()),new Promise((o,a)=>{s().cancelTransaction(e.id,u=>{if(u){a(u);return}o()})}).then(()=>k()).then(o=>r(y(o))).then(()=>(r(U()),r(x(e.id)),r(c()),n&&r(T()),e)).catch(o=>{throw r(c()),o}))}var dt=()=>{};function nr(e){return i().getCustomCoinInfo(e)}function rr(e){return i().addCustomCoins(e)}function or(e,t){return i().getSearchedCoinList(e,t)}function ar(e){return s().addCrypto(e,dt)}function ur(e){return s().removeServerCoins(e,dt)}function sr(){s().resetCustomCoinInfo()}function ir(){return i().getManageAddedCoin()}function cr(){return async e=>{e(d()),g.default.debug("background.setCurrentCurrency");let t;try{t={}}catch(n){g.default.error(n.stack),e(f(n.message));return}finally{e(c())}e({type:Ae,value:{currentCurrency:t.currentCurrency,conversionRate:t.conversionRate,conversionDate:t.conversionDate}})}}function fr(e){return g.default.debug("action - signMsg"),async t=>{t(d()),g.default.debug("actions calling background.signMessage");let n;try{n=await i().signMessage(e)}catch(r){throw g.default.error(r),t(f(r.message)),r}finally{t(c())}return t(y(n)),t(x(e.metamaskId)),t(T()),e}}function lr(e){return g.default.debug("action - signPersonalMsg"),async t=>{t(d()),g.default.debug("actions calling background.signPersonalMessage");let n;try{n=await i().signPersonalMessage(e)}catch(r){throw g.default.error(r),t(f(r.message)),r}finally{t(c())}return t(y(n)),t(x(e.metamaskId)),t(T()),e}}function mr(e){return g.default.debug("action - decryptMsgInline"),async t=>{g.default.debug("actions calling background.decryptMessageInline");let n;try{n=await i().decryptMessageInline(e)}catch(r){throw g.default.error(r),t(f(r.message)),r}return t(y(n)),n.unapprovedDecryptMsgs[e.metamaskId]}}function dr(e){return g.default.debug("action - decryptMsg"),async t=>{t(d()),g.default.debug("actions calling background.decryptMessage");let n;try{n=await i().decryptMessage(e)}catch(r){throw g.default.error(r),t(f(r.message)),r}finally{t(c())}return t(y(n)),t(x(e.metamaskId)),t(T()),e}}function pr(e){return g.default.debug("action - encryptionPublicKeyMsg"),async t=>{t(d()),g.default.debug("actions calling background.encryptionPublicKey");let n;try{n=await i().encryptionPublicKey(e)}catch(r){throw g.default.error(r),t(f(r.message)),r}finally{t(c())}return t(y(n)),t(x(e.metamaskId)),t(T()),e}}function gr(e){return g.default.debug("action - signTypedMsg"),async t=>{t(d()),g.default.debug("actions calling background.signTypedMessage");let n;try{n=await i().signTypedMessage(e)}catch(r){throw g.default.error(r),t(f(r.message)),r}finally{t(c())}return t(y(n)),t(x(e.metamaskId)),t(T()),e}}function yr(e){return(t,n)=>{let r=n(),o=r.metamask.tokens,a=Ve(r),u=o.find(({address:p})=>e===p);return u?Promise.resolve({symbol:u.symbol,decimals:u.decimals}):(t(st()),g.default.debug("loadingTokenParams"),Ye(a,e,o).then(({symbol:p,decimals:w})=>{t(mt(e,p,Number(w))),t(it())}))}}l();m();var B=C(v());l();m();var bt=C(Pt());l();m();var j=C(v()),q=C(xt());var b=C(te()),Ct=(e={})=>{let t={};return Object.entries(e).forEach(([n,r])=>{t[n]={message:r}}),t};function gt(e,t=b.LOCALE_TYPE.default){return t===b.LOCALE_TYPE.default?e:`${t}_${e}`}async function L(e,t=b.LOCALE_TYPE.default,n=!0){L.cache||(L.cache={});let r=gt(e,t);if(n&&L.cache[r])return L.cache[r];try{let{data:o}=await z(ne.i18nConfigUrl(e,t)),a=t===b.LOCALE_TYPE.default?Ct(o):o,{local:u}=q.default.storage;return u.set({[r]:a}),L.cache[r]=a,a}catch(o){j.default.error(o)}return null}async function _t(e,t=b.LOCALE_TYPE.default){let{local:n}=q.default.storage,r=gt(e,t);return new Promise(o=>{n.get(r).then(a=>{o(a[e])}).catch(a=>{console.log(a)})})}async function pt(e,t=b.LOCALE_TYPE.default){try{let n={};return(process.env.ASSETS_BUILD_TYPE===R.PREPUB||process.env.ASSETS_BUILD_TYPE===R.PUBLISH)&&(n=await _t(e,t)),{...await(await fetch(`./${t}/${e}/messages.json`)).json(),...n}}catch(n){return j.default.error(`failed to fetch ${e} locale because of`,n),{}}}async function Y(e,t=b.LOCALE_TYPE.default,n=!0){if(process.env.ASSETS_BUILD_TYPE===R.PREPUB||process.env.ASSETS_BUILD_TYPE===R.PUBLISH)try{let r=await L(e,t,n);if(r)return r}catch{return pt(e,t)}return pt(e,t)}async function Pr(e){L(e,b.LOCALE_TYPE.default,!1),L(e,b.LOCALE_TYPE.dex,!1)}var yt=C(te());function Ot(e,t,n){return{type:Ne,value:{locale:e,messages:t,dexMessages:n}}}async function Lt(){await i().getHomepageBannerInfo()}async function Gr(){s().getChainFromServer()}function It(e){return async t=>{t(d());try{let n=await Y(e),r=await Y(e,yt.LOCALE_TYPE.dex);await i().setCurrentLocale(e),t(Ot(e,n,r)),await Lt(),ee(e)}catch(n){t(f(n.message));return}finally{t(c())}}}var k=()=>(B.default.debug("background.getState"),new Promise((e,t)=>{s().getState((n,r)=>{if(n){t(n);return}e(r)})}));function y(e){return(t,n)=>{let{metamask:r}=n(),{currentLocale:o,selectedAddress:a,remoteConfig:u}=r,{currentLocale:p,selectedAddress:w}=e;Z((u==null?void 0:u.networks)||[]),o&&p&&o!==p&&t(It(p)),a!==w&&t({type:W}),t({type:ie,value:e})}}var Nt=()=>new Promise((e,t)=>{s().setLocked(n=>{if(n){t(n);return}e()})});function Kr(){return B.default.debug("background.setLocked"),e=>(e(d()),Nt().then(()=>k()).catch(t=>{throw e(f(t.message)),t}).then(t=>{e(y(t)),e(c()),e({type:G})}).catch(()=>{e(c()),e({type:G})}))}function hr(){return e=>(e(d()),new Promise(t=>{s().removeSuggestedTokens((n,r)=>{if(e(c()),n&&e(f(n.message)),e(nt()),M()===D){globalThis.platform.closeCurrentWindow();return}t(r)})}).then(()=>k()).then(t=>e(y({...t}))))}async function A(e){B.default.debug("background.getState");let t;try{t=await i().getState()}catch(n){throw e(f(n.message)),n}return e(y(t)),t}function $r(){return e=>{s().setLastActiveTime(t=>{t&&e(f(t.message))})}}async function vt(e){await i().setUnconnectedAccountAlertShown(e)}function kt(e){return{type:Fe,value:e}}function jr(){return async e=>{let t=await globalThis.platform.currentTab();e(kt(t))}}function qr(){return async()=>{await i().setLedgerLivePreference(!0)}}function Yr(e){return i().setToastData(e)}async function Vr(){i().getHomepageShowCoinList()}async function Xr(){i().getSupportNetworkList()}l();m();var V=C(v());function lt(e,t,n,r){return async o=>{V.default.debug("background.setProviderType",e);try{await i().setProviderType(e,t,n,r)}catch(a){V.default.error(a),o(f("Had a problem changing networks!"));return}o(Rt(e))}}function Rt(e){return{type:xe,value:e}}function T(){return(e,t)=>{M()===D&&!qe(t())&&globalThis.platform.closeCurrentWindow()}}l();m();var X=C(v());function yo(e){return t=>{X.default.debug("background.setFirstTimeFlowType"),s().setFirstTimeFlowType(e,n=>{n&&t(f(n.message))}),t({type:We,value:e})}}function Ao(e){return t=>(X.default.debug("background.setSeedPhraseBackedUp"),new Promise((n,r)=>{s().setSeedPhraseBackedUp(e,o=>{if(o){t(f(o.message)),r(o);return}A(t).then(n).catch(r)})}))}function Dt(e){return{type:Be,value:e}}function wo(){return async e=>{let t=await i().getRequestAccountTabIds();e(Dt(t))}}l();m();function Co(e,t,n){return r=>(r(d()),new Promise((o,a)=>{s().setFeatureFlag(e,t,(u,p)=>{if(r(c()),u){r(f(u.message)),a(u);return}r(Mt(p)),n&&r(Qe({name:n})),o(p)})}))}function Mt(e){return{type:ve,value:e}}l();m();function Wt(e){return{type:ke,value:e}}function I(e,t){return n=>new Promise((r,o)=>{s().setPreference(e,t,(a,u)=>{if(a){n(f(a.message)),o(a);return}n(Wt(u)),r(u)})})}function No(e){return I("autoLockTimeLimit",e)}function vo(e){return I("useWallet",e)}function At(e){return I("closeDefaultWalletPopup",e)}function ko(e){return I("showNftAmount",e)}function Ro(e){return I("hiddenAssets",e)}function Do(e){return I("walletProtectionLevel",e)}function Mo(e={}){return I("sessionAccountStatusInfo",e)}function Wo(e=!1){return I("languageKeyMode",e)}l();m();function ho(){return async e=>{try{await i().completeOnboarding(),e(at())}catch(t){throw e(f(t.message)),t}}}function $o(){return async e=>{e(d());try{await i().resetOnboarding(),e(ut()),e(H(!0)),e(At(!1))}catch(t){throw e(f(t.message)),t}finally{e(c())}}}l();m();function Qo(e,t,n=""){return r=>{s().approvePermissionsRequest(e,t,n,o=>{o&&r(f(o.message))})}}function Zo(e){return t=>new Promise((n,r)=>{s().rejectPermissionsRequest(e,o=>{if(o){t(f(o.message)),r(o);return}A(t).then(n).catch(r)})})}l();m();function ra(e,t,n){return async r=>{await i().resolvePendingApproval(e,t);let{pendingApprovals:o}=await A(r);Object.values(o).length===0&&!n&&r(T())}}function oa(e){return async t=>{await i().rejectPendingApproval(e);let{pendingApprovals:n}=await A(t);Object.values(n).length===0&&t(T())}}l();m();var S={CLOSED:"CLOSED",ERROR:"ERROR",LOADING:"LOADING",OPEN:"OPEN"};var Ut=J.unconnectedAccount,Ht={state:S.CLOSED},Bt=Xe({name:Ut,initialState:Ht,reducers:{connectAccountFailed:e=>{e.state=S.ERROR},connectAccountRequested:e=>{e.state=S.LOADING},connectAccountSucceeded:e=>{e.state=S.CLOSED},disableAlertFailed:e=>{e.state=S.ERROR},disableAlertRequested:e=>{e.state=S.LOADING},disableAlertSucceeded:e=>{e.state=S.CLOSED},dismissAlert:e=>{e.state=S.CLOSED},switchAccountFailed:e=>{e.state=S.ERROR},switchAccountRequested:e=>{e.state=S.LOADING},switchAccountSucceeded:e=>{e.state=S.CLOSED},switchedToUnconnectedAccount:e=>{e.state=S.OPEN}},extraReducers:{[W]:e=>{e.state===S.OPEN&&(e.state=S.CLOSED)}}}),{actions:Ft,reducer:Gt}=Bt,Da=Gt;var{connectAccountFailed:Ma,connectAccountRequested:Wa,connectAccountSucceeded:Ua,dismissAlert:Ha,switchAccountFailed:Ba,switchAccountRequested:Fa,switchAccountSucceeded:Ga,switchedToUnconnectedAccount:Kt}=Ft;async function tu(){return await i().getAllWalletsBalance()}function O(e,...t){return n=>{n(d());let r;return new Promise((o,a)=>{e(...t,(u,p)=>{if(u){a(u);return}r=p,o()})}).then(async()=>(await A(n),n(c()),r)).catch(async o=>(await A(n),n(f(o.message)),n(c()),Promise.reject(o)))}}function wt(e=!0){return{type:ce,value:e}}function Q(){return e=>new Promise(t=>{s().unMarkPasswordForgotten(()=>{e(wt(!1)),t()})}).then(()=>A(e))}function nu(){return async e=>{try{await new Promise((t,n)=>s().markPasswordForgotten(r=>{if(r){n(r);return}t()}))}finally{e(c()),e(wt()),await A(e)}}}function ru(){return O(s().createWallet)}function ou(...e){return t=>new Promise((n,r)=>{s().importWalletWithMnemonic(...e,(o,a)=>{if(o){r(o);return}n(a)})}).then(async n=>(await A(t),n)).catch(n=>Promise.reject(n))}function au(...e){return O(s().addNewWallet,...e)}function uu(...e){return O(s().importWalletWithPrivateKey,...e)}function su(...e){return O(s().removeWallet,...e)}function iu(...e){return O(s().removeWallets,...e)}function cu(...e){return O(s().updateWalletAddress,...e)}function fu(...e){return O(s().updateWalletIdentityName,...e)}function lu(...e){return O(s().updateKeyringIdentityName,...e)}function mu(...e){return O(s().setSelectedWallet,...e)}function du(e){return t=>(t(Je()),P.default.debug("background.submitPassword"),new Promise((n,r)=>{s().submitPassword(e,o=>{if(o){r(o);return}n()})}).then(()=>(t(et()),t(H(!0)),A(t))).then(()=>{}).catch(n=>(t(ze(n.message)),Promise.reject(n))))}function pu(e,t){return n=>{!t&&n(d()),P.default.debug("background.createWalletAndRestore");let r;return new Promise((o,a)=>{s().createWalletAndRestore(e,(u,p)=>{if(u){a(u);return}r=p,o()})}).then(()=>n(Q())).then(()=>(n(Tt()),n(c()),r)).catch(o=>(n(f(o.message)),n(c()),Promise.reject(o)))}}function gu(e,t,n){return r=>{!n&&r(d()),P.default.debug("background.importWalletWithMnemonicAndRestore");let o;return new Promise((a,u)=>{s().importWalletWithMnemonicAndRestore(e,t,(p,w)=>{if(p){u(p);return}o=w,a()})}).then(()=>r(Q())).then(()=>(r(Tt()),r(c()),o)).catch(a=>(r(f(a.message)),r(c()),Promise.reject(a)))}}function yu(e,t,n,r){return o=>{!r&&o(d()),P.default.debug("background.importWalletWithPrivateKeyAndRestore");let a;return new Promise((u,p)=>{s().importWalletWithPrivateKeyAndRestore(e,t,n,(w,N)=>{if(w){p(w);return}a=N,u()})}).then(()=>o(Q())).then(()=>(o(c()),a)).catch(u=>(o(c()),Promise.reject(u)))}}function Au(e){return new Promise((t,n)=>{s().verifyPassword(e,r=>{if(r){n(r);return}t(!0)})})}function wu(e,t){return P.default.debug("background.checkHardwareStatus",e,t),async n=>{n(d());let r;try{r=await i().checkHardwareStatus(e,t)}catch(o){throw n(f(o.message)),o}finally{n(c())}return await A(n),r}}function Tu(e){return P.default.debug("background.forgetDevice",e),async t=>{t(d());try{await i().forgetDevice(e)}catch(n){throw P.default.error(n),t(f(n.message)),n}finally{t(c())}await A(t)}}function Eu(e,t,n,r){return P.default.debug("background.connectHardware",e,t,n),async o=>{o(rt(r));let a;try{a=await i().connectHardware(e,t,n)}catch(u){throw P.default.error(u),o(f(u.message)),u}finally{o(ot())}return await A(o),a}}function Su(e,t,n,r,o=!0){return P.default.debug("background.unlockHardwareWalletAccount",e,t,n,r),async a=>{o&&a(d());let u=[];for(let p of e)try{let w=await i().unlockHardwareWalletAccount(p,t,n,r);u.push(w)}catch(w){throw P.default.error(w),a(f(w.message)),a(c()),w}return a(c()),u}}function ht(e,t){return async n=>{await new Promise((r,o)=>{s().addPermittedAccount(e,t,a=>{if(a){o(a);return}r()})}),await A(n)}}function xu(e,t){return async n=>{await new Promise((r,o)=>{s().removePermittedAccount(e,t,a=>{if(a){o(a);return}r()})}),await A(n)}}function Tt(){return{type:ge}}function ct({id:e}={}){return{type:ye,id:e}}function mt(e,t,n,r,o,a){return u=>{if(!e)throw new Error("OKX Wallet - Cannot add token without address");return o||u(d()),new Promise((p,w)=>{s().addToken(e,t,n,r,a,(N,F)=>{if(u(c()),N){u(f(N.message)),w(N);return}u(tt(F)),p(F)})})}}function Pu(e){return new Promise((t,n)=>{s().getMnemonicByWalletId(e,(r,o)=>{if(r){n(r);return}t(o)})})}function Cu(e){return new Promise((t,n)=>{s().backupMnemonic(e,(r,o)=>{if(r){n(r);return}t(o)})})}function _u(e){return new Promise((t,n)=>{s().getBackupData(e,(r,o)=>{if(r){n(r);return}t(o)})})}function bu(e){return new Promise((t,n)=>{s().updateAllKeyringIdentities(e,(r,o)=>{if(r){n(r);return}t(o)})})}function Ou(e){return new Promise((t,n)=>{s().getBackupPrivateKeys(e,(r,o)=>{if(r){n(r);return}t(o)})})}export{pt as a,Pr as b,S as c,Da as d,tu as e,nu as f,ru as g,ou as h,au as i,uu as j,su as k,iu as l,cu as m,fu as n,lu as o,mu as p,du as q,pu as r,gu as s,yu as t,Au as u,wu as v,Tu as w,Eu as x,Su as y,ht as z,xu as A,ct as B,Pu as C,Cu as D,_u as E,bu as F,Ou as G,K as H,Qe as I,wn as J,Ze as K,Tn as L,En as M,d as N,Sn as O,c as P,ot as Q,f as R,xn as S,Pn as T,Cn as U,_n as V,H as W,Un as X,Hn as Y,Bn as Z,Fn as _,Gn as $,Kn as aa,hn as ba,$n as ca,nr as da,rr as ea,or as fa,ar as ga,ur as ha,sr as ia,ir as ja,cr as ka,fr as la,lr as ma,mr as na,dr as oa,pr as pa,gr as qa,yr as ra,Lt as sa,Gr as ta,It as ua,y as va,Kr as wa,hr as xa,A as ya,$r as za,vt as Aa,jr as Ba,qr as Ca,Yr as Da,Vr as Ea,Xr as Fa,lt as Ga,T as Ha,yo as Ia,Ao as Ja,wo as Ka,Co as La,No as Ma,vo as Na,At as Oa,ko as Pa,Ro as Qa,Do as Ra,Mo as Sa,Wo as Ta,ho as Ua,$o as Va,Qo as Wa,Zo as Xa,ra as Ya,oa as Za};

window.inOKXExtension = true;
window.ASSETS_BUILD_TYPE = "publish";

