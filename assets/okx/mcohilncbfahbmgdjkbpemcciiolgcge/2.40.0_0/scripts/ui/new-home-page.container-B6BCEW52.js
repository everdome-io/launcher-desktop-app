import{a as qo}from"./chunk-TZGSIEOJ.js";import{a as Ko}from"./chunk-Z3HCMRMH.js";import{a as Go}from"./chunk-42P2OUM4.js";import{a as zo}from"./chunk-MO6HYXXQ.js";import{a as Yo,b as ut}from"./chunk-XUDVUTYB.js";import"./chunk-UKDME73C.js";import{b as Vo}from"./chunk-36BIZMTH.js";import"./chunk-C2KLOOGK.js";import"./chunk-4EFQISTL.js";import"./chunk-TXMRZH72.js";import"./chunk-WQMUAJQQ.js";import{a as Uo}from"./chunk-6TY3WXUG.js";import{a as Fo,c as Wo,d as Ho,e as Mo,f as $o,g as Ge,i as Ve}from"./chunk-BZBZNG4R.js";import{c as jo,d as Zo}from"./chunk-3TZVDMZB.js";import{c as $t,r as Ut}from"./chunk-Z3F5FSEH.js";import"./chunk-IWZNXKTF.js";import{b as Oo}from"./chunk-4SCEKLXQ.js";import"./chunk-RYMLTDAH.js";import"./chunk-VNM7HA44.js";import{Ea as No,Na as vo,Oa as wo,Qa as ko,S as fo,T as uo,Ta as yo,U as dt,Xa as Io,ia as _o,sa as go,ta as ho}from"./chunk-SBW523XW.js";import{p as bo}from"./chunk-NEW56Z2U.js";import"./chunk-GGV226OL.js";import{a as se}from"./chunk-4DLG5GSZ.js";import"./chunk-HX34N4W4.js";import"./chunk-F7QJ6WQ5.js";import{a as ft}from"./chunk-TNVBYBO5.js";import{A as So,P as Ao,S as Po,Ta as Lo,Xa as Bo,Za as Do,c as os,i as ze,j as xo,o as ne,qa as v,r as Co,y as Eo}from"./chunk-KRRNVCWZ.js";import{$h as Qt,$i as Ue,Aa as ae,Ad as Wt,Ai as no,Ak as co,Bd as Ht,Bj as lo,Ei as xe,Fi as so,Ha as Bt,Hd as Mt,Hi as io,Hj as mo,Hk as ce,Ia as Ie,La as F,Lh as qt,Na as J,Oh as jt,Pa as W,Sa as le,Sh as $,Tk as pt,Ua as Te,Uh as Zt,Uk as po,Vh as Kt,Wa as lt,Xi as $e,_a as R,_h as Xt,ai as Jt,bj as ro,ce as Yt,de as G,dj as ao,e as _,ee as d,ei as Rt,gi as eo,h as process,hi as to,i as s,ja as y,k as i,ka as at,ke as V,na as ns,oa as ye,ok as ct,pa as O,pd as Ft,ql as To,rc as Ot,rh as me,tg as zt,va as Q,vj as mt,wa as p,wb as Dt,wh as Me,wk as Ye,xd as be,xh as Gt,xi as oo,zh as Vt}from"./chunk-YC2Z7II3.js";s();i();var bn=_(y());s();i();var o=_(y());var I=_(ye());var _e=_(ft());var In=_(ns());s();i();var K=_(y());s();i();var Xo=_(y());var ss=10,Ee=process.env.APP_VERSION,is="VERSIONUPDATESHOWN",rs=/(http|ftp|https):\/\/[\w\-_]+(\.[\w\-_]+)+([\w\-.,@?^=%&:/~+#]*[\w\-@?^=%&/~+#])?/,ee="wallet_extension_rn",Ce=`v${Ee==null?void 0:Ee.split(".").join("_")}`,as=()=>{let e=v(),t=e(`${ee}_title_${Ce}`)||e(`${ee}_title`),n=e(`${ee}_version_${Ce}`)||e(`${ee}_version`,{version:Ee}),l=e(`${ee}_button_${Ce}`)||e(`${ee}_button`);return{tips:new Array(ss).fill(!0).map((m,c)=>{let a=`${ee}_content_${c+1}_${Ce}`;return{key:a,content:e(a)}}).filter(({key:m,content:c})=>!!c&&c!==m),title:t,version:n,confirm:l}},Qo=({history:e})=>{let t=v(),[n,l]=Xo.default.useState(!1),r=`${is}-${Ee}`,m=as();ze(()=>{!at.get(r)&&!!m.tips.length&&l(!0)});let c=Eo(()=>{l(!1),at.set(r,!0);let a=t(`${ee}_button_link_${Ce}`);!a||(rs.test(a)?globalThis.open(a):e.push(a))},[]);return{visible:n,onConfirm:c,...m}};s();i();var Jo=e=>{let{tips:t,title:n,version:l,confirm:r,visible:m,onConfirm:c}=Qo(e);return K.default.createElement(ae,{hideCloseBtn:!0,noContentPadding:!0,visible:m,windowStyle:{width:256}},K.default.createElement("div",{className:"version-dialog"},K.default.createElement("img",{className:"version-dialog__logo",src:"static/images/version_update_logo.svg"}),K.default.createElement("h1",{className:"version-dialog__title"},n),K.default.createElement("div",{className:"version-dialog__desc"},l),K.default.createElement("ul",{className:"version-dialog__tips"},t.map(({content:a})=>K.default.createElement("li",{key:a,className:"version-dialog__tip"},a))),K.default.createElement(p,{circle:!0,className:"version-dialog__button",category:p.CATEGORY.fill,type:p.TYPE.highlight,onClick:c},r)))};s();i();var ie=_(y()),gt=_(ye());s();i();var B=_(y());s();i();var Se=_(y());var Ro=_(ft()),ls=({item:e,index:t})=>{let[n,l]=(0,Se.useState)(!1),r=t%2>1?F.DIRECTION.top:F.DIRECTION.topRight;return Se.default.createElement(F,{show:n,title:e.collectionName,trigger:F.TRIGGER_TYPES.hover,placement:r},Se.default.createElement("span",{onMouseOver:()=>{let m=e.isIdentification?127:144;document.querySelector(`.ok-nft--collection-name-hidden-${e.id}`).clientWidth>m&&l(!0)},onMouseLeave:()=>{l(!1)},className:(0,Ro.default)("ok-nft--collection-name",{"ok-nft--collection-identification-name":e.isIdentification})},e.collectionName))},en=ls;var qe=e=>{let t=e.salePrice||e.lastPrice||e.bestOfferPrice,n=v(),l=n("wallet_extension_nft_detail_text_price"),r="New";return e.lastPrice?l=n("wallet_extension_nft_detail_text_last"):e.bestOfferPrice&&(l=n("wallet_extension_nft_detail_text_best_offer")),B.default.createElement("div",{onClick:e.onClick,className:"ok-nft--main-item"},e.isNew&&B.default.createElement("div",{className:"ok-nft--is-new"},r),B.default.createElement(zo,{startStatus:e.activeId===2,src:e.image,alt:"",classnames:"ok-nft--image",backupImage:"/static/images/nft/nft-backup-image.png"}),B.default.createElement("div",{className:"ok-nft--main-item-info"},B.default.createElement("div",{className:"ok-nft--collections"},B.default.createElement(en,{item:e}),B.default.createElement("div",{className:`ok-nft--collection-name-hidden-${e.id}`,style:{position:"absolute",visibility:"hidden"}},e.collectionName),e.isIdentification&&B.default.createElement("img",{src:"/static/images/nft/nft-isidentification.svg",className:"ok-nft--flag-image"}),B.default.createElement("img",{src:e.chainIcon,className:"ok-nft--chain-image"})),B.default.createElement("div",{className:"ok-nft--name"},e.name),B.default.createElement("div",{className:"ok-nft--price-type"},l),B.default.createElement("div",{className:"ok-nft--price-value"},(t==null?void 0:t.currencyUrl)&&B.default.createElement("img",{src:`${t==null?void 0:t.currencyUrl}`,className:"ok-nft--price-value-chain-image"}),B.default.createElement("span",null,(t==null?void 0:t.priceDisplay)||"--"))))};s();i();var D={INIT:"init",FILTER:"filter"};s();i();var te=_(y());var ms=({type:e=D.INIT})=>{let t=v(),n=G(),l=(0,te.useCallback)(()=>{n(Ve.setNftFilterInfo({filterInfo:{collectionFilter:[],chainListFilter:[],saleStatusFilter:[]}}))},[]),r={[D.INIT]:t("wallet_extension_nft_tab_nfts_desc"),[D.FILTER]:t("wallet_extension_nft_text_no_items_found")},m={[D.INIT]:t("wallet_extension_nft_tab_nfts_btn_explorenfts"),[D.FILTER]:t("wallet_extension_nft_btn_back_to_items")},c={[D.INIT]:"/static/images/nft/no-nft.png",[D.FILTER]:"/static/images/nft/nft-filter-no-collection.svg"};return te.default.createElement("div",{className:e===D.INIT?"ok-nft-no-data-init":"ok-nft--no-filter-result"},te.default.createElement("div",{style:{width:"86px",height:"86px"}},te.default.createElement(J,{width:86,height:86,alt:"",src:c[e]})),te.default.createElement("div",{className:e===D.INIT?"ok-nft-no-data-text":"ok-nft--no-filter-result-text"},r[e]),te.default.createElement(p,{category:p.CATEGORY.fill,type:p.TYPE.highlight,size:p.SIZE.md,onClick:()=>{if(e===D.INIT){globalThis.platform.openTab({url:"https://www.okx.com/web3/nft/featured"});return}l()},className:e===D.INIT?"ok-nft-no-data-button":"ok-nft--no-filter-result-button"},m[e]))},_t=ms;var ht=({list:e,filterStatus:t})=>{let n=d(Ge),l=V();return e.length>0?ie.default.createElement("div",{className:"ok-nft--main-list"},e.map(r=>ie.default.createElement(qe,{key:r.id,...r,activeId:n,onClick:()=>{l.push({search:`chainId=${r.chain}&contractAddress=${r.contractAddress}&tokenId=${encodeURIComponent(r.tokenId)}`,pathname:`${xe}`})}}))):t?ie.default.createElement("div",{className:"ok-nft--main-no-nft"},ie.default.createElement(_t,{type:D.FILTER})):ie.default.createElement("div",{className:"ok-nft--main-no-nft"},ie.default.createElement(_t,{type:D.INIT}))};ht.propTypes={list:gt.default.array,filterStatus:gt.default.bool};ht.defaultProps={list:[],filterStatus:!1};var tn=ht;s();i();var H=_(y());var on=({data:e=[],accountAddress:t})=>{let[n,l]=(0,H.useState)(!1),r=V(),m=v(),c=m("extension_home_aptos_nft_card_receivenum",{num:H.default.createElement("span",{key:"language",className:"new-home-page-aptos-notify"},e.length)});return H.default.createElement(H.default.Fragment,null,H.default.createElement(ae.Action,{windowStyle:{borderTopLeftRadius:"8px",borderTopRightRadius:"8px"},onClose:()=>{l(!1)},visible:n,title:H.default.createElement("span",{className:"new-home-page-aptos-title"},m("extension_aptos_nft_title_receiveallowed")),windowClass:"new-home-page-aptos-claim"},H.default.createElement("div",{className:"ok-nft--main-list"},e.map(a=>(a.coverUrl?a.image=a.coverUrl:a.resourceType===1&&(a.image=a.resourceUrl),a.lastPrice=be(a.lastPrice),a.bestOffer=be(a.bestOffer),a.sale=be(a.sale),a.floorPriceDetail=be(a.floorPriceDetail),H.default.createElement(qe,{...a,key:a.tokenId,activeId:2,onClick:()=>{r.push({search:`chainId=${a.chain}&contractAddress=${a.contractAddress}&tokenId=${encodeURIComponent(a.tokenId)}&claim=true&offerAddress=${a.offerAddress}&accountAddress=${t}`,pathname:`${xe}`})}}))))),H.default.createElement("div",{className:"new-home-page-aptos-box"},H.default.createElement(J,{alt:"",width:32,height:32,className:"new-home-page-aptos-image",src:e[0].coverUrl||e[0].resourceUrl}),H.default.createElement("div",{className:"new-home-page-aptos-text"},c),H.default.createElement("span",{className:"new-home-page-aptos-get",onClick:()=>{e.length>1?l(!0):r.push({search:`chainId=${e[0].chain}&contractAddress=${e[0].contractAddress}&tokenId=${encodeURIComponent(e[0].tokenId)}&claim=true&offerAddress=${e[0].offerAddress}&accountAddress=${t}`,pathname:`${xe}`})}},m("extension_home_aptos_nft_card_receivenow"))))};s();i();var S=_(y());function nn(){let e=v(),t=G(),[n,l]=(0,S.useState)(!1),r=d($),{hasThirdExt:m,closeDefaultWalletPopup:c}=d(({metamask:u})=>({hasThirdExt:u.preferences.hasThirdExt,closeDefaultWalletPopup:u.preferences.closeDefaultWalletPopup})),a=d(Jt),h=d(({metamask:u})=>u.preferences.useWallet);(0,S.useEffect)(()=>{l((m||!window.chrome)&&!r&&!h&&(!c||a))},[m,r]);let[N,b]=(0,S.useState)(null);return xo(()=>{N&&t(dt(!0)),N&&N.destroy()}),(0,S.useEffect)(()=>{if(c&&t(dt(!1)),n){let u=W.info({duration:0,onClose:()=>{b(null),t(wo(!0))},icon:S.default.createElement("img",{src:"./static/images/setting/okx-icon.svg",className:"ok-home-notification--icon"}),key:"defaultWallet",customRender:({icon:T,close:E})=>S.default.createElement(S.default.Fragment,null,T,S.default.createElement("div",{className:"ok-home-notification--main"},S.default.createElement("div",{className:"ok-home-notification--body"},S.default.createElement("span",{className:"ok-home-notification--title"},e("wallet_extension_toast_title_set_as_default")),E),S.default.createElement("div",{className:"ok-home-notification--desc"},e("wallet_extension_toast_set_as_default_desc")),S.default.createElement("div",{className:"main-button-group"},S.default.createElement(p,{category:p.CATEGORY.outline,type:p.TYPE.primary,size:p.SIZE.xxs,onClick:()=>{u&&u.destroy()}},e("wallet_extension_toast_btn_not_now")),S.default.createElement(p,{category:p.CATEGORY.fill,type:p.TYPE.highlight,size:p.SIZE.xxs,onClick:()=>{t(vo(!0)),setTimeout(()=>{W.success({title:e("wallet_extension_toast_set_successfully")})},1e3),u&&u.destroy()}},e("wallet_extension_toast_btn_set_as_default")))))});b(u)}},[n]),""}s();i();s();i();var pe=_(y()),Ae=_(ye());s();i();var sn=({number:e,hidden:t=!1})=>{let n=c=>a=>pe.default.createElement("span",{className:"account-number",style:{fontSize:`${c}px`}},a),l=[{length:27,render:c=>n(18)(pe.default.createElement(Oo,{className:"account-main__tooltip-text",tooltipProps:{prefixClassName:"account-main__tooltip"},text:c}))},{length:25,render:n(18)},{length:21,render:n(20)},{length:18,render:n(24)},{length:16,render:n(28)},{length:14,render:n(32)},{length:13,render:n(36)},{length:12,render:n(40)}],r=(0,pe.useMemo)(()=>{let c=l.find(({length:a})=>(e==null?void 0:e.length)>a);return c!=null&&c.render?c==null?void 0:c.render:a=>n(44)(a)},[e]);return pe.default.createElement("div",{className:"account-main"},r(t?"*****":e||"--"))};sn.propTypes={number:Ae.default.oneOfType([Ae.default.string,Ae.default.object]).isRequired,hidden:Ae.default.bool.isRequired};var Nt=sn;s();i();s();i();s();i();s();i();var Y=_(y());s();i();var cs=()=>{let e=V(),t=()=>{e.push(`${$e}?nextPath=${Ue}`)},n=v();return d($)?Y.default.createElement(Y.default.Fragment,null,Y.default.createElement("div",{className:"backup-float"},Y.default.createElement("div",{className:"float-left"},Y.default.createElement(O,{className:"okx-wallet-plugin-security-1",style:{fontSize:"24px",color:"#E84256"}})),Y.default.createElement("div",{className:"float-right"},Y.default.createElement("div",{className:"float-right-top"},n("wallet_home_backup_warning_maintitle_not_backup")),Y.default.createElement("div",{className:"float-right-mid"},n("wallet_home_backup_warning_subtitle_not_backup_risk")),Y.default.createElement("div",{className:"float-right-bot",onClick:t},Y.default.createElement(p,{category:p.CATEGORY.fill,type:p.TYPE.highlight,className:"float-right-bot-button"},n("wallet_home_backup_warning_btn_backup_now")))))):null},rn=cs;var vt=rn;s();i();var q=_(y());s();i();var C=_(y());var ps=({isOkx:e})=>{let t=v(),n=d(h=>{let N=me(h),b=Me(h);return{isMNEMONIC:b[N].keyringIdentityType==="MNEMONIC WALLET",isPRIVATE:b[N].keyringIdentityType==="PRIVATE KEY WALLET",nickname:h.metamask.provider.nickname,type:h.metamask.provider.type}}),{networkList:l,isEVM:r}=d(h=>{let N=pt(h).some(b=>Ft(b.coinId));return{isEVM:N,networkList:N?Rt(h):pt(h)}}),m=(0,C.useMemo)(()=>r?l.find(h=>h.localType===n.type)||{}:l[0],[n.type,r,l]),[c,a]=(0,C.useState)(!1);return C.default.createElement(C.default.Fragment,null,C.default.createElement(Vo,{type:"dapp",visible:c,closeCallback:()=>{a(!1)},isOkx:e,isEVM:r,isPRIVATE:n.isPRIVATE}),C.default.createElement("div",{className:"network-block",style:{cursor:!r&&n.isPRIVATE?"default":"pointer"},onClick:()=>{!r&&n.isPRIVATE||a(!0)}},n.isMNEMONIC?C.default.createElement(C.default.Fragment,null,e&&C.default.createElement("img",{src:"/static/images/all-chain.svg",className:"network-block--icon",alt:"network-icon"}),C.default.createElement("span",{className:"network-block-name"},t("wallet_extension_option_allchain")),C.default.createElement("img",{src:"/static/images/dapp-arrow.svg",alt:"",className:"network-block--arrow"})):C.default.createElement(C.default.Fragment,null,C.default.createElement(J,{width:24,height:24,alt:"",src:(m==null?void 0:m.icon)||(m==null?void 0:m.image)||ce,errorImg:ce,className:"network-block--icon"}),C.default.createElement("span",{className:"network-block-name"},m==null?void 0:m.chainName),r&&C.default.createElement("img",{src:"/static/images/dapp-arrow.svg",alt:"",className:"network-block--arrow"}))))},an=ps;var ds=()=>{let e=d(c=>c.activeTab),t=d(Ye),n=(0,q.useMemo)(()=>t.find(c=>c.origin===e.origin)||{},[t]),l=n.origin&&n.origin.replace(/^https?:\/\//iu,""),r=d($);if(!l||r)return"";let m=v();return q.default.createElement("div",{className:"ok-dapp-state ok-dapp-state-relative"},q.default.createElement("div",{className:"ok-dapp-state--main"},q.default.createElement(J,{width:32,height:32,alt:"",src:n.icon||ce,errorImg:ce,className:"ok-dapp-state--icon"}),q.default.createElement("div",{className:"ok-dapp-state--status"},q.default.createElement("div",{className:"ok-dapp-state--origin"},l),q.default.createElement("div",{className:"ok-dapp-state--connected"},m("wallet_extension_home_foot_dapp_connceted"))),q.default.createElement(an,{isOkx:n.isOkx})))},ln=ds;s();i();var je=_(y());var fs=()=>{let e=v();return je.default.createElement("div",{className:"ok-dapp-state--finish"},je.default.createElement("img",{src:"/static/images/check-green-solid.svg"}),je.default.createElement("span",null,e("wallet_home_foot_dapp_connceted")))},mn=fs;s();i();var de=_(y()),cn=_(ye());var pn=({className:e})=>{let t=G(),{userInfo:n}=d(m=>({userInfo:Gt(m)})),l=V();return de.default.createElement("div",{className:e},(()=>de.default.createElement("div",{className:"new-home__account-info",onClick:async()=>{await t(jo(!0)),await t(Zo(!0)),l.push(`${lo}?fromHome=1`)}},de.default.createElement("span",{className:"new-home__account-wallet",style:{color:n.keyringColor}},n.keyringName)," - ",de.default.createElement("span",{className:"new-home__account-wallet"},n.walletName),de.default.createElement("img",{className:"new-home_account-arrow",src:"./static/images/index/arrow.svg"})))())};pn.propTypes={className:cn.default.string};var dn=pn;s();i();var w=_(y());var us=({hidden:e})=>{let t=v(),{defiList:n,defiLoading:l,selectedCurrency:r,defiLoadErr:m}=d(u=>{let{metamask:T}=u,E=me(u);return{defiList:T.defiLists[E]||[],defiLoading:T.defiLoading,defiLoadErr:T.defiLoadErr,selectedCurrency:T.selectedCurrency}}),c=()=>{R().fetchDefiList()};(0,w.useEffect)(()=>{c()},[]);let a=()=>w.default.createElement("div",{className:"new-home__defi-loader"},w.default.createElement(Q,{size:Q.SIZE.lg})),h=(0,w.useMemo)(()=>w.default.createElement("div",{className:"new-home__defi-list"},n.map(u=>w.default.createElement("div",{key:u.id,className:"new-home__defi-list-item",onClick:()=>{!u.web||globalThis.platform.openTab({url:u.web})}},w.default.createElement("img",{src:u.logo,alt:"logo",className:"new-home__defi-list-item-logo"}),w.default.createElement("div",{className:"new-home__defi-list-item-detail"},w.default.createElement("div",{className:"new-home__defi-list-item-detail-platform"},u.platform),w.default.createElement("div",{className:"new-home__defi-list-item-detail-networkNew"},u.networkNew)),w.default.createElement("div",{className:"new-home__defi-list-item-price"},e?"***":Po(Dt(u.balance,r.usdToThisRate),r.symbol))))),[n,r,e]),N=()=>w.default.createElement("div",{className:"new-home__defi-empty"},w.default.createElement("img",{src:"/static/images/explore-dapps.png",alt:"ExploreDApps",className:"new-home__defi-empty-img"}),w.default.createElement("div",{className:"new-home__defi-empty-slogan"},t("wallet_extension_text_enjoy_massive_defi")),w.default.createElement(p,{style:{padding:"8px 24px"},category:p.CATEGORY.fill,type:p.TYPE.highlight,size:p.SIZE.md,className:"new-home__defi-empty-button",onClick:()=>{globalThis.platform.openTab({url:t("extension_btn_link_okxweb3yield")})}},t("wallet_extension_btn_explore_dapps"))),b=()=>w.default.createElement("div",{className:"new-home__defi-error"},w.default.createElement("img",{className:"new-home__defi-error-img",src:"static/images/nft/nft-error.svg",alt:"error"}),w.default.createElement("div",{className:"new-home__defi-error-text"},t("wallet_extension_nft_text_loading_failed")),w.default.createElement(p,{category:p.CATEGORY.fill,type:p.TYPE.highlight,size:p.SIZE.sm,width:132,circle:!0,onClick:c},t("wallet_extension_nft_btn_refresh")));return m?b():w.default.createElement(w.default.Fragment,null,!!n.length&&h,!n.length&&(l?a():N()))},fn=us;s();i();var k=_(y());var wt=_(ye());var un=_(ft()),_n=_(os());var kt=({freeze:e,unfreeze:t})=>{let n=d(po),l=d($),r=v(),[m,c]=(0,k.useState)(!1);(0,k.useEffect)(()=>{m?e():t()},[m]);let a=n.map(({image:M,chainName:A,address:P})=>({value:{address:P,chainName:A},label:k.default.createElement("div",{className:"new-home__address-copy-chain-item"},k.default.createElement("div",{className:"new-home__address-copy-chain-item-left"},k.default.createElement("img",{src:M,alt:A})),k.default.createElement("div",{className:"new-home__address-copy-chain-item-main"},k.default.createElement("div",{className:"new-home__address-copy-chain-item-name"},A),k.default.createElement("div",{className:"new-home__address-copy-chain-item-addr"},zt(P))),k.default.createElement("div",{className:"new-home__address-copy-chain-item-right"},k.default.createElement(O,{className:"okx-wallet-plugin-copy-1",style:{fontSize:"20px"}})))})),h=M=>{(0,_n.default)(M.value.address),W.success({title:r("wallet_extension_transaction_toast_network_address_copied",{network:M.value.chainName}),desc:M.value.address,duration:1.5,placement:W.DIRECTION.top,containerClassName:"address-copy-notification"})},N=(0,k.useRef)(null),b=()=>k.default.createElement("div",{ref:N,className:"new-home__address-copy-button"},k.default.createElement(F,{title:r("wallet_extension_top_copy_address"),gutter:6},k.default.createElement(se,null,k.default.createElement(O,{className:"okx-wallet-plugin-copy-1",style:{fontSize:"20px"}})))),[u,T]=(0,k.useState)(Ie.DIRECTION.left);(0,k.useEffect)(()=>{if(N&&N.current){let A=N.current.getBoundingClientRect().left*2>window.innerWidth;T(A?Ie.DIRECTION.right:Ie.DIRECTION.left)}},[N]);let{run:E}=ne(()=>{l&&W.warn({title:r("wallet_account_toast_backup_view_address"),duration:1.5,containerClassName:"address-copy-notification",placement:W.DIRECTION.top})},{leading:!0,wait:300});return k.default.createElement("div",{className:"new-home__address-copy",onClick:E},k.default.createElement("div",{className:(0,un.default)({"new-home__address-copy-mask":!0},{"new-home__address-copy-mask-visible":m}),onClick:()=>{c(!1)}}),k.default.createElement(Ie,{disabled:l,options:a,onChange:h,displayArea:b,align:u,popupProps:{zIndex:10001},optionContClassName:"new-home__address-copy-drop-container",optionItemClassName:"new-home__address-copy-drop-option",onToggleShow:M=>{setTimeout(()=>{c(M)},0)}}))};kt.propTypes={freeze:wt.default.func,unfreeze:wt.default.func};kt.defaultProps={freeze:()=>{},unfreeze:()=>{}};var gn=kt;s();i();var Pe=_(y());var _s=({iconName:e,text:t,onClick:n})=>Pe.default.createElement("div",{className:"ok-home-button"},Pe.default.createElement("div",{className:"ok-home-button-icon-container",onClick:n},Pe.default.createElement(O,{className:e,style:{fontSize:"28px"}})),Pe.default.createElement("div",{className:"ok-home-button-text"},t)),Le=_s;s();i();var j=_(y());var gs=()=>{let[e,t]=(0,j.useState)(null),n=Ao(),l=d(eo);(0,j.useEffect)(()=>{l.length&&t(l[0])},[l]);let{run:r}=ne(m=>{$t();let c=`https://${n}${m}`;globalThis.open(c)},{leading:!0,wait:300});return e?j.default.createElement("div",{className:"new-home__banner",onClick:()=>r(e.url)},j.default.createElement("div",{className:"new-home__banner-container"},j.default.createElement("img",{src:"/static/images/banner/ethw.png"}),j.default.createElement("p",{className:"new-home__banner-title"},e.title),j.default.createElement("p",{className:"new-home__banner-subtitle"},e.subTitle))):null},hn=gs;s();i();var X=_(y());var hs=({handleClick:e})=>X.default.createElement("div",{className:"skeleton-wrapper",onClick:e},X.default.createElement(le.Input,{active:!0,className:"setting"}),X.default.createElement(le.Input,{active:!0,className:"balance"}),X.default.createElement("div",{className:"operate-button-list"},Array(4).fill("").map((t,n)=>X.default.createElement("div",{className:"operate-button-item",key:n},X.default.createElement(le.Avatar,{active:!0,className:"circle"}),X.default.createElement(le.Input,{active:!0,className:"rectangle"})))),X.default.createElement(le,{active:!0,paragraph:{className:"paragraph-item",rows:4,width:"100%"}})),Nn=hs;s();i();var ue=_(y());var Ze="CREATE_FAIL_CODE",yt="BALANCE_FAIL_CODE",fe="PENDING",vn=(e,t,n)=>{let{needSyncMap:l}=d(({metamask:E})=>({needSyncMap:E.needSyncMap})),r=Boolean(l[t]),[m,c]=(0,ue.useState)(!e||r),[a,h]=(0,ue.useState)(m?fe:""),N=async()=>{try{await Lo()}catch{h(yt);return}h("")},b=async()=>{let E=await R().getWalletTypeCreated(t);h(fe);try{await R().createWalletToServer({walletId:t,walletType:E,noticeBackend:!0})}catch{h(Ze);return}await N()},u=async()=>{try{await R().syncWalletToServer(t)}catch(E){console.log(E)}await N()},T=async()=>{e?r?await u():await N():await b()};return(0,ue.useEffect)(()=>{T()},[]),(0,ue.useEffect)(()=>{n.length>0&&(e||a!==Ze)&&a!==fe&&c(!1)},[n,a,e]),[{errorType:a,skeleton:m},{createWalletToServer:b}]};s();i();var U=_(y());var wn=new Ot,kn=()=>{let e=G(),[t,n]=(0,U.useState)("https://beta.okex.org"),l=d(r=>r.metamask.preferences.languageKeyMode);return(0,U.useEffect)(()=>{(async()=>{let{envApiDomain:r}=await wn.get("envApiDomain");r&&n(r)})()},[]),[U.default.createElement(F,{key:"languageKey",title:"Dev and beta env use to look up the language key"},U.default.createElement(se,{onClick:()=>{e(yo(!l)).then(()=>{window.location.reload()})}},U.default.createElement(O,{className:"okx-wallet-plugin-slow",style:{fontSize:"24px"}}))),U.default.createElement(F,{key:"changeNetwork",title:`${`Dev and beta env change api domain ${t}`}`},U.default.createElement(Bt,{searchable:!1,displayArea:()=>U.default.createElement(O,{className:"okx-wallet-plugin-fast",style:{fontSize:"24px"}}),key:"network",label:U.default.createElement("div",null,`Api Domain ${t}`),onChange:async r=>{await wn.set({envApiDomain:r.value}),window.location.reload()},value:window.localStorage.envApiDomain,options:[{label:"dev(http://kong-proxy.dev-e-okex.svc.dev.local:8443)",value:"http://kong-proxy.dev-e-okex.svc.dev.local:8443"},{label:"beat(https://beta.okex.org)",value:"https://beta.okex.org"},{label:"online(https://wallet.okex.org)",value:"https://wallet.okex.org"}]}))]};s();i();var yn=null,It=e=>{let{firstPermissionsRequestId:t,balance:n,addedCoins:l,scrollTop:r,setHomePageScrollTop:m,resetCustomCoinInfo:c,isNotification:a,totalUnapprovedCount:h,isNotBackup:N,getHomepageBannerInfo:b,nftFilter:u,activeId:T,nftListLoading:E,nftListLoadingError:M,nftFilterStatus:A,nftList:P,nftPageNo:Ke,totalNftCount:re,amountForMonitor:Z,nftAmountNumber:ge,walletId:oe,watchedSeed:Xe,setWatchedSeed:he,removeToastHashMap:Be,isWalletCreated:De,getChainInfo:Oe,isHardwareWallet:Fe,isPopup:Qe}=e,x=v(),Je=G(),[{errorType:Re,skeleton:xn},{createWalletToServer:Cn}]=vn(De,oe,l),{activeTab:En,hiddenAssets:We}=d(f=>({activeTab:f.activeTab,hiddenAssets:jt(f)})),Tt=256,Sn=d(Ye),et={};Sn.forEach(f=>{f.origin===En.origin&&(et=f)});let An=et.origin&&et.origin.replace(/^https?:\/\//iu,""),tt=d($),L=(0,o.useRef)(null),Ne=(0,o.useRef)(null),[Pn,bt]=(0,o.useState)(!1),[Ln,ot]=(0,o.useState)(0),Bn=x("wallet_home_btn_manage_crypto"),z=V(),Dn=190,On=24;nn();let xt=(f=3)=>{W.error({title:x("wallet_extension_toast_asset_error_try_again"),duration:f,placement:W.DIRECTION.top})};(0,o.useEffect)(()=>{switch(Re){case Ze:xt();break;case yt:xt(1);break;default:break}},[Re]),(0,o.useEffect)(()=>{T==1?ot(On):T===2&&(P.length===2&&!A?ot(54):ot(0))},[T]);let[Ct,Et]=(0,o.useState)(!1);(0,o.useEffect)(()=>{Ut({wallet_id:oe,coin_balance:Z,nft_balance:ge})},[Z,ge]),(0,o.useEffect)(()=>{(L==null?void 0:L.current)&&Ne.current&&(L.current.scrollTop>=60&&Ne.current.classList.add("is-stuck"),L.current.addEventListener("scroll",f=>Ne.current.classList.toggle("is-stuck",f.target.scrollTop>=60),!1))},[L,Ne]);let nt=d(Do),Fn=d(Bo),St=()=>{let f=ae.warn({alignBottom:!1,title:x("wallet_dapp_conncetion_modal_backup_your_wallet"),text:x("wallet_dapp_conncetion_alert_backup_wallet"),cancelText:x("wallet_transfer_btn_cancel_transaction"),confirmText:x("wallet_home_backup_warning_btn_backup_now"),onConfirm:()=>{f.destroy(),z.push(`${$e}?nextPath=${Ue}`)},onCancel:()=>{Je(Io(e.firstPermissionsRequestId)),f.destroy()}})};(0,o.useEffect)(()=>{a&&h===0?!nt&&!Fn&&globalThis.platform.closeCurrentWindow():t&&tt&&St()},[tt,nt,t,z,a,h]);let st=d(f=>Me(f)[oe].account.aptos),Wn=d(Fo),[it,Hn]=(0,o.useState)([]);(0,o.useEffect)(()=>{st&&To(st).then(f=>{Hn(f.list)})},[Wn]);let ve=d(to),we=So().get("toastHash");(0,o.useEffect)(()=>{if(ve[we]){if(yn===ve[we].message)return;yn=ve[we].message,W.success({title:x("wallet_extension_popupsubtitle_imported",{walletName:ve[we].message}),duration:1.5,placement:W.DIRECTION.top}),Be()}},[ve,we]);let Mn=f=>({projects:f.collectionFilter.join(","),chainIds:f.chainListFilter.join(","),saleStatus:f.saleStatusFilter.join(",")}),[$n,Un]=(0,o.useState)(Mn(u));Ko($n);let rt=async f=>{let ke={projects:u.collectionFilter.join(","),chainIds:u.chainListFilter.join(","),saleStatus:u.saleStatusFilter.join(","),pageNo:f};Un(ke)};Co(()=>{rt(1)},[u]),ze(()=>{if(b(),m(0),tt){let f=(0,In.cloneDeep)(Xe);f[oe]=!1,he(f)}c(),Oe()});let Yn=68,zn=148+24,He="0px";N&&(He=`${zn}px`),An&&(He=`${Yn}px`);let At=o.default.createElement("div",{className:`${l.length>8&&r>Dn?"ok-home-bottom-panel__sticky":""} ok-home-bottom-panel`,style:{bottom:He}},o.default.createElement(p,{circle:!0,category:p.CATEGORY.outline,type:p.TYPE.secondary,size:p.SIZE.md,className:"home-button sticky",onClick:()=>{z.push(ro)}},o.default.createElement(O,{className:"okx-wallet-plugin-edit-wallet",style:{fontSize:"20px",marginRight:"7px"}}),Bn)),Gn=x("wallet_extension_nft_popup_title_filter"),Vn=A?`\uFF08${re}\uFF09`:"",qn=o.default.createElement("div",{className:(0,_e.default)({"ok-home-bottom-panel__sticky":(A||r>Tt)&&P.length===re&&P.length!==0},{"ok-home-bottom-panel__fixed":(A||r>Tt)&&P.length<re||P.length===0&&A},"ok-home-bottom-panel--nft","ok-home-bottom-panel__disabled"),style:{bottom:He}},o.default.createElement(p,{icon:"okx-wallet-plugin-filter",type:p.TYPE.secondary,category:A?p.CATEGORY.fill:p.CATEGORY.outline,iconType:p.ICON_POSITION.leading,className:"home-button-nft sticky",onClick:()=>{z.push(so)}},Gn+Vn)),jn=o.default.createElement("div",{className:"ok-home--empty-div",style:{height:Ln}}),{run:Zn}=ne(()=>{L.current.scrollTop>=32&&!Ct?Et(!0):L.current.scrollTop<32&&Ct&&Et(!1)},{wait:50}),Pt=[x("wallet_extension_nft_tab_coins"),o.default.createElement("div",null,x("wallet_extension_nft_tab_nfts"),it.length>0&&o.default.createElement("span",{className:"new-home-nft-aptos-notify"})),x("wallet_extension_tab_defi")],Kn={1:()=>o.default.createElement(ut,{hidden:We,listData:l,listType:Yo.HOME_PAGE}),2:()=>M?o.default.createElement("div",{className:(0,_e.default)("ok-home--error-parent")},o.default.createElement("img",{src:"./static/images/nft/nft-error.svg",alt:"error"}),o.default.createElement("div",{className:(0,_e.default)("ok-home--error-text")},x("wallet_extension_nft_text_loading_failed")),o.default.createElement(p,{category:p.CATEGORY.fill,type:p.TYPE.highlight,size:p.SIZE.sm,width:132,circle:!0,onClick:()=>{rt(1)}},x("wallet_extension_nft_btn_refresh"))):E&&P.length===0?o.default.createElement("div",{className:(0,_e.default)("ok-home--loading-parent")},o.default.createElement(Q,{size:Q.SIZE.xl})):o.default.createElement(o.default.Fragment,null,it.length>0&&o.default.createElement(on,{data:it,accountAddress:st}),o.default.createElement(tn,{filterStatus:A,list:P})),3:()=>o.default.createElement(fn,{hidden:We})},Xn=()=>o.default.createElement(Te,{className:"ok-home--tab",activeId:T,size:Te.SIZE.xl,color:Te.COLOR.grey,paneSpacing:0,onChange:f=>{Je(Ve.setActiveId({id:f}))},average:!0},Array(Pt.length).fill(1).map((f,ke)=>o.default.createElement(Te.TabPane,{tab:Pt[ke],key:ke,id:ke+1}))),Qn=o.default.createElement("div",{className:"ok-home-button-group"},o.default.createElement(Le,{iconName:"okx-wallet-plugin-arrow-pointer-up",text:x("wallet_home_btn_send"),onClick:()=>{z.push({pathname:mt,state:{nextPage:oo,isSend:!0}})}}),o.default.createElement(Le,{iconName:"okx-wallet-plugin-arrow-pointer-down",text:x("wallet_home_btn_receive"),onClick:()=>{N?bt(!0):z.push({pathname:mt,state:{nextPage:io,isReceive:!0}})}}),o.default.createElement(Le,{iconName:"okx-wallet-plugin-swap-1",text:x("wallet_extension_homepage_feature_name_swap"),onClick:()=>{Fe&&Qe?(R().openExtensionInPopupWithCache(ct),window.close()):z.push(ct)}}),o.default.createElement(Le,{iconName:"okx-wallet-plugin-order",text:x("wallet_extension_header_text_history"),onClick:()=>{z.push(mo)}})),{run:Jn}=ne(()=>{let f=L.current.scrollTop;m(f),!E&&f>268*Math.ceil(P.length/2)+240-600&&re>P.length&&rt(Ke+1)},{wait:50}),Rn=o.default.createElement("div",{className:"ok-home--nft-loading-panel"},o.default.createElement("div",{className:"ok-home-page--nft-loading"},o.default.createElement(Q,{size:Q.SIZE.lg,style:{height:"30px",width:"30px"}}))),es=()=>{var f;return T===2&&E&&P.length>0&&((f=L==null?void 0:L.current)==null?void 0:f.scrollTop)>480?Rn:T===2?qn:T===1?At:T===3?null:At},ts=async()=>{Re!==fe&&(W.destroyAll(),await Cn())},Lt=process.env.ASSETS_BUILD_TYPE===lt.DEV||process.env.ASSETS_BUILD_TYPE===lt.DAILY;return o.default.createElement("div",{className:"ok-home-page main-container",ref:L,onScroll:()=>{Zn()},onScrollCapture:()=>{Jn()}},xn&&o.default.createElement(Nn,{handleClick:ts}),o.default.createElement("div",{className:"new-home__header-top"},o.default.createElement("div",{className:`new-home_header-menu ${Lt?"new-home_header-menu__dev":""}`},Lt&&o.default.createElement(kn,null),o.default.createElement(F,{title:x("wallet_extension_top_hover_settings"),gutter:6},o.default.createElement(se,{onClick:()=>{z.push(ao)}},o.default.createElement(O,{className:"okx-wallet-plugin-setting",style:{fontSize:"24px"}}))),o.default.createElement(F,{title:x("wallet_extension_top_hover_connect"),offset:[-10,6],gutter:6},o.default.createElement(se,{onClick:()=>{z.push(no)}},o.default.createElement(O,{className:"okx-wallet-plugin-connect",style:{fontSize:"24px"}})))),o.default.createElement("div",{className:"new-home__account-menu",ref:Ne},o.default.createElement(F,{title:x("wallet_extension_top_manage_wallet"),gutter:6},o.default.createElement(dn,{className:(0,_e.default)("new-home__info-container")})),o.default.createElement("div",{className:"new-home__account-icon-line"}),o.default.createElement(gn,{freeze:()=>{L.current.style.overflowY="hidden"},unfreeze:()=>{L.current.style.overflowY="auto"}})),o.default.createElement("div",{className:"new-home__account"},o.default.createElement("div",{className:"new-home__account-assets",onClick:()=>{Je(ko(!We))}},o.default.createElement(Nt,{hidden:We,number:n})),Qn,o.default.createElement(hn,null)),Xn(),Kn[T](),es(),jn),De&&o.default.createElement(vt,null),o.default.createElement(ln,null),nt&&o.default.createElement(mn,null),o.default.createElement(Go,{backupShow:Pn,setBackupShow:bt}),o.default.createElement(qo,{showBackup:St}),o.default.createElement(Jo,null))};It.propTypes={balance:I.default.oneOfType([I.default.number,I.default.string]),addedCoins:I.default.array,scrollTop:I.default.number,setHomePageScrollTop:I.default.func,resetCustomCoinInfo:I.default.func,getHomepageBannerInfo:I.default.func,isNotBackup:I.default.bool,isNotification:I.default.bool,totalUnapprovedCount:I.default.number,firstPermissionsRequestId:I.default.string,nftFilter:I.default.object.isRequired,activeId:I.default.number.isRequired,nftListLoading:I.default.bool.isRequired,nftListLoadingError:I.default.bool,nftFilterStatus:I.default.bool.isRequired,totalNftCount:I.default.number.isRequired,nftPageNo:I.default.number.isRequired,amountForMonitor:I.default.string,nftAmountNumber:I.default.string,watchedSeed:I.default.object};It.defaultProps={balance:0,addedCoins:[],scrollTop:0,setHomePageScrollTop:()=>{},resetCustomCoinInfo:()=>{},getHomepageBannerInfo:()=>{},isNotBackup:!1,isNotification:!1,totalUnapprovedCount:0,firstPermissionsRequestId:"",nftListLoadingError:!1,amountForMonitor:"0",nftAmountNumber:0,watchedSeed:!1};var Tn=It;var Ns=e=>e.map(t=>({...t,currencyAmountFormated:null,coinAmount:null})),vs=e=>{var Oe,Fe;let{metamask:t}=e,{createdMap:n,needSyncMap:l={}}=t,r=qt(e),m=Mt(),c=m===Wt,a=m===Ht,h=co(e),N=h&&h.metadata?h.metadata.id:null,b=$o(e),u=Ge(e),T=Object.keys(b).some(Qe=>b[Qe].length!==0),E=Wo(e),{list:M,total:A,pageNo:P}=E,{nftAmountNumber:Ke}=Zt(e),re=Qt(e),Z=me(e),ge=Uo(e),oe=ge[Z],Xe=ge.platformAssetAmount[Z],he=((Oe=e.metamask)==null?void 0:Oe.balanceCoinList)&&((Fe=e.metamask)==null?void 0:Fe.balanceCoinList[Z])||Kt(e),Be=Boolean(n[Z]),De=Boolean(l[Z]);return(!Be||De)&&(oe="--",he=Ns(he)),{isPopup:c,isNotification:a,totalUnapprovedCount:r,firstPermissionsRequestId:N,nftFilter:b,balance:oe,addedCoins:he,scrollTop:Xt(e),isNotBackup:$(e),activeId:u,nftListLoading:Ho(e),nftListLoadingError:Mo(e),nftFilterStatus:T,nftList:M,nftPageNo:P,totalNftCount:A,walletId:Z,amountForMonitor:Xe,nftAmountNumber:Ke,watchedSeed:re,isWalletCreated:Be,isHardwareWallet:Vt(e)}},ws=e=>({setHomePageScrollTop(t){e(fo(t))},resetCustomCoinInfo(){_o()},async getHomepageShowCoinList(){await No()},async getHomepageBannerInfo(){await go()},setWatchedSeed(t){e(uo(t))},removeToastHashMap:bo,getChainInfo:ho}),Gl=Yt(vs,ws)(bn.default.memo(Tn));export{Ns as clearAmount,Gl as default};
//! dapp处理完请求均需要关闭首页， 插件内部唤起不需要关闭首页

window.inOKXExtension = true;
window.ASSETS_BUILD_TYPE = "publish";

