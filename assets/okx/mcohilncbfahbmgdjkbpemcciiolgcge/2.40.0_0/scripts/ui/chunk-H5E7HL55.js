import{a as Q}from"./chunk-LN5KNA7T.js";import{d as B,f as N,g as et}from"./chunk-HX34N4W4.js";import{a,b as ot}from"./chunk-F7QJ6WQ5.js";import{a as dt}from"./chunk-TNVBYBO5.js";import{Da as bt,L as tt,ea as ht,qa as k}from"./chunk-KRRNVCWZ.js";import{Aa as xt,Ca as K,La as _t,Ra as R,Td as gt,Xd as Lt,ca as pt,e as C,ee as It,ga as $,i as x,ja as U,k as y,me as At,na as Zt,vb as yt,wa as D,wb as W,xb as Y}from"./chunk-YC2Z7II3.js";x();y();var m=C(U());var jt=C(dt());x();y();var I=C(U()),q=C(dt());x();y();var _=C(U());x();y();x();y();var G="LEGAL",p="DIGITAL";var rt=t=>{typeof t!="string"&&(t=t.toString());let o=t==null?void 0:t.length;return o<6?56:o>=6&&o<=7?48:o>=8&&o<=9?40:o>=10&&o<12?32:o===12?30:o>=13&&o<=15?24:o>=16&&o<=18?20:o>=19&&o<=24?16:12};var V=(t,o)=>{if(!o)return t;let e=$.pow(10,o);return Y(Math.floor(W(t,e)),e)},Yt=2,st=(t,o,e,r)=>{let s=t===p?o:Y(o,e),n=t===p?W(o,e):o;return[r?V(s,r):s,V(n,Yt)]},St=t=>{if(typeof t=="object"){let{mode:o=p,value:e}=t,r=o||p,s=r===p?e==null?void 0:e[0]:(e==null?void 0:e[1])||0;return{mode:r,value:s,thousandthValue:$.thousandFormat(s)}}return{mode:p,value:t||0,thousandthValue:$.thousandFormat(t||0)}},nt=(t,o=0)=>t?$.thousandFormat(V(t,o)):0,Vt="HarmonyOS Sans,PingFang SC,Microsoft Yahei,Heiti SC,WenQuanYi Micro Hei,Helvetica Neue,Helvetica,Arial,sans-serif";function Tt(t,o=16){let r=document.createElement("canvas").getContext("2d");r.font=`700 ${o}px ${Vt}`;let s=r.measureText(t),n=Math.abs(s.actualBoundingBoxLeft)+Math.abs(s.actualBoundingBoxRight);return Math.max(s.width,n)}var Bt=t=>typeof t=="string"&&t.startsWith("0")&&!t.startsWith("0.")?t.slice(1):t,Nt=t=>{var o,e;return((e=(o=t==null?void 0:t.split("."))==null?void 0:o[0])==null?void 0:e.length)>=30},Et=(t,o)=>{var r,s;return((s=(r=t==null?void 0:t.split("."))==null?void 0:r[1])==null?void 0:s.length)>o};var Qt="usd",Ht=5e3,qt=(t,o=!0)=>{let e=(0,_.useRef)(),r=ht(t),[s,n]=(0,_.useState)(0),d=async()=>{let i={coinIds:[t]},A={headers:{currency:Qt}},{data:S}=await gt(Lt.postMarketUrl,i,A),{currencyAmount:c}=S[0]||{};n(c||0)};return(0,_.useEffect)(()=>Number(r)?(n(r),e.current&&clearInterval(e.current),()=>{}):(d(t),o?(e.current=setInterval(i=>{d(i)},Ht,t),()=>{clearInterval(e.current)}):()=>{}),[t,r]),s},Xt=t=>{let{coin:o}=tt(t),e=qt(t);return{...o,coinPrice:e}},vt=({value:t,precision:o,symbol:e})=>{let r=(0,_.useMemo)(()=>{if(!t)return"0";let s=/,|\.$/.test(t);return`${nt(t,t.endsWith("0")?0:o)}${s?".":""}`},[t,o]);return(0,_.useMemo)(()=>{let s=rt(`${r}${e}`),n=Tt(r,s);return[s,n]},[e,r])},wt=(t,o)=>{let{flatCurrencyId:e}=t||{},[r,s]=(0,_.useState)(!1),{options:n,selectedCurrency:d}=It(({metamask:l})=>({options:l.currencies,selectedCurrency:l.selectedCurrency})),i=e&&n.find(({currencyId:l})=>l===e),[A,S]=(0,_.useState)(i||d),c=(0,_.useCallback)(pt(l=>{s(typeof l=="boolean"?l:g=>!g)},300),[]),T=(0,_.useCallback)(l=>{S(l),c(!1),o==null||o(l)},[]);return[{visible:r,options:n,flatCurrency:A,defaultCurrency:d},{onToggleVisible:c,onFlatCurrencyChange:T}]},H=2,Ft=({coinId:t,decimals:o,visible:e,autoFocus:r,maximumMode:s,maximumAmount:n,initialValue:d,flatCurrency:i,onChange:A,onModeChnage:S,onAmountChange:c})=>{let{mode:T,value:l,thousandthValue:g}=St(d),w=(0,_.useRef)(),[u,j]=(0,_.useState)(T),[f,Z]=(0,_.useState)(l||"0"),[it,ct]=(0,_.useState)(g),[F,E]=(0,_.useState)(!1),L=Xt(t),h=(0,_.useMemo)(()=>W(i==null?void 0:i.usdToThisRate,L.coinPrice),[i==null?void 0:i.usdToThisRate,L.coinPrice]),lt=(0,_.useCallback)(pt(async()=>{if(Number(h)){if(E(!0),await yt(310),E(!1),u===p){let z=W(f,h);Z(z)}else{let z=Y(f,h);Z(z)}let v=u===G?p:G;j(v),S==null||S(v)}},300),[u,f,h,L,s,n]),at=(0,_.useCallback)((v,z)=>{f==="0"&&!v||Nt(v)||(Z(v||"0"),ct(Bt(z.target.value)),c==null||c(st(u,v,h),!0))},[u,f,h]),ut=(0,_.useCallback)(()=>{!e&&r&&w.current.input.focus()},[e,r]);(0,_.useEffect)(()=>{r&&w.current.input.focus()},[r]),(0,_.useEffect)(()=>{e||w.current.input.focus()},[e]);let X=(0,_.useMemo)(()=>{let v=u!==p,z=u===p?L.symbol:i==null?void 0:i.isoCode,J=u===G?H:o||L.decimals;return{symbol:z,switchFlatable:v,value:Et(f,J)?V(f,J):f,precision:u===p?o||L.decimals:H,contrastValue:nt(f,u===G?H:o||(L==null?void 0:L.vdecimalNum))}},[u,o,f,L,i]),mt=(0,_.useMemo)(()=>{let v=u===p?i==null?void 0:i.isoCode:L.symbol,z=u===p,J=u===p?W(f,h):Y(f,h);return{value:nt(J,u===p?H:o||(L==null?void 0:L.vdecimalNum)),symbol:v,switchFlatable:z}},[u,i,o,L,f,h]);return(0,_.useEffect)(()=>{!s||!Number(h)||Z(u===p?n:V(W(n,h),H))},[s,n,h]),(0,_.useEffect)(()=>{c==null||c(st(u,f,h)),A==null||A({mode:u,coin:L,flatCurrency:i,flatCurrencyId:i==null?void 0:i.currencyId,value:st(u,f,h,L.vdecimalNum)})},[u,h,f]),[{inputRef:w,realInput:it,inputEnter:X,contrastEnter:mt,switchAnimating:F,switchModeable:!!Number(h)},{onInputBlur:ut,onInputChange:at,onSwitchPricingMode:lt}]};x();y();var b=C(U());var Ct=C(dt()),Dt=C(Zt());var Jt=(t,o)=>{let e=k(),{defaults:r,alls:s}=(0,Dt.groupBy)(t,({currencyId:n})=>n===(o==null?void 0:o.currencyId)?"defaults":"alls");return[{type:"default",options:r,title:e("wallet_extension_send_item_default")},{type:"all",options:s,title:e("wallet_extension_send_item_all")}]},Kt=({value:t,options:o,defaultCurrency:e,onChange:r})=>{let s=k(),[n,d]=(0,b.useState)(""),i=(0,b.useCallback)(c=>{console.log(c.target.value),d(c.target.value)},[]),A=(0,b.useMemo)(()=>o.filter(c=>{var T,l;return((l=(T=c.isoCode)==null?void 0:T.toUpperCase())==null?void 0:l.indexOf(n==null?void 0:n.toUpperCase()))>-1}),[n,o]),S=Jt(o,e);return b.default.createElement(a.Box,{className:"select-fiat-currency"},b.default.createElement(a.Box,{className:"select-fiat-currency__search"},b.default.createElement(K.Search,{value:n,placeholder:s("wallet_extension_send_input_search_fiat"),onChange:i})),n?b.default.createElement(Q,{dataSource:A,emptyText:s("wallet_extension_text_noresults"),renderItem:c=>b.default.createElement(Q.Cell,{title:c==null?void 0:c.isoCode,className:"select-fiat-currency__item",onClick:()=>{r==null||r(c)}},(c==null?void 0:c.currencyId)===(t==null?void 0:t.currencyId)&&b.default.createElement(N,{icon:"okx-wallet-plugin-check",size:N.SIZE.xs}))}):b.default.createElement(a.Box,{className:"select-fiat-currency__content"},S.map(({type:c,title:T,options:l})=>b.default.createElement(a.Box,{className:(0,Ct.default)("select-fiat-currency__group",`select-fiat-currency__group__${c}`)},b.default.createElement(B.Text,{size:B.SIZE.xs,className:"select-fiat-currency_title"},T),b.default.createElement(Q,{dataSource:l,renderItem:g=>b.default.createElement(Q.Cell,{title:g==null?void 0:g.isoCode,className:"select-fiat-currency__item",onClick:()=>{r==null||r(g)}},(g==null?void 0:g.currencyId)===(t==null?void 0:t.currencyId)&&b.default.createElement(N,{icon:"okx-wallet-plugin-check",size:N.SIZE.xs}))})))))},Ot=b.default.memo(Kt);x();y();var ft=({coinId:t,onChange:o,autoFocus:e=!0,decimals:r,maximumMode:s,maximumAmount:n,onAmountChange:d,onModeChnage:i,onFlatChange:A,initialValue:S,className:c,...T})=>{let l=k(),[{visible:g,options:w,flatCurrency:u,defaultCurrency:j},{onToggleVisible:f,onFlatCurrencyChange:Z}]=wt(S,A),[{inputRef:it,realInput:ct,inputEnter:F,contrastEnter:E,switchModeable:L,switchAnimating:h},{onInputChange:lt,onSwitchPricingMode:at,onInputBlur:ut}]=Ft({coinId:t,visible:g,decimals:r,autoFocus:e,maximumMode:s,initialValue:S,maximumAmount:n,flatCurrency:u,onChange:o,onAmountChange:d,onModeChnage:i}),[X,mt]=vt(F),v=(0,I.useMemo)(()=>rt(`${E.value}${E.symbol}`),[E.value,E.symbol]);return I.default.createElement(a.Box,{className:(0,q.default)("coinAmount__input",c),...T},I.default.createElement(a.FlexBox,{justify:"center",align:a.ALIGN.center,style:{fontSize:X,position:"relative",height:"74px",fontWeight:700}},I.default.createElement(_t,{maxWidth:"280",title:X===12&&I.default.createElement(a.Box,{style:{wordBreak:"break-all"}},`${ct} ${F.symbol}`)},I.default.createElement(a.FlexBox,{style:{maxWidth:"232px"},className:(0,q.default)("coinAmount__input__input__enter",{coinAmount__input__input__enter__animation:h})},h?I.default.createElement(B.Text,{ellipsis:!0,style:{maxWidth:"200px",color:"inherit",fontSize:"inherit"}},F.contrastValue):I.default.createElement(K.Number,{min:0,autoFocus:!0,ref:it,max:Number.MAX_VALUE,precision:F.precision,style:{width:mt},value:F.value,onChange:lt,innerClassName:"coinAmount__input__box",inputClassName:"coinAmount__input__core",onBlur:ut}),I.default.createElement(a.Box,{style:{position:"relative",marginLeft:"4px"},onClick:F.switchFlatable?f:()=>{}},F.symbol,F.switchFlatable&&I.default.createElement(N,{size:N.SIZE.sm,src:"/static/images/center_down_fill.svg",className:"coinAmount__input__legal__icon",style:{top:"50%",transform:"translateY(-50%)",left:"100%"}})))),I.default.createElement(N.IconButton,{hovered:!1,size:N.SIZE.lg,tooltip:L?!1:{title:l("wallet_extension_receive_tooltip_not_support"),maxWidth:"350px",placement:_t.DIRECTION.bottomLeft},className:(0,q.default)("coinAmount__input__swtich__mode",{coinAmount__input__swtich__mode__disabled:!L,coinAmount__input__swtich__mode__abled:L}),icon:"okx-wallet-plugin-exchange",onClick:at})),I.default.createElement(a.FlexBox,{justify:"center",style:{position:"relative",marginTop:"8px",fontSize:v}},I.default.createElement(a.FlexBox,{align:a.ALIGN.center,className:(0,q.default)("coinAmount__input__contrast__enter",{coinAmount__input__contrast__enter__animation:h}),onClick:E.switchFlatable?f:()=>{}},I.default.createElement(B.Text,{ellipsis:!0,style:{maxWidth:"200px",color:"inherit",fontSize:"inherit"}},E==null?void 0:E.value),I.default.createElement(a.Box,{style:{position:"relative",marginLeft:"4px"}},E==null?void 0:E.symbol,E.switchFlatable&&I.default.createElement(N,{className:"coinAmount__input__legal__icon",size:N.SIZE.sm,src:"/static/images/center_down_fill.svg",style:{left:"100%",top:"50%",transform:"translateY(-50%)"}})))),I.default.createElement(xt,{isFull:!0,noMargin:!0,noContentPadding:!0,visible:g,title:l("wallet_extension_send_title_select_fiat"),onClose:f},I.default.createElement(Ot,{value:u,options:w,defaultCurrency:j,onChange:Z})))};ft.LEGALMODE=G;ft.DIGITALMODE=p;var Mt=I.default.memo(ft);x();y();var M=C(U());x();y();var zt=(t={})=>Object.entries(t).filter(([,o])=>!!o).map(([o,e])=>`${o}=${e}`).join("&"),kt=t=>{typeof t!="string"&&(t=t.toString());let o=t==null?void 0:t.length;return o<16?28:o>=17&&o<=21?22:o>=22&&o<=26?18:14};var Gt=t=>{let{coinId:o}=At(),{coin:e}=tt(t||o),r=bt(e.localType);return(0,M.useMemo)(()=>({...e,walletAddress:r,coinLogo:e==null?void 0:e.image}),[e,r])},Pt=()=>{let[t,o]=(0,M.useState)({}),[e,r]=(0,M.useState)(!1),s=(0,M.useCallback)(()=>{r(i=>!i)},[]),n=(0,M.useCallback)(i=>{s(),o(i)},[]),d=(0,M.useCallback)(()=>{o({})},[]);return[{visible:e,receiveState:t},{onConfirm:n,onClearState:d,onToggleVisible:s}]},Rt=16e3,$t=({coinId:t,decimal:o,chainName:e,baseCoinId:r,receiveState:s,appBaseChain:n,walletAddress:d,address:i})=>(0,M.useMemo)(()=>{var f;e=(f=e==null?void 0:e.trim())==null?void 0:f.toLowerCase();let S="",c=r===0;(c&&t!==Rt||!c&&n)&&(S=`${n}:`);let{mode:T,value:l,flatCurrency:g}=s||{},w={network:e,valuation:T!==p?l==null?void 0:l[1]:!1,currency:T!==p?g==null?void 0:g.isoCode:!1},u=(l==null?void 0:l[0])||0;c?Object.assign(w,{amount:u}):Object.assign(w,{contractAddress:i,decimal:o||18,value:u});let j=zt(w);return`${S}${d}?${j}`},[o,e,n,s,d,i]);x();y();var P=C(U());var to=({coinId:t,vdecimalNum:o,initialValue:e,onToggleVisible:r,onConfirm:s})=>{var A;let n=k(),[d,i]=(0,P.useState)({});return P.default.createElement(a.Container,{className:"receive__set_receive_amount"},P.default.createElement(et,{sticky:!1,title:n(e!=null&&e.mode?"wallet_extension_receive_btn_modify_amount":"wallet_extension_receive_btn_set_amount"),onBack:r,onClose:r,style:{background:"#ffffff"}}),P.default.createElement(Mt,{coinId:t,decimals:o,style:{marginTop:"90px"},onChange:i,initialValue:e}),P.default.createElement(ot.FooterActions,null,P.default.createElement(D,{size:D.SIZE.lg,type:D.TYPE.highlight,category:D.CATEGORY.fill,disabled:!Number((A=d==null?void 0:d.value)==null?void 0:A[0]),onClick:()=>{s(d)}},n("wallet_extension_receive_btn_confirm"))))},Wt=P.default.memo(to);x();y();var oo=({coinLogo:t,symbol:o,address:e,chainName:r,aggregation:s})=>m.default.createElement(a.Space,{space:12,direction:a.DIRECTION.horizontal},m.default.createElement(N,{src:t,style:{width:"40px",height:"40px"}}),m.default.createElement(a.Space,{direction:a.DIRECTION.vertical,space:4},m.default.createElement(a.FlexBox,{align:a.ALIGN.center},m.default.createElement(B.Text,{strong:700,size:B.SIZE.lg},o),s&&m.default.createElement(a.Box,{className:"receive__card__tag"},r)),m.default.createElement(B.Address,{wrap:!0,address:e,desensitize:!1,size:B.SIZE.sm,style:{color:"#929292"},copyable:{className:"receive__copy__button",icon:"okx-wallet-plugin-copy"}}))),eo=({mode:t,value:o,coin:e,flatCurrency:r,onClear:s})=>{let[n,d]=o||[],i=(0,m.useMemo)(()=>{let c=$.thousandFormat(t===p?n:d);return`${t===p?"":r.symbol}${c} ${t===p?e==null?void 0:e.symbol:""}`},[t,n,d,r==null?void 0:r.symbol,e==null?void 0:e.symbol]),A=(0,m.useMemo)(()=>{let c=$.thousandFormat(t===p?d:n);return`${t===G?"":r.symbol}${c}`},[t,n,d,r==null?void 0:r.symbol]),S=t===p?"":e==null?void 0:e.symbol;return m.default.createElement(a.FlexBox,{direction:a.DIRECTION.vertical,align:a.ALIGN.center,className:"receive__state"},m.default.createElement(B.AdaptiveText,{strong:700,fontSize:"28px",style:{marginBottom:"6px"},text:i,autoSize:kt},i),m.default.createElement(a.FlexBox,{justify:"center",align:a.ALIGN.center,style:{width:"100%"},className:"receive__state__subtitle"},m.default.createElement(B.Text,{strong:!0,style:{color:"#929292"},ellipsis:{tooltip:!0}},`\u2248 ${A}`),S,m.default.createElement(N.IconButton,{hovered:!1,size:N.SIZE.sm,icon:"okds-fail-circle-fill",className:"receive__state__clear",onClick:s})))},ro=({coinId:t,onBack:o,onClose:e,closeable:r=!0})=>{let s=Gt(t),n=k(),{symbol:d,walletAddress:i,chainName:A,coinLogo:S,aggregation:c}=s,[{visible:T,receiveState:l},{onConfirm:g,onClearState:w,onToggleVisible:u}]=Pt(),j=$t({...s,walletAddress:i,receiveState:l}),f=!!(l!=null&&l.mode);return m.default.createElement(a.Container,{className:"receive",style:{overflow:T?"hidden":"auto"}},m.default.createElement(et,{bordered:!1,onBack:o,onClose:e,closeable:r,className:"receive__navigator"}),m.default.createElement(a.Box,{className:"receive__content"},m.default.createElement(a.Box,{className:(0,jt.default)("receive__qrcode__card",{receive__qrcode__card__has__amount:f})},m.default.createElement(oo,{symbol:d,coinLogo:S,chainName:A,address:i,aggregation:c}),m.default.createElement(a.Box,{className:"receive__devider"}),m.default.createElement(B.Text,{size:B.SIZE.sm,align:B.ALIGN.center,style:{color:"#929292",width:"100%",marginBottom:"12px"}},n("wallet_extension_toast_send_only_network_assets_tothis_address",{chain_name:A})),m.default.createElement(a.FlexBox,{justify:"center"},m.default.createElement(R,{padding:"8px",text:j,level:R.LEVEL.L,type:R.TYPE.svg,size:224,cornersDotOptions:{type:"dot"},cornersSquareOptions:{type:"dot"},dotsOptions:{type:"dots"}})),f&&m.default.createElement(eo,{...l,onClear:w}))),m.default.createElement(ot.FooterActions,{style:{backgroundColor:"transparent"}},m.default.createElement(D,{size:D.SIZE.lg,type:D.TYPE.highlight,category:D.CATEGORY.fill,onClick:u},n(l!=null&&l.mode?"wallet_extension_receive_btn_modify_amount":"wallet_extension_receive_btn_set_amount"))),T&&m.default.createElement(Wt,{...s,onConfirm:g,onToggleVisible:u,initialValue:l}))},Oe=m.default.memo(ro);export{G as a,Mt as b,Oe as c};

window.inOKXExtension = true;
window.ASSETS_BUILD_TYPE = "publish";

