import{k as di}from"./chunk-RUYLKJEC.js";import{a as hi,y as _i}from"./chunk-6EX4J22Y.js";import{a as mi,f as fi}from"./chunk-JL7XP3PK.js";import{$ as pi,V as ui,W as li,a as $n,d as ii,l as si,m as ai,n as ci}from"./chunk-SULN63BG.js";import{a as ni}from"./chunk-TNEPVJCF.js";import"./chunk-GCK4PCMX.js";import{a as oi}from"./chunk-U3VNLMKW.js";import{a as ct}from"./chunk-DFPNDEHH.js";import{a as at}from"./chunk-SJ2MWW5W.js";import{a as ri}from"./chunk-PBP4MB33.js";import{a as Kn,o as zn}from"./chunk-CKFSIZPF.js";import"./chunk-PFUOJJI2.js";import{a as Jn}from"./chunk-P4R64FMZ.js";import{a as qn}from"./chunk-EQU2E42M.js";import{c as Qn}from"./chunk-WQMUAJQQ.js";import{b as Zn}from"./chunk-6TY3WXUG.js";import{h as Xn}from"./chunk-BZBZNG4R.js";import{a as ei}from"./chunk-3TZVDMZB.js";import{a as ar}from"./chunk-Z3F5FSEH.js";import{a as jn,c as Bn}from"./chunk-HXYG5WFL.js";import{a as cr}from"./chunk-POEDNLGY.js";import{a as ti}from"./chunk-R6POV6JH.js";import{a as la,b as pa,d as da}from"./chunk-YVKNB4CA.js";import"./chunk-MLPBPWR7.js";import"./chunk-IWZNXKTF.js";import"./chunk-MFUKPLPN.js";import{a as Yn}from"./chunk-KWSHYTX5.js";import{Aa as Fn,B as Rn,Da as Wn,Ga as Hn,J as Ue,La as Gn,Q as Ln,V as Dn,a as et,b as sr,c as ce,d as st,ka as xn,ua as Mn,va as Un,za as kn}from"./chunk-SBW523XW.js";import"./chunk-NEW56Z2U.js";import{a as ua}from"./chunk-TNVBYBO5.js";import{G as ma,b as oa,c as na,cb as Vn,d as ao,g as rt,h as ot}from"./chunk-KRRNVCWZ.js";import{$ as qt,$d as lr,$e as Vr,$i as Ho,$k as In,Aa as De,Ac as Kt,Ad as fe,Ai as Ao,Aj as mn,B as ta,Bc as zt,Be as Ar,Bj as fn,C as Bt,Cf as uo,Cj as hn,Dd as Qe,De as Cr,Df as lo,Di as Co,Dj as _n,Ee as Pr,Ef as po,Ei as Po,Ej as gn,Fd as er,Fe as Nr,Fi as No,Fj as En,Ge as Ir,Gj as Tn,Hd as J,He as Rr,Hi as Io,Hj as Sn,Id as tr,Ie as Lr,Ii as Ro,Je as Dr,Ji as Lo,Kd as ae,Ke as xr,Ki as he,Li as Do,Lj as bn,Me as Mr,Mi as xo,Ne as Ur,Nh as _o,Nj as wn,Od as rr,Oe as kr,Oj as On,Pa as be,Pe as Fr,Pj as vn,Qa as $t,Qe as Wr,Sd as or,Te as Hr,Ud as nr,Ue as Gr,Ug as nt,Va as sa,Vc as Jt,Wa as Xe,Wd as ca,Wi as Mo,Xd as ir,Xe as jr,Xi as Uo,Ya as Vt,Yd as tt,Ye as Br,Yi as ko,Ze as qr,Zi as Fo,_ as ra,_a as me,_d as ur,_e as $r,_i as Wo,_k as Nn,ae as xe,aj as Go,bd as Xt,be as pr,bj as jo,c as F,cd as Ze,ce as I,cj as Bo,dj as qo,e as _,ej as $o,fd as Zt,fe as we,fj as Vo,g as E,ge as dr,gf as Yr,gj as Yo,h as process,he as R,hj as Ko,i as s,ie as mr,ij as zo,j as l,ja as U,je as fr,jf as Kr,jg as mo,jj as Jo,k as a,kf as zr,kj as Xo,lf as Jr,lj as Zo,mf as Xr,na as Se,ne as hr,nj as Qo,oa as W,oc as aa,oh as ho,oj as en,ok as it,pe as _r,pf as Zr,pj as tn,pk as yn,qc as q,qe as gr,qf as Qr,qi as go,qj as rn,qk as An,re as Er,rf as eo,ri as Eo,rj as on,rk as Cn,sc as Yt,se as Tr,sf as to,si as Me,sj as nn,te as Sr,tf as ro,ti as To,tj as sn,ue as br,uf as oo,ui as So,uj as an,uk as Pn,ve as wr,vf as no,vi as bo,vj as cn,wa as H,we as Or,wf as io,wi as wo,wj as un,xe as vr,xf as so,xi as Oo,xj as ln,y as ea,ye as yr,yi as vo,yj as pn,z as jt,za as ia,zd as Qt,zf as co,zg as fo,zi as yo,zj as dn}from"./chunk-YC2Z7II3.js";var Ei=F((Bu,gi)=>{"use strict";s();a();var fa=ta();gi.exports=class extends fa.Duplex{constructor(r){super({objectMode:!0}),this._port=r,this._port.onMessage.addListener(t=>this._onMessage(t)),this._port.onDisconnect.addListener(()=>this._onDisconnect())}_onMessage(r){if(l.Buffer.isBuffer(r)){let t=l.Buffer.from(r);this.push(t)}else this.push(r)}_onDisconnect(){this.destroy()}_read(){}_write(r,t,o){try{if(l.Buffer.isBuffer(r)){let n=r.toJSON();n._isBuffer=!0,this._port.postMessage(n)}else this._port.postMessage(r)}catch{return o(new Error("PortDuplexStream - disconnected"))}return o()}}});var Si=F((Vu,pt)=>{s();a();var Ti=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof window.msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto);Ti?(ut=new Uint8Array(16),pt.exports=function(){return Ti(ut),ut}):(lt=new Array(16),pt.exports=function(){for(var r=0,t;r<16;r++)(r&3)===0&&(t=Math.random()*4294967296),lt[r]=t>>>((r&3)<<3)&255;return lt});var ut,lt});var Oi=F((zu,wi)=>{s();a();var bi=[];for(Oe=0;Oe<256;++Oe)bi[Oe]=(Oe+256).toString(16).substr(1);var Oe;function ha(e,r){var t=r||0,o=bi;return[o[e[t++]],o[e[t++]],o[e[t++]],o[e[t++]],"-",o[e[t++]],o[e[t++]],"-",o[e[t++]],o[e[t++]],"-",o[e[t++]],o[e[t++]],"-",o[e[t++]],o[e[t++]],o[e[t++]],o[e[t++]],o[e[t++]],o[e[t++]]].join("")}wi.exports=ha});var yi=F((Zu,vi)=>{s();a();var _a=Si(),ga=Oi();function Ea(e,r,t){var o=r&&t||0;typeof e=="string"&&(r=e==="binary"?new Array(16):null,e=null),e=e||{};var n=e.random||(e.rng||_a)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,r)for(var c=0;c<16;++c)r[o+c]=n[c];return r||ga(n)}vi.exports=Ea});var Pi=F((tl,Ci)=>{s();a();var Ai=jt().Duplex,Ta=ea().inherits,Sa=yi();Ci.exports=ee;Ta(ee,Ai);function ee(){Ai.call(this,{objectMode:!0}),this._payloads={}}ee.prototype.send=function(e){throw new Error('StreamProvider - does not support synchronous RPC calls. called: "'+e.method+'"')};ee.prototype.sendAsync=function(e,r){let t=e.id,o=Sa();if(e.id=o,Array.isArray(e)&&e.length===0)return r(null,[]);this._payloads[o]=[r,t],this.push(e)};ee.prototype.isConnected=function(){return!0};ee.prototype._onResponse=function(e){let r=e.id,t=this._payloads[r];if(!t)throw new Error(`StreamProvider - Unknown response id for response: ${e}`);delete this._payloads[r];let o=t[0];e.id=t[1],setTimeout(function(){o(null,e)})};ee.prototype._read=ba;ee.prototype._write=function(e,r,t){this._onResponse(e),t()};function ba(){}});var Os=F((Yh,ws)=>{s();a();var{Duplex:bs}=jt(),Ts=pa(),bu=la(),Ss={},Rt=class extends bs{constructor(r={}){let t=Object.assign({},r,{objectMode:!0});super(t),this._substreams={}}createStream(r){if(!r)throw new Error("ObjectMultiplex - name must not be empty");if(this._substreams[r])throw new Error('ObjectMultiplex - Substream for name "${name}" already exists');let t=new Lt({parent:this,name:r});return this._substreams[r]=t,wu(this,o=>{t.destroy(o)}),t}ignoreStream(r){if(!r)throw new Error("ObjectMultiplex - name must not be empty");if(this._substreams[r])throw new Error('ObjectMultiplex - Substream for name "${name}" already exists');this._substreams[r]=Ss}_read(){}_write(r,t,o){let n=r.name,c=r.data;if(!n)return console.warn(`ObjectMultiplex - malformed chunk without name "${r}"`),o();let u=this._substreams[n];if(!u)return console.warn(`ObjectMultiplex - orphaned data for stream "${n}"`),o();u!==Ss&&u.push(c),o()}},Lt=class extends bs{constructor({parent:r,name:t}){super({objectMode:!0}),this._parent=r,this._name=t}_read(){}_write(r,t,o){this._parent.push({name:this._name,data:r}),o()}};ws.exports=Rt;function wu(e,r){let t=bu(r);Ts(e,{readable:!1},t),Ts(e,{writable:!1},t)}});var Is=F((Qh,Ns)=>{s();a();Ns.exports=Ie;Ie.default=Ie;Ie.stable=Cs;Ie.stableStringify=Cs;var Z=[],ne=[];function Ie(e,r,t){Dt(e,"",[],void 0);var o;for(ne.length===0?o=JSON.stringify(e,r,t):o=JSON.stringify(e,Ps(r),t);Z.length!==0;){var n=Z.pop();n.length===4?Object.defineProperty(n[0],n[1],n[3]):n[0][n[1]]=n[2]}return o}function Dt(e,r,t,o){var n;if(typeof e=="object"&&e!==null){for(n=0;n<t.length;n++)if(t[n]===e){var c=Object.getOwnPropertyDescriptor(o,r);c.get!==void 0?c.configurable?(Object.defineProperty(o,r,{value:"[Circular]"}),Z.push([o,r,e,c])):ne.push([e,r]):(o[r]="[Circular]",Z.push([o,r,e]));return}if(t.push(e),Array.isArray(e))for(n=0;n<e.length;n++)Dt(e[n],n,t,e);else{var u=Object.keys(e);for(n=0;n<u.length;n++){var d=u[n];Dt(e[d],d,t,e)}}t.pop()}}function Ou(e,r){return e<r?-1:e>r?1:0}function Cs(e,r,t){var o=xt(e,"",[],void 0)||e,n;for(ne.length===0?n=JSON.stringify(o,r,t):n=JSON.stringify(o,Ps(r),t);Z.length!==0;){var c=Z.pop();c.length===4?Object.defineProperty(c[0],c[1],c[3]):c[0][c[1]]=c[2]}return n}function xt(e,r,t,o){var n;if(typeof e=="object"&&e!==null){for(n=0;n<t.length;n++)if(t[n]===e){var c=Object.getOwnPropertyDescriptor(o,r);c.get!==void 0?c.configurable?(Object.defineProperty(o,r,{value:"[Circular]"}),Z.push([o,r,e,c])):ne.push([e,r]):(o[r]="[Circular]",Z.push([o,r,e]));return}if(typeof e.toJSON=="function")return;if(t.push(e),Array.isArray(e))for(n=0;n<e.length;n++)xt(e[n],n,t,e);else{var u={},d=Object.keys(e).sort(Ou);for(n=0;n<d.length;n++){var g=d[n];xt(e[g],g,t,e),u[g]=e[g]}if(o!==void 0)Z.push([o,r,e]),o[r]=u;else return u}t.pop()}}function Ps(e){return e=e!==void 0?e:function(r,t){return t},function(r,t){if(ne.length>0)for(var o=0;o<ne.length;o++){var n=ne[o];if(n[1]===r&&n[0]===t){t="[Circular]",ne.splice(o,1);break}}return e.call(this,r,t)}}});var Ye=F(Ee=>{"use strict";s();a();Object.defineProperty(Ee,"__esModule",{value:!0});Ee.EthereumProviderError=Ee.EthereumRpcError=void 0;var vu=Is(),Ve=class extends Error{constructor(r,t,o){if(!Number.isInteger(r))throw new Error('"code" must be an integer.');if(!t||typeof t!="string")throw new Error('"message" must be a nonempty string.');super(t),this.code=r,o!==void 0&&(this.data=o)}serialize(){let r={code:this.code,message:this.message};return this.data!==void 0&&(r.data=this.data),this.stack&&(r.stack=this.stack),r}toString(){return vu.default(this.serialize(),Au,2)}};Ee.EthereumRpcError=Ve;var Mt=class extends Ve{constructor(r,t,o){if(!yu(r))throw new Error('"code" must be an integer such that: 1000 <= code <= 4999');super(r,t,o)}};Ee.EthereumProviderError=Mt;function yu(e){return Number.isInteger(e)&&e>=1e3&&e<=4999}function Au(e,r){if(r!=="[Circular]")return r}});var Ke=F(Te=>{"use strict";s();a();Object.defineProperty(Te,"__esModule",{value:!0});Te.errorValues=Te.errorCodes=void 0;Te.errorCodes={rpc:{invalidInput:-32e3,resourceNotFound:-32001,resourceUnavailable:-32002,transactionRejected:-32003,methodNotSupported:-32004,limitExceeded:-32005,parse:-32700,invalidRequest:-32600,methodNotFound:-32601,invalidParams:-32602,internal:-32603},provider:{userRejectedRequest:4001,unauthorized:4100,unsupportedMethod:4200,disconnected:4900,chainDisconnected:4901}};Te.errorValues={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."}}});var Ft=F($=>{"use strict";s();a();Object.defineProperty($,"__esModule",{value:!0});$.serializeError=$.isValidCode=$.getMessageFromCode=$.JSON_RPC_SERVER_ERROR_MESSAGE=void 0;var ze=Ke(),Cu=Ye(),Rs=ze.errorCodes.rpc.internal,Pu="Unspecified error message. This is a bug, please report it.",Nu={code:Rs,message:kt(Rs)};$.JSON_RPC_SERVER_ERROR_MESSAGE="Unspecified server error.";function kt(e,r=Pu){if(Number.isInteger(e)){let t=e.toString();if(Ut(ze.errorValues,t))return ze.errorValues[t].message;if(xs(e))return $.JSON_RPC_SERVER_ERROR_MESSAGE}return r}$.getMessageFromCode=kt;function Ds(e){if(!Number.isInteger(e))return!1;let r=e.toString();return!!(ze.errorValues[r]||xs(e))}$.isValidCode=Ds;function Iu(e,{fallbackError:r=Nu,shouldIncludeStack:t=!1}={}){var o,n;if(!r||!Number.isInteger(r.code)||typeof r.message!="string")throw new Error("Must provide fallback error with integer number code and string message.");if(e instanceof Cu.EthereumRpcError)return e.serialize();let c={};if(e&&typeof e=="object"&&!Array.isArray(e)&&Ut(e,"code")&&Ds(e.code)){let d=e;c.code=d.code,d.message&&typeof d.message=="string"?(c.message=d.message,Ut(d,"data")&&(c.data=d.data)):(c.message=kt(c.code),c.data={originalError:Ls(e)})}else{c.code=r.code;let d=(o=e)===null||o===void 0?void 0:o.message;c.message=d&&typeof d=="string"?d:r.message,c.data={originalError:Ls(e)}}let u=(n=e)===null||n===void 0?void 0:n.stack;return t&&e&&u&&typeof u=="string"&&(c.stack=u),c}$.serializeError=Iu;function xs(e){return e>=-32099&&e<=-32e3}function Ls(e){return e&&typeof e=="object"&&!Array.isArray(e)?Object.assign({},e):e}function Ut(e,r){return Object.prototype.hasOwnProperty.call(e,r)}});var ks=F(Je=>{"use strict";s();a();Object.defineProperty(Je,"__esModule",{value:!0});Je.ethErrors=void 0;var Wt=Ye(),Ms=Ft(),C=Ke();Je.ethErrors={rpc:{parse:e=>j(C.errorCodes.rpc.parse,e),invalidRequest:e=>j(C.errorCodes.rpc.invalidRequest,e),invalidParams:e=>j(C.errorCodes.rpc.invalidParams,e),methodNotFound:e=>j(C.errorCodes.rpc.methodNotFound,e),internal:e=>j(C.errorCodes.rpc.internal,e),server:e=>{if(!e||typeof e!="object"||Array.isArray(e))throw new Error("RPC Server errors must provide single object argument.");let{code:r}=e;if(!Number.isInteger(r)||r>-32005||r<-32099)throw new Error('"code" must be an integer such that: -32099 <= code <= -32005');return j(r,e)},invalidInput:e=>j(C.errorCodes.rpc.invalidInput,e),resourceNotFound:e=>j(C.errorCodes.rpc.resourceNotFound,e),resourceUnavailable:e=>j(C.errorCodes.rpc.resourceUnavailable,e),transactionRejected:e=>j(C.errorCodes.rpc.transactionRejected,e),methodNotSupported:e=>j(C.errorCodes.rpc.methodNotSupported,e),limitExceeded:e=>j(C.errorCodes.rpc.limitExceeded,e)},provider:{userRejectedRequest:e=>Re(C.errorCodes.provider.userRejectedRequest,e),unauthorized:e=>Re(C.errorCodes.provider.unauthorized,e),unsupportedMethod:e=>Re(C.errorCodes.provider.unsupportedMethod,e),disconnected:e=>Re(C.errorCodes.provider.disconnected,e),chainDisconnected:e=>Re(C.errorCodes.provider.chainDisconnected,e),custom:e=>{if(!e||typeof e!="object"||Array.isArray(e))throw new Error("Provider custom errors must provide single object argument.");let{code:r,message:t,data:o}=e;if(!t||typeof t!="string")throw new Error('"message" must be a nonempty string');return new Wt.EthereumProviderError(r,t,o)}}};function j(e,r){let[t,o]=Us(r);return new Wt.EthereumRpcError(e,t||Ms.getMessageFromCode(e),o)}function Re(e,r){let[t,o]=Us(r);return new Wt.EthereumProviderError(e,t||Ms.getMessageFromCode(e),o)}function Us(e){if(e){if(typeof e=="string")return[e];if(typeof e=="object"&&!Array.isArray(e)){let{message:r,data:t}=e;if(r&&typeof r!="string")throw new Error("Must specify string message.");return[r||void 0,t]}}return[]}});var Hs=F(L=>{"use strict";s();a();Object.defineProperty(L,"__esModule",{value:!0});L.getMessageFromCode=L.serializeError=L.EthereumProviderError=L.EthereumRpcError=L.ethErrors=L.errorCodes=void 0;var Fs=Ye();Object.defineProperty(L,"EthereumRpcError",{enumerable:!0,get:function(){return Fs.EthereumRpcError}});Object.defineProperty(L,"EthereumProviderError",{enumerable:!0,get:function(){return Fs.EthereumProviderError}});var Ws=Ft();Object.defineProperty(L,"serializeError",{enumerable:!0,get:function(){return Ws.serializeError}});Object.defineProperty(L,"getMessageFromCode",{enumerable:!0,get:function(){return Ws.getMessageFromCode}});var Ru=ks();Object.defineProperty(L,"ethErrors",{enumerable:!0,get:function(){return Ru.ethErrors}});var Lu=Ke();Object.defineProperty(L,"errorCodes",{enumerable:!0,get:function(){return Lu.errorCodes}})});s();a();s();a();(function(e){typeof define=="function"&&define.amd?define(e):e()})(function(){"use strict";function e(p,h){if(!(p instanceof h))throw new TypeError("Cannot call a class as a function")}function r(p,h){for(var f=0;f<h.length;f++){var T=h[f];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(p,T.key,T)}}function t(p,h,f){return h&&r(p.prototype,h),f&&r(p,f),p}function o(p,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function");p.prototype=Object.create(h&&h.prototype,{constructor:{value:p,writable:!0,configurable:!0}}),h&&c(p,h)}function n(p){return n=Object.setPrototypeOf?Object.getPrototypeOf:function(f){return f.__proto__||Object.getPrototypeOf(f)},n(p)}function c(p,h){return c=Object.setPrototypeOf||function(T,N){return T.__proto__=N,T},c(p,h)}function u(p){if(p===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p}function d(p,h){return h&&(typeof h=="object"||typeof h=="function")?h:u(p)}function g(p,h){for(;!Object.prototype.hasOwnProperty.call(p,h)&&(p=n(p),p!==null););return p}function S(p,h,f){return typeof Reflect<"u"&&Reflect.get?S=Reflect.get:S=function(N,k,V){var ie=g(N,k);if(!!ie){var x=Object.getOwnPropertyDescriptor(ie,k);return x.get?x.get.call(V):x.value}},S(p,h,f||p)}var v=function(){function p(){e(this,p),Object.defineProperty(this,"listeners",{value:{},writable:!0,configurable:!0})}return t(p,[{key:"addEventListener",value:function(f,T){f in this.listeners||(this.listeners[f]=[]),this.listeners[f].push(T)}},{key:"removeEventListener",value:function(f,T){if(f in this.listeners){for(var N=this.listeners[f],k=0,V=N.length;k<V;k++)if(N[k]===T){N.splice(k,1);return}}}},{key:"dispatchEvent",value:function(f){var T=this;if(f.type in this.listeners){for(var N=function(Le){setTimeout(function(){return Le.call(T,f)})},k=this.listeners[f.type],V=0,ie=k.length;V<ie;V++)N(k[V]);return!f.defaultPrevented}}}]),p}(),B=function(p){o(h,p);function h(){var f;return e(this,h),f=d(this,n(h).call(this)),f.listeners||v.call(u(f)),Object.defineProperty(u(f),"aborted",{value:!1,writable:!0,configurable:!0}),Object.defineProperty(u(f),"onabort",{value:null,writable:!0,configurable:!0}),f}return t(h,[{key:"toString",value:function(){return"[object AbortSignal]"}},{key:"dispatchEvent",value:function(T){T.type==="abort"&&(this.aborted=!0,typeof this.onabort=="function"&&this.onabort.call(this,T)),S(n(h.prototype),"dispatchEvent",this).call(this,T)}}]),h}(v),D=function(){function p(){e(this,p),Object.defineProperty(this,"signal",{value:new B,writable:!0,configurable:!0})}return t(p,[{key:"abort",value:function(){var f;try{f=new Event("abort")}catch{typeof document<"u"?document.createEvent?(f=document.createEvent("Event"),f.initEvent("abort",!1,!1)):(f=document.createEventObject(),f.type="abort"):f={type:"abort",bubbles:!1,cancelable:!1}}this.signal.dispatchEvent(f)}},{key:"toString",value:function(){return"[object AbortController]"}}]),p}();typeof Symbol<"u"&&Symbol.toStringTag&&(D.prototype[Symbol.toStringTag]="AbortController",B.prototype[Symbol.toStringTag]="AbortSignal");function w(p){return p.__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL?(console.log("__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL=true is set, will force install polyfill"),!0):typeof p.Request=="function"&&!p.Request.prototype.hasOwnProperty("signal")||!p.AbortController}function y(p){typeof p=="function"&&(p={fetch:p});var h=p,f=h.fetch,T=h.Request,N=T===void 0?f.Request:T,k=h.AbortController,V=h.__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL,ie=V===void 0?!1:V;if(!w({fetch:f,Request:N,AbortController:k,__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL:ie}))return{fetch:f,Request:x};var x=N;(x&&!x.prototype.hasOwnProperty("signal")||ie)&&(x=function(de,M){var se;M&&M.signal&&(se=M.signal,delete M.signal);var Q=new N(de,M);return se&&Object.defineProperty(Q,"signal",{writable:!1,enumerable:!1,configurable:!0,value:se}),Q},x.prototype=N.prototype);var Le=f,zs=function(de,M){var se=x&&x.prototype.isPrototypeOf(de)?de.signal:M?M.signal:void 0;if(se){var Q;try{Q=new DOMException("Aborted","AbortError")}catch{Q=new Error("Aborted"),Q.name="AbortError"}if(se.aborted)return Promise.reject(Q);var Xs=new Promise(function(Zs,Qs){se.addEventListener("abort",function(){return Qs(Q)},{once:!0})});return M&&M.signal&&delete M.signal,Promise.race([Xs,Le(de,M)])}return Le(de,M)};return{fetch:zs,Request:x}}(function(p){if(!!w(p)){if(!p.fetch){console.warn("fetch() is not available, cannot install abortcontroller-polyfill");return}var h=y(p),f=h.fetch,T=h.Request;p.fetch=f,p.Request=T,Object.defineProperty(p,"AbortController",{writable:!0,enumerable:!1,configurable:!0,value:D}),Object.defineProperty(p,"AbortSignal",{writable:!0,enumerable:!1,configurable:!0,value:B})}})(typeof self<"u"?self:globalThis)});var qs=_(Ei()),Gt=_(Bt()),$s=_(ra()),Vs=_(oa()),Ys=_(Pi()),Ks=_(qt());s();a();s();a();var ls=_(na()),ps=_(qt()),ds=_(Se());var ms=_(U()),fs=_(ia()),hs=_(sa());s();a();var Ni=_(aa()),te=_(Se());var wa=({appBaseChain:e,baseChain:r,chain:t,chainName:o,coinId:n,coinType:c,netWorkId:u})=>o?(0,te.isUndefined)(Ni.Currency[c])?(console.error(`coinType: ${c} is not validate`),!1):Object.values(Jt).includes(e)?(0,te.isNumber)(n)?r?(0,te.isNil)(u)?(console.error(`netWorkId: ${u} is not validate`),!1):t?!0:(console.error(`chain: ${t} is not validate`),!1):(console.error(`baseChain: ${r} is not validate`),!1):(console.error(`coinId: ${n} is not a number`),!1):(console.error(`chainName: ${o} appBaseChain: ${e} is not validate`),!1):(console.error(`chainName: ${o} is not validate`),!1),Ii=(e,r)=>{if(!e||!e.length)return console.warn("Not Update. New chain not validate"),!1;let t=!1,o=e.filter(n=>{var c,u;return((c=n==null?void 0:n.factionInfo)==null?void 0:c.factionType)===Kt||((u=n==null?void 0:n.factionInfo)==null?void 0:u.factionType)===zt}).filter(wa);return!o.length||!o.find(n=>n.chain===Yt)?(console.warn("Not Update. eth mainnet not exist"),!1):o.length!==r.length?(console.warn(`Update. New validate chainList amount ${o.length}  is different from ${r.length}`),!0):(o.forEach(n=>{let c=r.find(u=>u.coinId===n.coinId);c||(console.warn(`new chain: ${n.chainName}`),t=!0),(0,te.isEqual)(n,c)||(console.warn(`Something different need update. new chain: ${JSON.stringify(n)}, old chain: ${JSON.stringify(c)}`),t=!0)}),console.warn(`need update: ${t}`),t)};s();a();var G=_(U()),Qi=_(W());s();a();s();a();var O=_(U()),dt=_(W());var ve=class extends O.PureComponent{renderErrorDetail(r){return O.default.createElement("li",null,O.default.createElement("p",null,r))}renderErrorStack(r,t){return O.default.createElement("li",null,O.default.createElement("span",null,r),O.default.createElement("pre",{className:"error-page__stack"},t))}render(){let{error:r}=this.props,{t}=this.context,o=J()===fe,n=t(o?"wallet_home_subtitle_errortip_error_popup_message":"wallet_home_subtitle_errortip_errorpage_message");return O.default.createElement("section",{className:"error-page"},O.default.createElement("div",{className:"error-page__header"},t("wallet_home_maintitle_errortip_error_page_title"),window.location.hash&&O.default.createElement("img",{alt:"",className:"error-page__right",src:"/static/images/ok-navigator-close.svg",onClick:async()=>{await me().clearDappData(),window.location.href=window.location.pathname}})),O.default.createElement("section",{className:"error-page__details"},O.default.createElement("img",{className:"error-page__image",src:"./static/images/error.jpg",alt:""}),O.default.createElement("div",{className:"error-page__title"},n),O.default.createElement("div",{className:"error-page__text"},O.default.createElement("details",null,O.default.createElement("summary",null,t("wallet_home_subtitle_errortip_errordetail")),O.default.createElement("ul",null,r.message?this.renderErrorDetail(t("wallet_home_subtitle_errortip_errormessage",{errorMessage:r.message})):null,r.code?this.renderErrorDetail(t("wallet_home_subtitle_errortip_errorcode",{errorCode:r.code})):null,r.name?this.renderErrorDetail(t("wallet_home_subtitle_errortip_errorname",{errorName:r.name})):null,r.stack?this.renderErrorStack(t("wallet_home_subtitle_errortip_error_stack"),r.stack):null))),window.location.hash&&O.default.createElement("div",{className:"error-page__button"},O.default.createElement(H,{block:!0,onClick:async()=>{await me().clearDappData(),window.location.href=window.location.pathname},className:"error-page__button",type:H.TYPE.highlight},t("wallet_extension_btn_cancel")))))}};E(ve,"contextTypes",{t:dt.default.func.isRequired}),E(ve,"propTypes",{error:dt.default.object.isRequired});var mt=ve;s();a();s();a();s();a();var Xi=_(ua()),P=_(W()),i=_(U());s();a();var Di=_(U()),A=_(W()),Oa=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},va=function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")},ya=function(){function e(r,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,n.key,n)}}return function(r,t,o){return t&&e(r.prototype,t),o&&e(r,o),r}}(),Aa=function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)},Ca=function(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||typeof r!="object"&&typeof r!="function"?e:r},ft=(typeof window>"u"||typeof window>"u"?"undefined":Oa(window))==="object",Pa=ft?document:{},Na=["mousemove","keydown","wheel","DOMMouseScroll","mouseWheel","mousedown","touchstart","touchmove","MSPointerDown","MSPointerMove"],ht=function(e){function r(t){va(this,r);var o=Ca(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,t));if(o.state={idle:!1,oldDate:+new Date,lastActive:+new Date,remaining:null,pageX:null,pageY:null},o.tId=null,o._handleEvent=function(n){var c=o.state,u=c.remaining,d=c.pageX,g=c.pageY,S=c.idle,v=o.props,B=v.timeout,D=v.onAction,w=v.debounce,y=v.throttle,p=v.stopOnIdle;if(w>0?o.debouncedAction(n):y>0?o.throttledAction(n):D(n),!u){if(n.type==="mousemove"&&(n.pageX===d&&n.pageY===g||n.pageX===void 0&&n.pageY===void 0||o.getElapsedTime()<200))return;clearTimeout(o.tId),o.tId=null,S&&!p&&o.toggleIdleState(n),o.setState({lastActive:+new Date,pageX:n.pageX,pageY:n.pageY}),S&&p||(o.tId=setTimeout(o.toggleIdleState,B))}},t.debounce>0&&t.throttle>0)throw new Error("onAction can either be throttled or debounced (not both)");return t.debounce>0&&(o.debouncedAction=Ri(t.onAction,t.debounce)),t.throttle>0&&(o.throttledAction=Li(t.onAction,t.throttle)),t.startOnMount||(o.state.idle=!0),o.toggleIdleState=o._toggleIdleState.bind(o),o.reset=o._reset.bind(o),o.pause=o._pause.bind(o),o.resume=o._resume.bind(o),o.getRemainingTime=o._getRemainingTime.bind(o),o.getElapsedTime=o._getElapsedTime.bind(o),o.getLastActiveTime=o._getLastActiveTime.bind(o),o.isIdle=o._isIdle.bind(o),o}return Aa(r,Di.Component),ya(r,[{key:"componentWillMount",value:function(){this._bindEvents()}},{key:"componentDidMount",value:function(){this.props.startOnMount&&this.reset()}},{key:"componentDidUpdate",value:function(t){t.debounce!==this.props.debounce&&(this.debouncedAction=Ri(this.props.onAction,this.props.debounce)),t.throttle!==this.props.throttle&&(this.throttledAction=Li(this.props.onAction,this.props.throttle))}},{key:"componentWillUnmount",value:function(){clearTimeout(this.tId),this._unbindEvents()}},{key:"render",value:function(){return this.props.children||null}},{key:"_bindEvents",value:function(){var t=this;if(ft){var o=this.state.eventsBound,n=this.props,c=n.element,u=n.events,d=n.passive,g=n.capture;o||(u.forEach(function(S){c.addEventListener(S,t._handleEvent,{capture:g,passive:d})}),this.setState({eventsBound:!0}))}}},{key:"_unbindEvents",value:function(){var t=this;if(ft){var o=this.props,n=o.element,c=o.events,u=o.passive,d=o.capture;this.state.eventsBound&&(c.forEach(function(g){n.removeEventListener(g,t._handleEvent,{capture:d,passive:u})}),this.setState({eventsBound:!1}))}}},{key:"_toggleIdleState",value:function(t){var o=this,n=this.state.idle,c=this.props,u=c.onActive,d=c.onIdle,g=c.stopOnIdle;this.setState({idle:!n},function(){n?g||(o._bindEvents(),u(t)):(g&&(clearTimeout(o.tId),o.tId=null,o._unbindEvents()),d(t))})}},{key:"_reset",value:function(){clearTimeout(this.tId),this.tId=null,this._bindEvents(),this.setState({idle:!1,oldDate:+new Date,lastActive:this.state.oldDate,remaining:null});var t=this.props.timeout;this.tId=setTimeout(this.toggleIdleState,t)}},{key:"_pause",value:function(){this.state.remaining===null&&(this._unbindEvents(),clearTimeout(this.tId),this.tId=null,this.setState({remaining:this.getRemainingTime()}))}},{key:"_resume",value:function(){var t=this.state,o=t.remaining,n=t.idle;o!==null&&(this._bindEvents(),n||(this.setState({remaining:null}),this.tId=setTimeout(this.toggleIdleState,o)))}},{key:"_getRemainingTime",value:function(){var t=this.state,o=t.remaining,n=t.idle,c=t.lastActive;if(n)return 0;if(o!==null)return o;var u=this.props.timeout-(+new Date-c);return u<0&&(u=0),u}},{key:"_getElapsedTime",value:function(){var t=this.state.oldDate;return+new Date-t}},{key:"_getLastActiveTime",value:function(){return this.state.lastActive}},{key:"_isIdle",value:function(){return this.state.idle}}]),r}();function Ri(e,r){var t=void 0;return function(){for(var o=arguments.length,n=Array(o),c=0;c<o;c++)n[c]=arguments[c];t&&clearTimeout(t),t=setTimeout(function(){e.apply(void 0,n),t=null},r)}}function Li(e,r){var t=0;return function(){var o=new Date().getTime();if(!(o-t<r))return t=o,e.apply(void 0,arguments)}}ht.propTypes={timeout:A.default.number,events:A.default.arrayOf(A.default.string),onIdle:A.default.func,onActive:A.default.func,onAction:A.default.func,debounce:A.default.number,throttle:A.default.number,element:A.default.oneOfType([A.default.object,A.default.element]),startOnMount:A.default.bool,stopOnIdle:A.default.bool,passive:A.default.bool,capture:A.default.bool},ht.defaultProps={timeout:12e5,element:Pa,events:Na,onIdle:function(){},onActive:function(){},onAction:function(){},debounce:0,throttle:0,startOnMount:!0,stopOnIdle:!1,capture:!0,passive:!0};var xi=ht;var Zi=_(Se());s();a();s();a();s();a();var ke=_(U()),_t=_(W());function Fe(e){let{isUnlocked:r,completedOnboarding:t}=e;switch(!0){case(r&&t):return ke.default.createElement(R,{...e});case!t:return ke.default.createElement(we,{to:{pathname:he}});default:return ke.default.createElement(we,{to:{pathname:Me}})}}Fe.propTypes={isUnlocked:_t.default.bool,completedOnboarding:_t.default.bool};var Ia=e=>{let{metamask:{isUnlocked:r,completedOnboarding:t}}=e;return{isUnlocked:r,completedOnboarding:t}},m=I(Ia)(Fe);s();a();s();a();s();a();var gt=_(U()),Mi=_(W());function We(e){return e.completedOnboarding?gt.default.createElement(R,{...e}):gt.default.createElement(we,{to:{pathname:he}})}We.propTypes={completedOnboarding:Mi.default.bool};var Ra=e=>{let{metamask:{completedOnboarding:r}}=e;return{completedOnboarding:r}},He=I(Ra)(We);s();a();s();a();s();a();var re=_(U()),Ge=_(W());s();a();s();a();var Ui=_(U()),Et=_(W());s();a();var ki=({className:e="",color:r="#000000"})=>Ui.default.createElement("div",{className:`spinner ${e}`});ki.propTypes={className:Et.default.string,color:Et.default.string};var Fi=ki;var Wi=Fi;s();a();var X=class extends re.PureComponent{render(){return re.default.createElement("div",{className:"loading-network-screen"},re.default.createElement("div",{className:"loading-network-screen__container"},re.default.createElement("div",{className:"loading-network-screen__close",onClick:this.props.close}),re.default.createElement(Wi,{className:"loading-network-screen__spinner"}),re.default.createElement("div",{className:"loading-network-screen__connect"},this.props.loadingMessage)))}};E(X,"contextTypes",{t:Ge.default.func}),E(X,"propTypes",{loadingMessage:Ge.default.string,close:Ge.default.func});var La=e=>({close:()=>{e(Ln())}}),Tt=I(null,La)(X);s();a();s();a();var Pe=_(W()),ge=_(U());s();a();var Da=()=>window.matchMedia("screen and (max-width: 575px)").matches,Gi=Da;s();a();var ue=_(U()),z=_(W());var xa=0,Y,Ma=e=>(Y||(Y=document.createElement("style"),document.getElementsByTagName("head")[0].appendChild(Y),Y=Y.sheet||Y.styleSheet),Y.insertRule(e,(Y.cssRules||Y.rules).length),Y),je=e=>{let r=`anim_${++xa}${Number(new Date)}`,t=`@keyframes ${r} {`;return Object.keys(e).forEach(o=>{t+=`${o} {`,Object.keys(e[o]).forEach(n=>{let c=`:${e[o][n]};`;t+=n+c}),t+="}"}),t+="}",Ma(t),r},K={show:{animationDuration:"0.3s",animationTimingFunction:"ease-out"},hide:{animationDuration:"0.3s",animationTimingFunction:"ease-out"},showContentAnimation:je({"0%":{opacity:0},"100%":{opacity:1}}),hideContentAnimation:je({"0%":{opacity:1},"100%":{opacity:0}}),showBackdropAnimation:je({"0%":{opacity:0},"100%":{opacity:.9}}),hideBackdropAnimation:je({"0%":{opacity:.9},"100%":{opacity:0}})},Be=["transitionend","animationend"];function Ua(e,r,t){e.addEventListener(r,t,!1)}function ka(e,r,t){e.removeEventListener(r,t,!1)}var Fa=(e,r)=>{Be.length!==0&&Be.forEach(function(t){ka(e,t,r)})},Wa=(e,r)=>{if(Be.length===0){window.setTimeout(r,0);return}Be.forEach(function(t){Ua(e,t,r)})},ye=class extends ue.Component{constructor(){super(...arguments);E(this,"content",null);E(this,"state",{willHide:!0,hidden:!0});E(this,"addTransitionListener",(t,o)=>{if(t){let n=function(c){c&&c.target!==t||(Fa(t,n),o())};Wa(t,n)}});E(this,"handleBackdropClick",()=>{this.props.closeOnClick&&this.hide()});E(this,"hasHidden",()=>this.state.hidden);E(this,"leave",()=>{this.setState({hidden:!0}),this.props.onHide(this.state.hideSource)});E(this,"enter",()=>{this.props.onShow()});E(this,"show",()=>{!this.state.hidden||(this.setState({willHide:!1,hidden:!1}),setTimeout(function(){this.addTransitionListener(this.content,this.enter)}.bind(this),0))});E(this,"hide",()=>{this.hasHidden()||this.setState({willHide:!0})});E(this,"listenKeyboard",t=>{typeof this.props.keyboard=="function"?this.props.keyboard(t):this.closeOnEsc(t)});E(this,"closeOnEsc",t=>{this.props.keyboard&&(t.key==="Escape"||t.keyCode===27)&&this.hide()});E(this,"UNSAFE_componentDidMount",()=>{window.addEventListener("keydown",this.listenKeyboard,!0)});E(this,"UNSAFE_componentWillUnmount",()=>{window.removeEventListener("keydown",this.listenKeyboard,!0)})}render(){if(this.state.hidden)return null;let{willHide:t}=this.state,{modalStyle:o}=this.props,n={animationName:t?K.hideBackdropAnimation:K.showBackdropAnimation,animationTimingFunction:(t?K.hide:K.show).animationTimingFunction,...this.props.backdropStyle},c={animationDuration:(t?K.hide:K.show).animationDuration,animationName:t?K.hideContentAnimation:K.showContentAnimation,animationTimingFunction:(t?K.hide:K.show).animationTimingFunction,...this.props.contentStyle},u=this.props.backdrop?ue.default.createElement("div",{className:"modal__backdrop",style:n,onClick:this.props.closeOnClick?this.handleBackdropClick:null}):void 0;return t&&this.addTransitionListener(this.content,this.leave),ue.default.createElement("span",null,ue.default.createElement("div",{className:"modal",style:o},ue.default.createElement("div",{className:"modal__content",ref:d=>this.content=d,tabIndex:"-1",style:c},this.props.children)),u)}};E(ye,"propTypes",{backdrop:z.default.bool,backdropStyle:z.default.object,closeOnClick:z.default.bool,contentStyle:z.default.object,keyboard:z.default.bool,modalStyle:z.default.object,onShow:z.default.func,onHide:z.default.func,children:z.default.node}),E(ye,"defaultProps",{onShow:()=>{},onHide:()=>{},keyboard:!0,backdrop:!0,closeOnClick:!0,modalStyle:{},backdropStyle:{},contentStyle:{},children:[]});var ji=ye;s();a();s();a();s();a();s();a();var Ha=e=>{let{appState:r}=e,{props:t}=r.modal.modalState;return{...t}},Ga=e=>({hideModal:()=>e(Ue())});function _e(e){return I(Ha,Ga)(e)}s();a();var oe=_(U()),Ae=_(W());var le=class extends oe.PureComponent{constructor(){super(...arguments);E(this,"state",{visible:!0});E(this,"onSubmit",()=>{this.props.hideModal(),this.props.onConfirm&&this.props.onConfirm(),this.setState({visible:!1})});E(this,"onCancel",()=>{this.props.hideModal(),this.props.onCancel&&this.props.onCancel(),this.setState({visible:!1})})}render(){let{t}=this.context;return oe.default.createElement(De.Prompt,{btnFull:!0,mask:!1,infoType:!1,alignBottom:!1,visible:this.state.visible,title:t("wallet_add_wallet_maintitle_hardware_wallet_conncet_failed"),text:t("wallet_add_wallet_modal_hardware_wallet_conncet_failed_tip"),onClose:this.onCancel,renderFooter:()=>oe.default.createElement(oe.default.Fragment,null,oe.default.createElement(H,{block:!0,category:H.CATEGORY.outline,type:H.TYPE.primary,onClick:this.onCancel,size:H.SIZE.lg},t("wallet_transfer_btn_cancel_transaction")),oe.default.createElement(H,{block:!0,category:H.CATEGORY.fill,type:H.TYPE.highlight,onClick:this.onSubmit,size:H.SIZE.lg,style:{marginTop:"var(--okd-dialog-footer-btn-full-sm-margin-top,8px)"}},t("wallet_manage_wallet_btn_reconncet_hardware_wallet")))})}};E(le,"contextTypes",{t:Ae.default.func});le.propTypes={hideModal:Ae.default.func.isRequired,onConfirm:Ae.default.func,onCancel:Ae.default.func};var St=xe(_e,I(null))(le);s();a();s();a();s();a();var Bi=_(U()),Ce=_(W());var bt=e=>{let{hideModal:r,loadingMessage:t,onClose:o}=e;return Bi.default.createElement(X,{loadingMessage:t,close:()=>{r(),o&&o()}})};bt.contextTypes={t:Ce.default.func};bt.propTypes={hideModal:Ce.default.func.isRequired,loadingMessage:Ce.default.string,onClose:Ce.default.func};var qi=bt;var wt=_e(qi);s();a();var Vi={transform:"translate3d(-50%, -50%, 0px)",borderRadius:"4px",backgroundColor:"#FFFFFF"},ja={...Vi,width:"344px",top:"50%"},Ba={...Vi,width:"296px",top:"50%"},$i={mobileModalStyle:{...Ba},laptopModalStyle:{...ja},contentStyle:{borderRadius:"4px"}},qa={CONFIRM_CONNECTHARD_ERROR:{contents:ge.default.createElement(St,null),...$i},LOADING:{contents:ge.default.createElement(wt,null),...$i},DEFAULT:{contents:[],mobileModalStyle:{},laptopModalStyle:{}}},$a={backgroundColor:"rgba(31, 37, 51, 0.4)"};function Va(e){return{active:e.appState.modal.open,modalState:e.appState.modal.modalState}}function Ya(e){return{hideModal:r=>{e(Ue()),r&&r.action&&e(r.action(...r.args))},hideWarning:()=>{e(Dn())}}}var qe=class extends ge.Component{hide(){this.modalRef.hide()}show(){this.modalRef.show()}UNSAFE_componentWillReceiveProps(r,t){r.active?this.show():this.props.active&&this.hide()}render(){let r=qa[this.props.modalState.name||"DEFAULT"],{contents:t,disableBackdropClick:o=!1}=r,n=r[Gi()?"mobileModalStyle":"laptopModalStyle"],c=r.contentStyle||{};return ge.default.createElement(ji,{keyboard:!1,onHide:()=>{r.onHide&&r.onHide({hideWarning:this.props.hideWarning}),this.props.hideModal(r.customOnHideOpts)},ref:u=>{this.modalRef=u},modalStyle:n,contentStyle:c,backdropStyle:$a,closeOnClick:!o},t)}};E(qe,"propTypes",{active:Pe.default.bool.isRequired,hideModal:Pe.default.func.isRequired,hideWarning:Pe.default.func.isRequired,modalState:Pe.default.object.isRequired});var Ot=I(Va,Ya)(qe);be.config({duration:3,top:10,left:16,right:16,maxCount:3,placement:be.DIRECTION.top,isInline:!0});var Ka={DEX_ROUTE:it,DEX_ORDER_DETAIL_ROUTE:yn},za=(0,i.lazy)(()=>import("./dex-ERGSVQXX.js")),Ja=(0,i.lazy)(()=>import("./new-home-page-KRJSIOZS.js")),Xa=(0,i.lazy)(()=>import("./new-home-page.container-B6BCEW52.js")),Za=(0,i.lazy)(()=>import("./HowConnect-RYSTAM2V.js")),Qa=(0,i.lazy)(()=>import("./connect-hardware-2RBKPO3B.js")),Yi=(0,i.lazy)(()=>import("./import-seed-phrase-LRZURKDR.js")),Ki=(0,i.lazy)(()=>import("./import-private-key-DGV4YBUM.js")),zi=(0,i.lazy)(()=>import("./check-NXX7MMDE.js")),Ji=(0,i.lazy)(()=>import("./verify-X55EDKP7.js")),ec=(0,i.lazy)(()=>import("./wrapper-3KDFJBCP.js")),tc=(0,i.lazy)(()=>import("./wallet-edit-page-7R7I3TWO.js")),rc=(0,i.lazy)(()=>import("./wallet-backup-page-7AUU6MWQ.js")),oc=(0,i.lazy)(()=>import("./wallet-add-page-B7QP2LWY.js")),nc=(0,i.lazy)(()=>import("./wallet-list-page-YWGH3CIU.js")),ic=(0,i.lazy)(()=>import("./wallet-private-key-list-page-KNDPNXRZ.js")),sc=(0,i.lazy)(()=>import("./CreatePassword-HL5IWZWK.js")),ac=(0,i.lazy)(()=>import("./VerifyPassword-7ZBUCQBL.js")),cc=(0,i.lazy)(()=>import("./welcome-46U2JITG.js")),uc=(0,i.lazy)(()=>import("./show-supported-chains-5VJGPMYE.js")),lc=(0,i.lazy)(()=>import("./unlock-page-LVBKAMRG.js")),pc=(0,i.lazy)(()=>import("./Receive-N6DAAJ27.js")),dc=(0,i.lazy)(()=>import("./lock-ZYBFTFBN.js")),mc=(0,i.lazy)(()=>import("./ForgetPassword-K2D3SB2R.js")),fc=(0,i.lazy)(()=>import("./ResetPassword-3PGTYDDJ.js")),hc=(0,i.lazy)(()=>import("./confirm-transaction-VQUXAWB6.js")),_c=(0,i.lazy)(()=>import("./ok-select-network-PFYM73BC.js")),gc=(0,i.lazy)(()=>import("./ok-select-coin-EAYCQHHG.js")),Ec=(0,i.lazy)(()=>import("./SendNft-4S4O4OQW.js")),Tc=(0,i.lazy)(()=>import("./SendPageContainer-XPI5SZHP.js")),Sc=(0,i.lazy)(()=>import("./add-crypto.component-CUJVAAUR.js")),bc=(0,i.lazy)(()=>import("./coin-manage-FTIHSAK5.js")),wc=(0,i.lazy)(()=>import("./custom-crypto-IMXVKIQO.js")),Oc=(0,i.lazy)(()=>import("./coin-search-7IIZ2ZQB.js")),vc=(0,i.lazy)(()=>import("./Setting-MALNLYSI.js")),yc=(0,i.lazy)(()=>import("./Preference-G5BZTD74.js")),Ac=(0,i.lazy)(()=>import("./WalletSafely-LR4KEATZ.js")),Cc=(0,i.lazy)(()=>import("./SafetyLevel-BBZIN2AO.js")),Pc=(0,i.lazy)(()=>import("./AboutWallet-MAGLRYMV.js")),Nc=(0,i.lazy)(()=>import("./WalletHistory-2XRSQ4Y2.js")),Ic=(0,i.lazy)(()=>import("./Selector-Z52ZAA2Q.js")),Rc=(0,i.lazy)(()=>import("./evm-VWF62BD4.js")),Lc=(0,i.lazy)(()=>import("./solana-7XX3TR3W.js")),Dc=(0,i.lazy)(()=>import("./cosmos-DOQK4UND.js")),xc=(0,i.lazy)(()=>import("./aptos-XUL2FCGG.js")),Mc=(0,i.lazy)(()=>import("./trx-YTICAJB3.js")),Uc=(0,i.lazy)(()=>import("./DappEntry-SWIY5HBU.js")),kc=(0,i.lazy)(()=>import("./network-YVAEPTM3.js")),Fc=(0,i.lazy)(()=>import("./switch-chain-DZFHLFVU.js")),Wc=(0,i.lazy)(()=>import("./permissions-connect-LVHJCUFM.js")),Hc=(0,i.lazy)(()=>import("./NftItem-HVUOLRGL.js")),Gc=(0,i.lazy)(()=>import("./NftFilter-XMKP7NR6.js")),jc=(0,i.lazy)(()=>import("./authorization-token.components-PVFDHLJN.js")),Bc=(0,i.lazy)(()=>import("./connected-new-sites-4XWTYTO4.js")),qc=(0,i.lazy)(()=>import("./CoinDetail-ZODAVMHQ.js")),$c=(0,i.lazy)(()=>import("./address-VOJJ4OCR.js")),Vc=(0,i.lazy)(()=>import("./register-4JOFD545.js")),Yc=(0,i.lazy)(()=>import("./ZKSpace-E5P2GGGD.js")),Kc=(0,i.lazy)(()=>import("./Swap-GQALNQ73.js")),zc=(0,i.lazy)(()=>import("./SelectCoin-MCQR3OZH.js")),Jc=(0,i.lazy)(()=>import("./sui-KURKGOEF.js")),Xc=(0,i.lazy)(()=>import("./rpc-mode-A7CE37LW.js")),pe=class extends i.Component{constructor(){super(),this.state={}}UNSAFE_componentWillUpdate(r){let{isUnlocked:t,toastData:o,history:n}=r,{t:c}=this.context,u=n.location.pathname,d=Object.values(Ka).find(g=>u.includes(g));if(t&&o&&!d){let{type:g="warn",titleKey:S,titleParams:v,url:B,urlKey:D,id:w}=o;be[g]({title:c(S,v),desc:B?i.default.createElement($n,{url:B,urlText:c(D)}):null,key:w,onClose:()=>Wn(null)})}return null}UNSAFE_componentWillMount(){let{currentCurrency:r,pageChanged:t,setCurrentCurrencyToUSD:o,history:n}=this.props,c=this.context.t;r||o(),n.listen((u,d)=>{d==="PUSH"&&t(u.pathname)}),or(ir.getCheckCountryLimit,{type:"2"}).then(u=>{try{let{data:{web3:{limit:d,displayCountryName:g}}}=u;d&&De.warn({maskClosable:!1,renderFooter:()=>i.default.createElement("div",null),alignBottom:!1,title:c("wallet_extension_login_title_access_restricted"),text:c("wallet_extension_login_toast_unavailable_inyourregion",{area:g})})}catch{be.error({title:c("wallet_home_toast_network_error")})}}).catch(Zi.noop)}renderRoutes(){let{autoLockTimeLimit:r,setLastActiveTime:t}=this.props,o=i.default.createElement(i.Suspense,null,i.default.createElement(mr,null,i.default.createElement(m,{path:Co,component:Za,exact:!0}),i.default.createElement(R,{path:wo,component:Qa,exact:!0}),i.default.createElement(m,{path:ln,component:Yi,exact:!0}),i.default.createElement(m,{path:pn,component:Ki,exact:!0}),i.default.createElement(m,{path:dn,component:zi,exact:!0}),i.default.createElement(m,{path:mn,component:Ji,exact:!0}),i.default.createElement(m,{path:fn,component:ec,exact:!0}),i.default.createElement(m,{path:hn,component:tc,exact:!0}),i.default.createElement(m,{path:_n,component:rc,exact:!0}),i.default.createElement(m,{path:En,component:nc,exact:!0}),i.default.createElement(m,{path:Tn,component:ic,exact:!0}),i.default.createElement(m,{path:gn,component:oc,exact:!0}),i.default.createElement(R,{path:Mo,component:sc,exact:!0}),i.default.createElement(m,{path:Uo,component:ac}),i.default.createElement(R,{path:Fo,component:Ki,exact:!0}),i.default.createElement(R,{path:ko,component:Yi,exact:!0}),i.default.createElement(R,{path:`${Wo}/:type/:net`,component:uc}),i.default.createElement(R,{path:`${Io}/:coinId`,component:pc,exact:!0}),i.default.createElement(R,{path:To,component:dc,exact:!0}),i.default.createElement(R,{path:he,component:cc}),i.default.createElement(He,{path:Me,component:lc,exact:!0}),i.default.createElement(He,{path:Ro,component:mc}),i.default.createElement(m,{path:Lo,component:fc}),i.default.createElement(m,{path:`${xo}/:id?`,component:hc}),i.default.createElement(m,{path:vn,component:Xc}),i.default.createElement(m,{path:un,component:_c}),i.default.createElement(m,{path:cn,component:gc}),i.default.createElement(m,{path:vo,component:Ec,exact:!0}),i.default.createElement(m,{path:`${Oo}/:coinId?`,component:Tc}),i.default.createElement(m,{path:bo,component:Sc,exact:!0}),i.default.createElement(m,{path:Ho,component:zi}),i.default.createElement(m,{path:Go,component:Ji}),i.default.createElement(m,{path:jo,component:bc}),i.default.createElement(m,{path:Bo,component:wc}),i.default.createElement(m,{path:Jo,component:Oc}),i.default.createElement(m,{path:qo,component:vc}),i.default.createElement(m,{path:$o,component:yc}),i.default.createElement(m,{path:Vo,component:Ac}),i.default.createElement(m,{path:Yo,component:Cc}),i.default.createElement(m,{path:Ko,component:Pc}),i.default.createElement(m,{path:Sn,component:Nc,exact:!0}),i.default.createElement(m,{path:zo,component:Ic}),i.default.createElement(m,{path:Qo,component:Rc}),i.default.createElement(m,{path:en,component:Lc}),i.default.createElement(m,{path:`${on}/:chain`,component:Dc}),i.default.createElement(m,{path:rn,component:xc}),i.default.createElement(m,{path:tn,component:Mc}),i.default.createElement(m,{path:an,component:Uc}),i.default.createElement(m,{path:nn,component:Jc}),i.default.createElement(m,{path:sn,component:kc}),i.default.createElement(m,{path:Xo,component:Fc}),i.default.createElement(m,{path:`${yo}/:id`,component:Wc}),i.default.createElement(m,{path:`${Po}`,component:Hc,exact:!0}),i.default.createElement(m,{path:No,component:Gc,exact:!0}),i.default.createElement(R,{path:`${Zo}/:id`,component:jc,exact:!0}),i.default.createElement(m,{path:`${Ao}`,component:Bc}),i.default.createElement(m,{path:`${So}`,component:qc,exact:!0}),i.default.createElement(m,{path:bn,component:$c}),i.default.createElement(m,{path:wn,component:Vc}),i.default.createElement(m,{path:An,component:Kc}),i.default.createElement(m,{path:Cn,component:zc}),i.default.createElement(m,{path:On,component:Yc}),i.default.createElement(m,{path:Eo,component:Xa}),i.default.createElement(m,{path:it,component:za}),i.default.createElement(m,{path:go,component:Ja})));return r>0?i.default.createElement(xi,{onAction:t,throttle:1e3},o):o}onInitializationUnlockPage(){let{location:r}=this.props;return Boolean(dr(r.pathname,{path:Do,exact:!0}))}render(){let{isLoading:r,isLoadingHard:t,textDirection:o,loadingMessage:n,isMouseUser:c,browserEnvironment:u}=this.props,{os:d,browser:g}=u||{};return i.default.createElement("div",{className:(0,Xi.default)("app",{[`os-${d}`]:d,[`browser-${g}`]:g,"mouse-user-styles":c}),dir:o},i.default.createElement(Ot,null),i.default.createElement("div",{className:"main-container-wrapper"},r&&i.default.createElement(qn,null),!r&&t&&i.default.createElement(Tt,{loadingMessage:n}),this.renderRoutes()))}};pe.propTypes={currentCurrency:P.default.string.isRequired,setCurrentCurrencyToUSD:P.default.func.isRequired,isLoading:P.default.bool.isRequired,textDirection:P.default.string.isRequired,isUnlocked:P.default.bool.isRequired,setLastActiveTime:P.default.func.isRequired,history:P.default.object.isRequired,location:P.default.object.isRequired,isMouseUser:P.default.bool.isRequired,isLoadingHard:P.default.bool.isRequired,autoLockTimeLimit:P.default.number.isRequired,pageChanged:P.default.func.isRequired,browserEnvironment:P.default.object.isRequired};pe.contextTypes={t:P.default.func};function Zc(e){var u;let{appState:r}=e,{isLoading:t,isLoadingHard:o,loadingMessage:n}=r,{autoLockTimeLimit:c=0}=_o(e);return{textDirection:e.metamask.textDirection||"ltr",isLoading:t,isLoadingHard:o,loadingMessage:n,isUnlocked:e.metamask.isUnlocked,currentCurrency:(u=e.metamask.selectedCurrency)==null?void 0:u.isoCode,isMouseUser:e.appState.isMouseUser,autoLockTimeLimit:c,browserEnvironment:e.metamask.browserEnvironment,toastData:po(e)}}function Qc(e){return{setCurrentCurrencyToUSD:()=>e(xn("usd")),setLastActiveTime:()=>e(kn()),pageChanged:r=>e(Bn(r))}}var vt=xe(fr,I(Zc,Qc))(pe);s();a();var $e=class extends G.PureComponent{constructor(){super(...arguments);E(this,"state",{})}static getDerivedStateFromError(t){return{error:t}}componentDidCatch(t){Qt(t)}render(){let{error:t}=this.state,{store:o}=this.props;return t?G.default.createElement(tt,{store:o},G.default.createElement(rt,null,G.default.createElement(ot,null,G.default.createElement(mt,{error:t})))):G.default.createElement(tt,{store:o},G.default.createElement(hr,{hashType:"noslash"},G.default.createElement(rt,null,G.default.createElement(ot,null,G.default.createElement(vt,null)))))}};$e.propTypes={store:Qi.default.object.isRequired};var es=$e;s();a();s();a();s();a();var eu="metamask/send/OPEN_TO_DROPDOWN",tu="metamask/send/CLOSE_TO_DROPDOWN",ru="metamask/send/UPDATE_SEND_ERRORS",ou="metamask/send/RESET_SEND_STATE",nu="metamask/send/SHOW_GAS_BUTTON_GROUP",iu="metamask/send/HIDE_GAS_BUTTON_GROUP",ts={toDropdownOpen:!1,gasButtonGroupShown:!0,errors:{}};function yt(e=ts,r){switch(r.type){case eu:return{...e,toDropdownOpen:!0};case tu:return{...e,toDropdownOpen:!1};case ru:return{...e,errors:{...e.errors,...r.value}};case nu:return{...e,gasButtonGroupShown:!0};case iu:return{...e,gasButtonGroupShown:!1};case ou:return{...ts};default:return e}}s();a();function At(e={},r){let t={shouldClose:!1,menuOpen:!1,modal:{open:!1,modalState:{name:null,props:{}},previousModalState:{name:null}},sidebar:{isOpen:!1,transitionName:"",type:"",props:{}},alertOpen:!1,alertMessage:null,qrCodeData:null,networkDropdownOpen:!1,accountDetail:{subview:"transactions"},isLoading:!1,isLoadingHard:!1,warning:null,buyView:{},isMouseUser:!1,gasIsLoading:!1,defaultHdPaths:{trezor:"m/44'/60'/0'/0",ledger:"m/44'/60'/0'/0/0"},networksTabSelectedRpcUrl:"",networksTabIsInAddMode:!1,loadingMethodData:!1,requestAccountTabs:{},openMetaMaskTabs:{},currentWindowTab:{},showWhatsNewPopup:!0,homePageScrollTop:0,watchedSeed:{},popupCloseWhenUnmount:!1,imageObserve:null,showSupportedChainsFlag:!0,...e};switch(r.type){case vr:return{...t,networkDropdownOpen:!0};case yr:return{...t,networkDropdownOpen:!1};case Tr:return{...t,sidebar:{...r.value,isOpen:!0}};case Sr:return{...t,sidebar:{...t.sidebar,isOpen:!1}};case br:return{...t,alertOpen:!0,alertMessage:r.value};case wr:return{...t,alertOpen:!1,alertMessage:null};case Or:return{...t,qrCodeData:r.value};case gr:{let{name:o,...n}=r.payload;return{...t,modal:{open:!0,modalState:{name:o,props:{...n}},previousModalState:{...t.modal.modalState}}}}case Er:return{...t,modal:Object.assign(t.modal,{open:!1},{modalState:{name:null,props:{}}},{previousModalState:t.modal.modalState})};case kr:return{...t,accountDetail:{}};case Ar:return{...t,forgottenPassword:r.value};case Mr:return{...t,warning:null};case Nr:return{...t,warning:null};case _r:return{...t,accountDetail:{subview:"transactions",accountExport:"none",privateKey:""},warning:null};case Lr:return{...t,forgottenPassword:t.forgottenPassword?!t.forgottenPassword:null,accountDetail:{subview:"transactions",accountExport:"none",privateKey:""}};case Dr:return{...t,isLoading:!1,warning:null,scrollToBottom:!1,forgottenPassword:!1};case xr:return{...t,txId:r.id,warning:null,isLoading:!1};case Fr:return r.value.unconfirmedActionsCount>0?{...t,txId:null,warning:null}:{...t,shouldClose:!0,warning:null,txId:null,accountDetail:{subview:"transactions"}};case Wr:return{...t};case Cr:return{...t,warning:r.value||"Incorrect password. Try again."};case Pr:return{...t,warning:""};case jr:{let{device:o,path:n}=r.value,c={...t.defaultHdPaths};return c[o]=n,{...t,defaultHdPaths:c}}case Br:return{...t,isLoading:!0,loadingMessage:r.value};case $r:return{...t,isLoadingHard:!0,loadingMessage:r.value};case qr:return{...t,isLoading:!1};case Vr:return{...t,isLoadingHard:!1};case Ir:return{...t,warning:r.value,isLoading:!1};case Rr:return{...t,warning:void 0};case Ur:return{...t,accountDetail:{subview:"export",accountExport:"completed",privateKey:r.value}};case Yr:return{...t,isMouseUser:r.value};case Hr:return{...t,gasIsLoading:!0};case Gr:return{...t,gasIsLoading:!1};case Kr:return{...t,networksTabSelectedRpcUrl:r.value};case zr:return{...t,networksTabIsInAddMode:r.value};case Jr:return{...t,loadingMethodData:!0};case Xr:return{...t,loadingMethodData:!1};case Zr:return{...t,requestAccountTabs:r.value};case eo:return{...t,openMetaMaskTabs:r.value};case Qr:return{...t,currentWindowTab:r.value};case to:return{...t,showWhatsNewPopup:!1};case ro:return{...t,homePageScrollTop:r.value};case oo:return{...t,imageObserve:r.value};case io:return{...t,showSupportedChainsFlag:r.value};case no:return{...t,watchedSeed:r.value};case so:return{...t,popupCloseWhenUnmount:r.value};default:return t}}s();a();var os=_(Se()),su="metamask/gas/BASIC_GAS_ESTIMATE_LOADING_FINISHED",au="metamask/gas/BASIC_GAS_ESTIMATE_LOADING_STARTED",cu="metamask/gas/RESET_CUSTOM_DATA",uu="metamask/gas/SET_BASIC_GAS_ESTIMATE_DATA",lu="metamask/gas/SET_CUSTOM_GAS_LIMIT",pu="metamask/gas/SET_CUSTOM_GAS_PRICE",rs={customData:{price:null,limit:null},basicEstimates:{safeLow:null,average:null,fast:null},basicEstimateIsLoading:!0};function Ct(e=rs,r){switch(r.type){case au:return{...e,basicEstimateIsLoading:!0};case su:return{...e,basicEstimateIsLoading:!1};case uu:return{...e,basicEstimates:r.value};case pu:return{...e,customData:{...e.customData,price:r.value}};case lu:return{...e,customData:{...e.customData,limit:r.value}};case cu:return{...e,customData:(0,os.cloneDeep)(rs.customData)};default:return e}}s();a();s();a();var du=ae.invalidCustomNetwork,mu={state:ce.CLOSED,networkName:""},fu=In({name:du,initialState:mu,reducers:{openAlert:(e,r)=>{e.state=ce.OPEN,e.networkName=r.payload},dismissAlert:e=>{e.state=ce.CLOSED,e.networkName=""}}}),{actions:hu,reducer:_u}=fu,Pt=_u;var{openAlert:Zm,dismissAlert:Qm}=hu;s();a();s();a();s();a();var ns={[hi]:_i};s();a();var is={[Kn]:zn,[ii]:si,[ci]:ui,[li]:pi};s();a();var ss={[mi]:fi};var as={...ns,...is,...ss};var cs=lr({[ae.invalidCustomNetwork]:Pt,[ae.unconnectedAccount]:st,activeTab:e=>e===void 0?null:e,metamask:co,appState:At,history:jn,send:yt,nftSend:oi,newDapp:Vn,confirmTransaction:Yn,gas:Ct,localeMessages:ao,importAccount:ti,coinDetail:Qn,txHistory:ni,balanceSlice:Zn,isWhitelist:e=>e===void 0?null:e,animateCollect:ei,editWallet:ri,Nft:Xn,addressBookState:di,commonSend:at,walletConfig:Jn,businessSend:ct,...as});function Nt(e){return ur(cs,e,pr(Nn))}s();a();function gu({container:e=document.body,width:r="200px",height:t="200px",textAlign:o="center",textBaseline:n="middle",font:c="12px Microsoft Yahei",fillStyle:u="rgba(184, 184, 184, 0.3)",rotate:d="20",zIndex:g=1e4}={}){let S=document.createElement("canvas");S.setAttribute("width",r),S.setAttribute("height",t);let v=S.getContext("2d");v.textAlign=o,v.textBaseline=n,v.font=c,v.fillStyle=u,v.rotate(Math.PI/180*d),v.fillText(process.env.BUILD_VERSION,parseFloat(r)/2,parseFloat(t)/2);let B=S.toDataURL(),D=document.createElement("div"),w=`
    position:fixed;
    top:0;
    left:0;
    bottom:0;
    right:0;
    width:100%;
    height:100%;
    z-index:${g};
    pointer-events:none;
    background-repeat:repeat;
    background-image:url('${B}')`;D.setAttribute("style",w),D.classList.add("__wm"),e.insertBefore(D,e.firstChild)}var us=gu;var _s=_(ca());hs.default.config({EXPONENTIAL_AT:[-40,40]});$t.config({top:16});ps.default.setLevel(process.env.ASSETS_BUILD_TYPE==="dev"||process.env.ASSETS_BUILD_TYPE==="daily"?"debug":"warn");(process.env.ASSETS_BUILD_TYPE===Xe.DEV||process.env.ASSETS_BUILD_TYPE===Xe.DAILY)&&us();function gs(e,r){return Object.keys(e).reduce((t,o)=>(r[o]===!0?t[o]=e[o]:r[o]&&(t[o]=gs(e[o],r[o])),t),{})}function Eu(e){window.getCleanAppState=function(){let r=(0,ds.clone)(e.getState());return r.version=globalThis.platform.getVersion(),r.browser=window.navigator.userAgent,r},window.getSentryState=function(){let r=e.getState(),t=gs(r);return{browser:window.navigator.userAgent,store:t,version:globalThis.platform.getVersion()}}}var Tu=async()=>Promise.allSettled([ar(),cr()]);async function Su({metamaskState:e,isWhitelist:r},t,o){var D;e.featureFlags||(e.featureFlags={}),await Tu();let n={},c={};e.currentLocale&&(n=await et(e.currentLocale),c=await et(e.currentLocale,_s.LOCALE_TYPE.dex));let u={activeTab:o.activeTab,metamask:e,appState:{},localeMessages:{current:n,dexCurrent:c},isWhitelist:r};if(J()===fe){let{origin:w}=u.activeTab,y=Pn(u),p=ho(u),h=lo(u),f=uo(u);w&&f&&!h[w]&&y.length>0&&!y.includes(p)&&(u[ae.unconnectedAccount]={state:ce.OPEN},Fn(w))}let d={...u},g=Nt(d),S=fo(e.unapprovedTxs,e.unapprovedMsgs,e.unapprovedPersonalMsgs,e.unapprovedDecryptMsgs,e.unapprovedEncryptionPublicKeyMsgs,e.unapprovedTypedMessages,e.network,e.provider.chainId);return S.length>0&&g.dispatch(Rn({id:S[0].id})),t.onNotification(w=>{if(w.method==="sendUpdate"){let y=w.params[0];y!=null&&y.needUpdateChain?(Ze(y.chainList),me().setNeedUpdateChain(!1)):Ii(y.chainList,Xt)&&Ze(y.chainList),g.dispatch(Un(y))}else throw new Error(`Internal JSON-RPC Notification Not Handled:

 ${JSON.stringify(w)}`)}),globalThis.metamask={updateCurrentLocale:w=>{g.dispatch(Mn(w))},setProviderType:w=>{g.dispatch(Hn(w))},setFeatureFlag:(w,y)=>{g.dispatch(Gn(w,y))}},Zt(((D=e==null?void 0:e.remoteConfig)==null?void 0:D.networks)||[]),fs.createRoot(o.container).render(ms.default.createElement(es,{store:g})),e.currentLocale&&sr(e.currentLocale),g}function It(e,r){var o;let{backgroundConnection:t}=e;Vt(t),me().getCurrencies(),rr(t.refreshHttpDNS),t.getStateByDomain((o=e==null?void 0:e.activeTab)==null?void 0:o.origin,(n,{metamaskState:c,isWhitelist:u})=>{if(n){r(n);return}let{currentLocale:d}=c;nr(d),Su({metamaskState:c,isWhitelist:u},t,e).then(g=>{Eu(g),r(null,g)})})}window.logStateString=function(e){let r=window.getCleanAppState();globalThis.platform.getPlatformInfo((t,o)=>{if(t){e(t);return}r.platform=o;let n=JSON.stringify(r,null,2);e(null,n)})};window.logState=function(e){return window.logStateString((r,t)=>{r?console.error(r.message):e&&(0,ls.default)(t)})};s();a();var b=_(Bt());var Es=_(Se());var Ne=class{reload(){b.default.runtime.reload()}openTab(r){return new Promise((t,o)=>{b.default.tabs.create(r).then(n=>{let c=q();return c?o(c):t(n)}).catch(n=>{console.error(n)})})}openWindow(r){return new Promise((t,o)=>{b.default.windows.create(r).then(n=>{let c=q();return c?o(c):(this.lastOkPopupId=n.id,t(n))}).catch(n=>{console.error(n)})})}focusLastOkPopup(){this.lastOkPopupId&&this.getAllWindows().then(r=>{r.some(t=>t.id===this.lastOkPopupId)?this.focusWindow(this.lastOkPopupId):this.lastOkPopupId=""}).catch(Es.noop)}focusWindow(r){return new Promise((t,o)=>{b.default.windows.update(r,{focused:!0}).then(()=>{let n=q();return n?o(n):t()}).catch(n=>{console.error(n)})})}updateWindowPosition(r,t,o){return new Promise((n,c)=>{b.default.windows.update(r,{left:t,top:o}).then(()=>{let u=q();return u?c(u):n()}).catch(u=>{console.error(u)})})}getLastFocusedWindow(){return new Promise((r,t)=>{b.default.windows.getLastFocused().then(o=>{let n=q();return n?t(n):r(o)}).catch(o=>{console.error(o)})})}closeCurrentWindow(){return b.default.windows.getCurrent().then(r=>b.default.windows.remove(r.id))}getVersion(){return b.default.runtime.getManifest().version}openExtensionInBrowser(r=null,t=null){let o=b.default.runtime.getURL("home.html");t&&(o+=`?${t}`),r&&(o+=`#${r}`),this.openTab({url:o}),J()!==Qe&&window.close()}async openExtensionInPopup(r=null,t=null){let o=b.default.runtime.getURL("home.html");t&&(o+=`?${t}`),r&&(o+=`#${r}`);let{screenX:n,screenY:c,outerWidth:u}=window,d=Math.max(c,0),g=Math.max(n+(u-360),0);if(!n){let S=await this.getLastFocusedWindow();d=S.top,g=S.left+(S.width-360)}this.openWindow({url:o,type:"popup",width:360,height:600,top:d,left:g}),J()!==Qe&&window.close()}getPlatformInfo(r){try{b.default.runtime.getPlatformInfo().then(t=>{r(null,t)}).catch(t=>{console.error(t),r(t)})}catch(t){r(t);return}}showTransactionNotification(r,t){let{status:o,txReceipt:{status:n}={}}=r;o===nt.CONFIRMED?n==="0x0"?this._showFailedTransaction(r,"Transaction encountered an error."):this._showConfirmedTransaction(r,t):o===nt.FAILED&&this._showFailedTransaction(r)}getAllWindows(){return new Promise((r,t)=>{b.default.windows.getAll().then(o=>{let n=q();return n?t(n):r(o)}).catch(o=>{console.error(o)})})}getActiveTabs(){return new Promise((r,t)=>{b.default.tabs.query({active:!0}).then(o=>{let n=q();return n?t(n):r(o)}).catch(o=>{console.error(o)})})}currentTab(){return new Promise((r,t)=>{b.default.tabs.getCurrent().then(o=>{let n=q();n?t(n):r(o)}).catch(o=>{console.error(o)})})}switchToTab(r){return new Promise((t,o)=>{b.default.tabs.update(r,{highlighted:!0}).then(n=>{let c=q();c?o(c):t(n)}).catch(n=>{console.error(n)})})}closeTab(r){return new Promise((t,o)=>{b.default.tabs.remove(r).then(()=>{let n=q();n?o(n):t()}).catch(n=>{console.error(n)})})}_showConfirmedTransaction(r,t){this._subscribeToNotificationClicked();let o=mo(r,t),n=parseInt(r.txParams.nonce,16),c="Confirmed transaction",u=`Transaction ${n} confirmed! ${o.length?"View on blockchain browser":""}`;this._showNotification(c,u,o)}_showFailedTransaction(r,t){let o=parseInt(r.txParams.nonce,16),n="Failed transaction",c=`Transaction ${o} failed! ${t||r.err.message}`;this._showNotification(n,c)}_showNotification(r,t,o){b.default.notifications.create(o,{type:"basic",title:r,iconUrl:b.default.extension.getURL("../../static/images/icon-64.png"),message:t})}_subscribeToNotificationClicked(){b.default.notifications.onClicked.hasListener(this._viewOnEtherscan)||b.default.notifications.onClicked.addListener(this._viewOnEtherscan)}_viewOnEtherscan(r){r.startsWith("https://")&&b.default.tabs.create({url:r})}};s();a();var vs=_(Os()),ys=_(da());function As(e){let r=new vs.default;return(0,ys.default)(e,r,e,t=>{t&&console.error(t)}),r}s();a();var Gs=_(Hs()),js=_(ma());var Ht=class{constructor(r){this.connectionStream=r,this.notificationChannel=new js.default,this.requests=new Map,this.connectionStream.on("data",this.handleResponse.bind(this)),this.connectionStream.on("end",this.close.bind(this))}onNotification(r){this.notificationChannel.addListener("notification",t=>{r(t)})}close(){this.notificationChannel.removeAllListeners()}handleResponse(r){let{id:t,result:o,error:n,method:c,params:u}=r,d=this.requests.get(t);if(!(c&&u&&t)){if(c&&u&&!t){this.notificationChannel.emit("notification",r);return}if(!!d){if(n){let g=new Gs.EthereumRpcError(n.code,n.message,n.data);g.stack=n.stack,this.requests.delete(t),d(g);return}this.requests.delete(t),d(null,o)}}}},Du=e=>{let r=new Ht(e);return new Proxy(r,{get:(t,o)=>t[o]?t[o]:(...n)=>{let c=n[n.length-1],u=n.slice(0,-1),d=ai();t.requests.set(d,c),t.connectionStream.write({jsonrpc:"2.0",method:o,params:u,id:d})}})},Bs=Du;function xu(e){let r=new Ys.default;r.pipe(e).pipe(r),e.on("error",console.error.bind(console)),r.on("error",console.error.bind(console)),globalThis.ethereumProvider=r,globalThis.ethQuery=new Vs.default(r),globalThis.eth=new $s.default(r)}function Mu(e,r){let t=Bs(e);r(null,t)}function Uu(e,r){let t=As(e);Mu(t.createStream("controller"),r),xu(t.createStream("provider"))}function ku(e,r,t,o){Uu(t,(n,c)=>{if(n){o(n);return}It({activeTab:e,container:r,backgroundConnection:c},o)})}async function Fu(e){return new Promise(r=>{if(e!==fe){r({});return}Gt.default.tabs.query({active:!0,currentWindow:!0}).then(t=>{let[o]=t,{id:n,title:c,url:u}=o,{origin:d,protocol:g}=u?new URL(u):{};if(!d||d==="null"){r({});return}r({id:n,title:c,origin:d,protocol:g,url:u})}).catch(t=>{console.error(t)})})}async function Wu(){globalThis.platform=new Ne;let e=J(),r=Gt.default.runtime.connect({name:e}),t=new qs.default(r);function o(c){let u=document.getElementById("app-content");ku(c,u,t,d=>{if(d)throw d})}let n=await Fu(e);tr()===er&&(n.origin="https://www.okx.com"),o(n)}Wu().catch(Ks.default.error);

window.inOKXExtension = true;
window.ASSETS_BUILD_TYPE = "publish";

