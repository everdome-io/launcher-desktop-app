import{a as ft,b as xt,d as v,e as C,f as V,i as Tt,j as vt,k as Nt}from"./chunk-SRF3OTW4.js";import{a as ce}from"./chunk-4J3KLI53.js";import{b as mt,f as _t,g as ut,h as ct,i as pt,n as te,o as dt}from"./chunk-TNEPVJCF.js";import{b as X}from"./chunk-4SCEKLXQ.js";import{a as at,b as ue}from"./chunk-VNM7HA44.js";import{N as Ve,P as Ze}from"./chunk-SBW523XW.js";import{l as Ye,m as ze}from"./chunk-NEW56Z2U.js";import{g as rt}from"./chunk-HX34N4W4.js";import{a as Zt}from"./chunk-TNVBYBO5.js";import{Aa as me,Ba as _e,Ca as lt,Ia as De,Ka as Le,L as ee,Na as st,T as k,fa as Xe,oa as je,pa as qe,qa as g,ra as Qe,sa as re,ta as Re,ua as et,va as tt,wa as ot,xa as it,y as Je,ya as nt,za as ae}from"./chunk-KRRNVCWZ.js";import{Af as $,Bb as Be,Gf as S,Gh as We,Hf as w,Jf as Y,La as M,Nf as U,Wb as He,de as se,e as I,ee as b,fa as ie,ga as ne,i as f,ja as A,k as x,ke as Ue,na as Ae,oa as Vt,pd as le,pk as Ge,td as $e,tg as B,vl as Ke,wb as Me,xb as Se}from"./chunk-YC2Z7II3.js";f();x();var E=I(A());var kt=I(Ae());f();x();var p=I(A()),wt=I(Vt()),oe=I(Zt());var Kt="/static/images/tx-history/default-protocol.svg",gt="/static/images/tx-history/default-nft-detail.svg",de="/static/images/tx-history/default-coin.svg",Yt="/static/images/tx-history/default-nft.svg",{NFT_AUTHORIZATION:fe,NFT_CANCEL_AUTHORIZATION:xe,CANCEL_NFT:Te,AUTHORIZATION:ve,CANCEL_AUTHORIZATION:Ne,REGISTRATION:ht,DAPP_APPLY:we,DAPP_REDEEM:ge,DAPP_CLAIM:he}=w,j={[ve]:"wallet_extension_header_approval_title_approve",[Ne]:"wallet_extension_header_approval_title_cancel_approval",[Te]:"wallet_extension_text_cancel_listing",[fe]:"wallet_extension_approve_text_approve",[xe]:"wallet_extension_title_revoke_approve",[we]:"wallet_extension_subtitle_investwith",[ge]:"wallet_extension_subtitle_redeem_from",[he]:"wallet_extension_subtitle_claim"},pe={[ve]:"wallet_extension_header_approval_title_for",[Ne]:"wallet_extension_header_approval_title_for",[Te]:"wallet_extension_text_cancel_listing_on",[fe]:"wallet_extension_approve_text_for",[xe]:"wallet_extension_approve_text_for",[we]:"wallet_extension_subtitle_into",[ge]:"wallet_extension_subtitle_receive",[he]:"wallet_extension_subtitle_from"};function It(e){return e?gt:de}function zt({className:e,label:t,children:i}){return p.default.createElement("div",{className:(0,oe.default)("coin-flow__label",e)},p.default.createElement("div",{className:"coin-flow__label-text"},t),p.default.createElement("div",null,i))}var Ct={fontSize:"12px",color:"#929292",float:"right"},yt={display:"inline-block",float:"right"};function Jt({style:e,styles:t,isNFT:i,icon:l,title:o,subTitle:n,right:a}){let{title:d,subTitle:u}=t!=null?t:{},[_,c]=(0,p.useState)(null),[m,r]=(0,p.useState)("none"),T=typeof l=="string"?p.default.createElement(at,{className:(0,oe.default)({"coin-flow__record-icon-nft":i}),src:l,alt:""}):l;return(0,p.useLayoutEffect)(()=>{_&&a&&r(`${198-_.clientWidth}px`)},[a,_]),p.default.createElement("div",{className:"coin-flow__record",style:e},p.default.createElement("div",{className:"coin-flow__record-icon",ref:c},T),p.default.createElement("div",{className:(0,oe.default)("coin-flow__record-left-box",{"coin-flow__record-left-box--has-right":!!a})},p.default.createElement("div",{className:"coin-flow__record-title-box",style:{maxWidth:m}},p.default.createElement(M,{title:o,disabled:!(o.length>=12&&a||o.length>=20),placement:M.DIRECTION.bottom,style:{width:"auto",maxWidth:"100%"}},p.default.createElement("div",{className:"coin-flow__record-title",style:d},o)),n&&p.default.createElement("div",{className:"coin-flow__record-sub-title",style:u},n))),a&&p.default.createElement("div",{className:"coin-flow__record-right-box"},a))}function Oe({logo:e}){let{middleLogo:t,bottomRightLogo:i,topRightLogo:l}=e||{},o=i&&i.length>0,n=l&&l.length>0;return p.default.createElement(p.default.Fragment,null,p.default.createElement(ue,{srcset:t&&t.length>0?t:[de],topRightLogo:l,bottomRightLogo:i}),(n||o)&&p.default.createElement("div",{className:"coin-flow__record-icon__mul-icons-wrap"},n&&p.default.createElement(ue,{className:"coin-flow__mul-icons__top-right",size:"small",srcset:l}),o&&p.default.createElement(ue,{className:"coin-flow__mul-icons__bottom-right",size:"small",srcset:i})))}function Xt(e){let t=g(),i=t("wallet_extension_history_text_unknown_token"),l=t("wallet_extension_history_text_unknown_protocol");return(0,p.useMemo)(()=>{let{txType:o,txStatus:n,approveInfo:a,output:d}=e,{investInCoins:u}=e.investTxData||{};switch(o){case Ne:case ve:return{label:t(j[o]),items:[{icon:a.icon||de,title:a.name||i}]};case xe:case fe:return{label:t(j[o]),items:[{icon:a.nftCollectionIcon||Yt,title:a.nftCollectionName||t("wallet_extension_title_approve_nft_collection")}]};case Te:return{label:t(j[o]),items:(d||[]).map(({nftId:_,icon:c,name:m})=>({isNFT:!!_,icon:c||gt,title:m||t("wallet_extension_title_approve_nft")}))};case ht:return{label:"",items:[{icon:a.icon||de,title:a.name}]};case we:return{label:t(j[o]),items:(u||[]).map(({tokenName:_,num:c,vdecimalNum:m,tokenLogo:r})=>(c=c?`- ${k(c,{fixed:m})}`:"--",{icon:r!=null?r:i,title:`${c} ${_}`}))};case ge:{let{investInfo:_,redeemShowNum:c}=e.investTxData||{},{investName:m,platformName:r,investLogo:T}=_||{},N=null,h=!0,D={},O={},K=e.investTxData.investmentDetailType;if((K==U.FARM_LP_TOKEN||K==U.FARM_OTHER_TOKEN)&&(h=!1,D=Ct,O=yt),c&&u&&u.length){let Ee=u[0].num?`- ${k(u[0].num,{fixed:u[0].vdecimalNum})}`:"--";N=p.default.createElement("div",{className:"coin-flow__invest-apply-right",style:O},p.default.createElement("div",{className:"coin-flow__invest-apply-num"},p.default.createElement(M,{title:Ee+(h?u[0].tokenName:""),placement:M.DIRECTION.bottom,style:{maxWidth:"100%",flexDirection:"row-reverse"}},p.default.createElement("div",{style:{width:"auto",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},Ee))),p.default.createElement("div",{className:"coin-flow__invest-apply-token",style:D},u[0].tokenName))}return{label:t(j[o]),items:[{icon:p.default.createElement(Oe,{logo:T}),title:m!=null?m:i,right:N,subTitle:p.default.createElement("div",{className:"coin-flow__invest-platform-name"},r!=null?r:l)}]}}case he:{let _;return n===S.PENDING?_=p.default.createElement("div",{className:"coin-flow__claim"},t("wallet_extension_subtitle_claimwith"),p.default.createElement(M,{title:t("wallet_extension_card_ntfy_claim_text"),placement:M.DIRECTION.bottomLeft},p.default.createElement("span",{className:"okds-information-circle",style:{color:"#929292"}}))):_=t(j[o]),{label:_,items:(u||[]).map(({tokenName:c,num:m,vdecimalNum:r,tokenLogo:T})=>(m=m?`+ ${k(m,{fixed:r})}`:"--",{icon:T!=null?T:i,title:`${m} ${c}`,styles:{title:{color:"#05C28C"}}}))}}default:return d&&d.length>0?{label:t("wallet_extension_header_redeem_title_sent"),items:(d||[]).map(({name:_,amount:c,icon:m,vdecimalNum:r,nftId:T})=>({isNFT:!!T,icon:m||It(T),title:`- ${k(c,{fixed:r})} ${_}`}))}:null}},[t,e])}function jt(e){let t=g(),i=t("wallet_extension_history_text_unknown_token"),l=t("wallet_extension_history_text_unknown_protocol");return(0,p.useMemo)(()=>{let{txType:o,contractInfo:n,input:a}=e,{investInfo:d,investOutCoins:u,investmentDetailType:_}=e.investTxData||{};switch(o){case fe:case xe:case Ne:case ve:case Te:return{label:t(pe[o]),items:[{icon:n.icon||Kt,title:n.name||t("wallet_extension_history_text_unknown_protocol"),subTitle:o!==w.CANCEL_NFT&&n.address&&p.default.createElement(V,{className:"coin-flow__record-address",label:B(n.address),value:n.address,message:t("wallet_extension_popup_title_receiving_address_copied")})}]};case we:{let{investName:c,platformName:m,investLogo:r}=d||{},T,N={},h={};if(e.investTxData.investmentDetailType==U.FARM_OTHER_TOKEN&&(N=Ct,h=yt),(_===U.SAVE_OTHER_COIN||_===U.VAULTS_OTHER_COIN||_===U.FARM_OTHER_TOKEN)&&u&&u.length>0){let[{tokenName:D,num:O,vdecimalNum:K}]=u;T=p.default.createElement("div",{className:"coin-flow__invest-apply-right",style:h},p.default.createElement("div",{className:"coin-flow__invest-apply-num"},p.default.createElement(X,{text:O?k(O,{fixed:K}):"--",maxWidth:"113px"})),p.default.createElement("div",{className:"coin-flow__invest-apply-token",style:N},D))}return{label:t(pe[o]),items:[{icon:p.default.createElement(Oe,{logo:r}),title:c!=null?c:i,subTitle:p.default.createElement("div",{className:"coin-flow__invest-platform-name"},m!=null?m:l),right:T}]}}case ge:return!u||(u==null?void 0:u.length)===0?null:{label:t(pe[o]),items:(u||[]).map(({tokenName:c,num:m,tokenLogo:r,vdecimalNum:T,tokenId:N})=>{let h;m?h=`+ ${k(m,{fixed:T})}`:h="--";let D=e.txStatus===S.SUCCESS&&N,O=D?`${h} ${c} #${D}`:`${h} ${c}`;return{icon:r,title:O}}),className:"coin-flow__receive"};case he:{let{platformName:c,investLogo:m,investName:r}=d||{};return{label:t(pe[o]),items:[{icon:p.default.createElement(Oe,{logo:m}),title:r!=null?r:i,subTitle:p.default.createElement("div",{className:"coin-flow__invest-platform-name"},c!=null?c:l)}]}}case ht:return null;default:return a&&a.length>0?{label:t("wallet_extension_header_redeem_title_reveive"),items:a.map(({name:c,amount:m,icon:r,vdecimalNum:T,nftId:N})=>(r=r||It(N),{isNFT:!!N,icon:r,title:`+ ${k(m,{fixed:T})} ${c}`})),className:"coin-flow__receive"}:null}},[t,e])}function ke({data:e}){let{txType:t}=e,i=Xt(e),l=jt(e);if(!i&&!l||t===w.CANCEL_NFT&&i.items.length===0)return null;let o=!i||!l,n=a=>{if(!a)return null;let{items:d,label:u,titleStyle:_={},subTitleStyle:c={},...m}=a;return p.default.createElement(zt,{...m,label:u},d.map((r,T)=>p.default.createElement(Jt,{styles:{title:_,subTitle:c},...r,key:T})))};return p.default.createElement("div",{className:(0,oe.default)("coin-flow",{"coin-flow__hidden-label":o})},n(i),n(l))}var bt=ke;ke.propTypes={data:wt.default.object};ke.defaultProps={data:{}};f();x();var Ie=I(A());f();x();var qt={"tx-detail-completed":"wallet_extension_history_tab_completed1","tx-detail-pending":"wallet_extension_history_status_pending","tx-detail-waiting":"wallet_extension_history_status_waiting","tx-detail-speeding":"wallet_extension_send_status_speedingup1","tx-detail-canceling":"wallet_extension_send_status_canceling1","tx-detail-speedingcancel":"wallet_extension_send_status_canceling1","tx-detail-failed":"wallet_extension_history_status_failed1","tx-detail-canceled":"wallet_extension_send_status_canceled"};function Qt({data:e}){let{txStatus:t,isShowPending:i,repeatTxType:l}=e,o=g(),n="";return t===S.CONFIRMING||t===S.SUCCESS?t===S.SUCCESS&&l===Y.SPEEDING_CANCEL||l===Y.CANCELING?n="tx-detail-canceled":n="tx-detail-completed":t===S.PENDING?(i&&l===Y.CONFIRMING&&(n="tx-detail-pending"),!i&&l===Y.CONFIRMING&&(n="tx-detail-waiting"),l===Y.SPEEDING&&(n="tx-detail-speeding"),l===Y.CANCELING&&(n="tx-detail-canceling"),l===Y.SPEEDING_CANCEL&&(n="tx-detail-speedingcancel")):t===S.ERROR&&(n="tx-detail-failed"),Ie.default.createElement("div",{className:"tx-detail-status"},Ie.default.createElement("div",{className:`tx-detail-icon ${n}`}),Ie.default.createElement("div",{className:"tx-detail-text"},o(qt[n])))}var Et=Qt;f();x();var s=I(A());var St=I(Ae());f();x();var P=I(A());function Rt({mainCoinId:e}){let t=g(),{coin:i}=ee(e);return P.default.createElement(C,{label:t("wallet_extension_mid_text_network"),value:P.default.createElement("div",{className:"tx-detail-info__network"},P.default.createElement("img",{src:i.image,alt:""}),i.chainName)})}function eo({data:e}){let t=g(),i=b($),{txTime:l,txHash:o,from:n}=e;return P.default.createElement("div",{className:"tx-detail-info"},P.default.createElement(C,{label:t("wallet_extension_info_text_type"),value:t("wallet_extension_history_text_change_pubkey")}),P.default.createElement(C,{label:t("wallet_extension_mid_text_time"),value:ie(l,{format:"yyyyMMddHHmmss",locale:i})}),P.default.createElement(C,{label:t("wallet_extension_history_item_address"),value:P.default.createElement(V,{label:B(n),value:n,message:t("wallet_extension_popup_title_receiving_address_copied")})}),P.default.createElement(Rt,{...e}),P.default.createElement(C,{label:t("wallet_extension_mid_text_transaction_hash"),value:P.default.createElement(V,{label:B(o),value:o,message:t("wallet_extension_popup_title_transaction_hash_copied")})}))}var At=eo;function to({txType:e,investTxData:t}){let i=g();if(!t||!t.lpTokenInfo||[U.FARM_LP_TOKEN,U.FARM_OTHER_TOKEN].includes(t==null?void 0:t.investmentDetailType))return null;let l;if(e===w.DAPP_APPLY?l="wallet_extension_info_receive":e===w.DAPP_REDEEM&&(l="wallet_extension_info_pay"),!l)return null;let{num:o,tokenName:n}=t.lpTokenInfo;return s.default.createElement(C,{label:i(l),value:`${o?k(o,{fixed:10}):"--"}${n}`})}function oo({title:e}){let t=g();return s.default.createElement(C,{label:t("wallet_extension_info_text_type"),value:e})}function io(e){let{txType:t,approveInfo:i}=e,l=g(),{amount:o,vdecimalNum:n,decimalNum:a}=i||{},d=Je(_=>k(Se(_||"0",10**(a||0)),{fixed:n||0})),u=(0,s.useMemo)(()=>o==="115792089237316195423570985008687907853269984665640564039457584007913129639935"?l("wallet_extension_mid_text_unlimited"):d(o),[o]);return t!==w.AUTHORIZATION?null:s.default.createElement(C,{label:l("wallet_extension_mid_text_approved_amount"),value:u})}function no({txStatus:e,totalConfirm:t,confirmedCount:i}){let l=g();return e===S.PENDING||e===S.ERROR||typeof t!="number"||t<=0||i<0||i>=t?null:s.default.createElement(C,{label:l("wallet_extension_mid_text_block_confirmation"),value:i})}function lo({txType:e}){let t=g();return e!==w.NFT_AUTHORIZATION?null:s.default.createElement(C,{label:t("wallet_extension_text_approved_asset"),value:s.default.createElement("div",null,t("wallet_extension_approve_all_nft_collection"))})}function so({mainCoinId:e}){let t=g(),{coin:i}=ee(e);return s.default.createElement(C,{label:t("wallet_extension_mid_text_network"),value:s.default.createElement("div",{className:"tx-detail-info__network"},s.default.createElement("img",{src:i.image,alt:""}),i.chainName)})}function Dt({address:e,network:t}){let i=g(),[l,o]=(0,s.useState)(!1),[n,a]=(0,s.useState)({}),[d,u]=(0,s.useState)(""),_=st(()=>{u(ce.TYPE.ADD),a({address:e,network:t}),o(!0)}),c=r=>{o(!1),setTimeout(()=>{u(ce.TYPE.EDIT),a({address:r}),o(!0)})},m=()=>{o(!1),a({}),u("")};return s.default.createElement(s.default.Fragment,null,s.default.createElement("div",{className:"tx-detail-info__add-address"},s.default.createElement(M,{className:"tx-detail-info__add-address__tooltip",title:i("wallet_extension_history_pop_tap_to_add"),type:M.TYPES.neutral,placement:M.DIRECTION.bottomRight},s.default.createElement("img",{className:"tx-detail-info__add-address__img",src:"/static/images/address-book/add-border.svg",alt:"add",onClick:_}))),l&&s.default.createElement(ce,{type:d,data:n,onClose:m,onChangeToEdit:c}))}function ro({from:e,mainCoinId:t,txType:i}){let l=g(),o=De(t),n=Le(o),{label:a,canAdd:d}=(0,s.useMemo)(()=>{let u=!1,_;return(i===w.TRANS_IN||i===w.TRANS_OUT||i===w.SEND_NFT||i===w.RECEIVE_NFT)&&(_=n(e),u=!_),{label:_?s.default.createElement(X,{maxWidth:"200px",text:_.name}):B(e),canAdd:u}},[e,i,n]);return s.default.createElement(C,{label:l("wallet_extension_mid_text_from"),value:s.default.createElement(s.default.Fragment,null,s.default.createElement(V,{label:a,value:e,message:l("wallet_extension_popup_title_receiving_address_copied")}),d&&s.default.createElement(Dt,{address:e,network:o}))})}function ao({to:e,txType:t,contractInfo:i,mainCoinId:l}){let o=g(),n=De(l),a=Le(n),{label:d,toAddress:u,clipboardLabel:_,canAdd:c}=(0,s.useMemo)(()=>{let m,r,T,N=!1;if(t===w.TRANS_IN||t===w.TRANS_OUT||t===w.SEND_NFT||t===w.RECEIVE_NFT){let h=a(e);N=!h,m=o("wallet_extension_mid_text_to"),r=h?s.default.createElement(X,{maxWidth:"200px",text:h.name}):B(e),T=e}else{let{icon:h,name:D,address:O}=i||{};m=t===w.REGISTRATION?o("wallet_extension_item_register_address"):o("wallet_extension_mid_text_interaction_address"),t===w.AUTHORIZATION||t===w.CANCEL_AUTHORIZATION||t===w.NFT_AUTHORIZATION||t===w.NFT_CANCEL_AUTHORIZATION?(T=e,r=B(e)):(T=O,T&&(D?r=s.default.createElement("div",{className:"tx-detail-info__to-name"},h&&s.default.createElement("img",{src:h,alt:""}),s.default.createElement(X,{maxWidth:"180px",text:D})):r=B(T)))}return{label:m,toAddress:T,clipboardLabel:r,canAdd:N}},[o,e,t,i,a]);return s.default.createElement(C,{label:d,value:u?s.default.createElement(s.default.Fragment,null,s.default.createElement(V,{label:_,value:u,message:o("wallet_extension_popup_title_receiving_address_copied")}),c&&s.default.createElement(Dt,{address:u,network:n})):null})}function mo({mainCoinId:e,txStatus:t,serviceCharge:i,chainSymbol:l,gasPrice:o,gasLimit:n,serviceChargeUsd:a,feeName:d,feeDecimalNum:u,feeVdecimalNum:_}){let c=g(),m=le(e),r=$e(e),{coin:T}=ee(e),N=b(We),h=ne.thousandFormat(Xe(o)),D,O,K;r?(D=u,O=_,K=d):(D=T.decimals,O=T.vdecimalNum,K=l);let Fe=`${k(Se(i||"0",10**(D||0)),{fixed:O||0})} ${K}`;if((m||r)&&t!==S.PENDING){let{usdToThisRate:Gt}=N,R=Me(a,Gt);Be(R,.01)?R=`${N.symbol}<0.01`:R=`${N.symbol}${ne.thousandFormat(He(R))}`,Fe+=` (${R})`}return s.default.createElement(s.default.Fragment,null,s.default.createElement(C,{label:c("wallet_extension_mid_text_network_fee"),value:Fe}),m&&t===S.PENDING&&s.default.createElement("div",{className:"tx-detail-info__gas-fee"},c("wallet_extension_popup_cancle_transaction_gasprice_gaslimit",{gasPrice:h,gasLimit:ne.thousandFormat(n)})))}function _o({memo:e}){let t=g();return(0,St.isNil)(e)?null:s.default.createElement(C,{label:t("wallet_extension_text_memocontent"),value:s.default.createElement(X,{text:e||"--",maxWidth:"260px"})})}function uo({data:e}){let t=g(),i=b($),l=re(e),{txTime:o,txHash:n,txType:a}=e;return a===w.ZKSPACE_REGISTER?s.default.createElement(At,{data:e}):s.default.createElement("div",{className:"tx-detail-info"},s.default.createElement(to,{...e}),l?s.default.createElement(oo,{title:l}):s.default.createElement(s.default.Fragment,null),s.default.createElement(C,{label:t("wallet_extension_mid_text_time"),value:ie(o,{format:"yyyyMMddHHmmss",locale:i})}),s.default.createElement(lo,{...e}),s.default.createElement(io,{...e}),s.default.createElement(no,{...e}),s.default.createElement(ro,{...e}),s.default.createElement(ao,{...e}),s.default.createElement(so,{...e}),s.default.createElement(mo,{...e}),s.default.createElement(_o,{...e}),s.default.createElement(C,{label:t("wallet_extension_mid_text_transaction_hash"),value:s.default.createElement(V,{label:B(n),value:n,message:t("wallet_extension_popup_title_transaction_hash_copied")})}))}var Lt=uo;f();x();var H=I(A());function co({data:e,onRefresh:t}){let i=g(),{txStatus:l,explorerUrl:o,isShowSpeedUp:n,isShowCancel:a,isShowSpeedupCancel:d,mainCoinId:u}=e,[_,c]=(0,H.useState)(!1),[m,r]=(0,H.useState)(!1),T=le(u);return H.default.createElement("div",{className:"tx-detail-action"},H.default.createElement(Tt,{url:o,text:i("wallet_extension_mid_link_explorer")}),T&&l===S.PENDING&&H.default.createElement(H.default.Fragment,null,H.default.createElement(vt,{isShowCancel:a,isShowSpeedUp:n,isShowSpeedupCancel:d,onCancel:()=>{c(!0)},onSpeedUp:()=>{r(!0)}}),_&&H.default.createElement(ft,{visible:_,tx:e,onConfirm:N=>{t(N),c(!1)},onClose:()=>{c(!1)}}),m&&H.default.createElement(xt,{visible:m,tx:e,onConfirm:N=>{t(N),r(!1)},onClose:()=>{r(!1)}})))}var Ot=co;function po(e){let t=g(),{txType:i,approveInfo:l}=e||{};return lt(i,{symbol:(l==null?void 0:l.name)||t("wallet_extension_history_text_unknown_token")})}function fo({params:e,onRefresh:t,onClose:i}){let l=se(),o=(0,E.useRef)(""),[n,a]=(0,E.useState)(),d=po(n),u=b(_t),_=b(ut),c=r=>{if(!e)return;let{coinId:T,address:N}=e;!r&&l(Ve()),Ke({coinId:T,txId:o.current,address:N}).then(h=>{e&&!(0,kt.isEmpty)(h)&&a(h)}).catch(()=>{}).finally(()=>{l(Ze())})},m=()=>{Ye(null),ze(null),c(!0)};return(0,E.useEffect)(()=>{e?(o.current=e.txId,c()):(o.current="",a(null))},[e]),(0,E.useEffect)(()=>{var r;(u&&((r=n==null?void 0:n.orderTxIdList)==null?void 0:r.includes(u.txId))||_&&_.txId===o.current&&_.confirmedCount<=_.totalConfirm)&&m()},[u,_]),!n||!e?null:E.default.createElement("div",{className:"tx-detail"},E.default.createElement(rt,{title:"",onBack:i}),E.default.createElement(Nt,{message:n.failReason}),E.default.createElement("div",{className:"tx-detail__inner"},E.default.createElement(Et,{data:n}),E.default.createElement(bt,{data:n}),E.default.createElement("div",{className:"tx-detail__underline"}),E.default.createElement(Lt,{data:n}),E.default.createElement(Ot,{data:n,onRefresh:r=>{o.current=r,m(),t&&t()}})))}var Pe=fo;f();x();f();x();var Ce=I(A());f();x();var W=I(A());var xo=({data:e={},onClick:t,onRepeat:i})=>{let l=Ue(),o=b($),n=Qe(e),a=et(e),d=re(e),u=Re(e,o),_=me(e),c=ae(e),m=qe(e),r=_e(u,a),T=W.default.createElement(v.Label,{className:"tx-history-ml4",type:_,text:c,data:e}),N=(e.txType===w.DEX_CROSS_CHAIN_SWAP||e.txType===w.GAS_STATION)&&e.orderId;return W.default.createElement(v.ItemContainer,{onClick:()=>{N&&l.push(`${Ge}/${e.orderId}`),t()}},W.default.createElement(v.Row,{assets:a,align:r},W.default.createElement(v.Info,{icons:n,title:d,details:u,label:T,data:e}),W.default.createElement(v.Assets,{assets:a})),m&&W.default.createElement(v.NFTs,{data:e}),!N&&W.default.createElement(v.Actions,{data:e,onRepeat:i}))},Pt=(0,W.memo)(xo);var To=({data:e={},onClick:t,onRepeat:i})=>Ce.default.createElement(Pt,{data:e,onClick:t,onRepeat:i}),q=(0,Ce.memo)(To);f();x();var L=I(A());f();x();var Q=I(A());var vo=({date:e,list:t,onClick:i})=>Q.default.createElement(v.List,null,Q.default.createElement(v.Date,null,e),t.map((l,o)=>Q.default.createElement(q,{data:l,key:o,onClick:()=>{i(l)}}))),Ft=(0,Q.memo)(vo);var No=({pendingList:e,completedList:t,isLoading:i,onRepeat:l,onClick:o,onContainer:n})=>{let[a,d]=(0,L.useState)({}),[u,_]=(0,L.useState)(0);return i||!e?null:!i&&e.length===0&&t.length===0?L.default.createElement(v.Empty,{top:72}):L.default.createElement(v.ListContainer,{onContainer:n},L.default.createElement(v.Dialogs,{data:a,type:u,onConfirm:()=>{d({}),_(0),l()},onCancel:()=>{_(0)}}),e.length>0?L.default.createElement(v.PendingTag,null):L.default.createElement(L.default.Fragment,null),e.map((c,m)=>L.default.createElement(q,{data:c,key:m,onClick:()=>{o(c)},onRepeat:r=>{d(c),_(r)}})),t.map(({date:c,list:m},r)=>L.default.createElement(Ft,{date:c,list:m,key:r,onClick:o})))},Mt=(0,L.memo)(No);var wo={VirtualItem:q,HistoryList:Mt};f();x();f();x();f();x();var F=I(A());f();x();var G=I(A());f();x();var ye=I(A());f();x();var Z=I(A());var go=({data:e={},onClick:t,onRepeat:i})=>{let l=b($),o=tt(e),n=ot(e),a=it(e,l),d=nt(e),u=_e(a,d),_=me(e),c=ae(e),m=Z.default.createElement(v.Label,{className:"tx-history-ml4",type:_,text:c,data:e});return Z.default.createElement(v.ItemContainer,{onClick:t},Z.default.createElement(v.Row,{assets:d,align:u},Z.default.createElement(v.Info,{icons:o,title:n,details:a,label:m,data:e}),Z.default.createElement(v.Assets,{assets:d})),Z.default.createElement(v.Actions,{data:e,onRepeat:i}))},Bt=(0,Z.memo)(go);var ho=({data:e={},onRepeat:t,onClick:i})=>ye.default.createElement(Bt,{data:e,onClick:i,onRepeat:t}),be=(0,ye.memo)(ho);var Io=({pendingList:e,onRepeat:t,onClick:i})=>{let[l,o]=(0,G.useState)({}),[n,a]=(0,G.useState)(0);return G.default.createElement(G.default.Fragment,null,G.default.createElement(v.Dialogs,{data:l,type:n,onConfirm:()=>{o({}),a(0),t()},onCancel:()=>{a(0)}}),e.map((d,u)=>G.default.createElement(be,{data:d,key:u,onRepeat:_=>{o(d),a(_)},onClick:()=>{i(d)}})))},Ht=(0,G.memo)(Io);f();x();var z=I(A());var Co=({completedList:e,onClick:t})=>z.default.createElement(z.default.Fragment,null,e.map(({date:i,list:l},o)=>z.default.createElement(v.List,{key:o},z.default.createElement(v.Date,null,i),l.map((n,a)=>z.default.createElement(be,{data:n,key:a,onClick:()=>{t(n)}}))))),$t=(0,z.memo)(Co);var yo=({txList:e,isLoading:t,onRepeat:i})=>{let[l,o]=(0,F.useState)(),n=b($),[a,d]=(0,F.useMemo)(()=>je(e,n,!0),[e,n]);return!t&&a.length===0&&d.length===0?F.default.createElement(v.Empty,null):t||!Array.isArray(e)?null:F.default.createElement("div",{className:"coin-history__list"},F.default.createElement(Ht,{pendingList:a,onRepeat:i,onClick:o}),F.default.createElement($t,{completedList:d,onClick:o}),F.default.createElement(Pe,{params:l,onRefresh:i,onClose:()=>{o(null)}}))},Ut=(0,F.memo)(yo);var bo={TxList:Ut};f();x();var J=I(A());var Wt=I(Ae());function Tl({scrollContainer:e,selector:t=".tx-history-item-container",index:i=15},l){let o=se(),n=(0,J.useRef)(null),a=b(mt),d=b(ct),u=b(pt),[_,c]=(0,J.useState)(0);(0,J.useLayoutEffect)(()=>{let m;if(e){let r=e.querySelectorAll(t);m=(0,Wt.throttle)(()=>{let{bottom:T}=e.getBoundingClientRect(),{top:N}=n.current.getBoundingClientRect();o(te(N>=T))},200),n.current=r[i],n.current?(m(),e.addEventListener("scroll",m)):o(te(!0))}else o(te(!0));return()=>{e&&(e.removeEventListener("scroll",m),n.current=null)}},[_,e,t,i,a]),(0,J.useEffect)(()=>{d&&u&&(l&&l(),o(te(!1)),o(dt(!1)),c(m=>{let r=m+1;return r>=1e6&&(r=1),r}))},[d,u])}export{Pe as a,bo as b,wo as c,Tl as d};

window.inOKXExtension = true;
window.ASSETS_BUILD_TYPE = "publish";

