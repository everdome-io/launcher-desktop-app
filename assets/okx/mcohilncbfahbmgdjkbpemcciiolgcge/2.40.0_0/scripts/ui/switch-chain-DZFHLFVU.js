import{Ga as S,Ya as U,Za as M}from"./chunk-SBW523XW.js";import"./chunk-NEW56Z2U.js";import{g as q}from"./chunk-HX34N4W4.js";import"./chunk-F7QJ6WQ5.js";import"./chunk-TNVBYBO5.js";import{Qa as B,Ua as Y,qa as P}from"./chunk-KRRNVCWZ.js";import{Gd as N,Qa as A,aa as T,de as H,e as k,ee as x,i as m,ja as C,k as h,ke as L,nd as D,oa as z,qi as b,wa as o}from"./chunk-YC2Z7II3.js";m();h();m();h();var e=k(C());m();h();var a=k(C()),y=k(z()),G=({tooltip:t,name:u,value:c})=>{let r=(0,a.useRef)(null),[p,l]=(0,a.useState)(!1),f=16,n=2,d=16,_=0;if(t&&(r==null?void 0:r.current)){let{left:s,width:v}=r.current.getBoundingClientRect();_=s-f+n+v/2-d}let w=a.default.createElement("div",{className:"switch-chain--tooltip",style:{left:_}},a.default.createElement("div",{className:"switch-chain--triangle"}),a.default.createElement("div",{className:"switch-chain--square"},t));return a.default.createElement("div",{className:"switch-chain--item"},a.default.createElement("div",{className:"switch-chain--item-name"},a.default.createElement("span",null,u),Boolean(t)&&a.default.createElement("img",{ref:r,src:"./static/images/information.svg",className:"icon",onMouseOver:()=>{l(!0)},onMouseLeave:()=>{l(!1)}})),p&&w,a.default.createElement("div",{className:"switch-chain--item-value"},c))};G.propTypes={tooltip:y.default.string,name:y.default.string,value:y.default.string};var I=G;m();h();var g=k(C());function O(){let[t,u]=(0,g.useState)(0),[c,r]=(0,g.useState)({}),p=H(),l=x(B),f=x(Y);return(0,g.useEffect)(()=>{l.length<=t&&u(l.length-1)},[l,t]),(0,g.useEffect)(()=>{(async()=>{let d=l[t];if(d){let{id:_,origin:w,requestData:s,type:v,requestData:{chainId:i}}=d;r({id:_,origin:w,...s,requestData:s,chainId:parseInt(i,16),...f[d.origin],switchType:v,explorers:s.blockExplorerUrl})}})()},[]),{getUnapprovedListLength:l.length,getChainInfo:()=>c,cancelHandle:()=>{p(M(c.id))},confirmHandle:()=>{let{type:n,rpcUrl:d,ticker:_,nickname:w}=c;p(S(n,d,_,w)),p(U(c.id,c.requestData))}}}var Z=()=>{let t=P(),u=L(),{getChainInfo:c,getUnapprovedListLength:r,cancelHandle:p,confirmHandle:l}=O(),f=(0,e.useCallback)(T(()=>{l().then(()=>{u.push(b)}).catch(()=>{console.log("error")})},300),[]);(0,e.useEffect)(()=>{r<=0&&u.push(b)},[r]);let n=c();if(!(n!=null&&n.chainId))return"";let d=[{id:1,title:t("wallet_transaction_history_subtitle_network_name"),text:t("wallet_dapp_conncetion_add_network_subtitle_network_name_tips"),mapName:"type",backup:"chainName"}],_=[{id:2,title:t("wallet_dapp_conncetion_notify_network_url"),text:t("wallet_dapp_conncetion_add_network_subtitle_network_url_tips"),mapName:"rpcUrl"},{id:3,title:t("wallet_dapp_connection_subtitle_chain_id"),text:t("wallet_dapp_conncetion_add_network_subtitle_chain_id_tips"),mapName:"chainId"},{id:4,title:t("wallet_dapp_conncetion_add_network_subtitle_currency_symbol"),text:t("wallet_dapp_conncetion_add_network_subtitle_currency_symbol_tips"),mapName:"ticker"},{id:5,title:t("wallet_dapp_conncetion_add_network_subtitle_block_explorer_url"),text:t("wallet_dapp_conncetion_add_network_subtitle_explorer_url_tips"),mapName:"explorers",backup:"blockExplorerUrl"}],s=D().filter(i=>parseInt(i.chainId,16)===(n==null?void 0:n.chainId)).length>0;if(n.switchType===N.SWITCH_ETHEREUM_CHAIN&&s)return f(),"";let v=e.default.createElement("div",{className:"ok-switch-chain--button-group"},e.default.createElement(o,{className:"ok-switch-chain--button ok-switch-chain__cancel",category:o.CATEGORY.outline,type:o.TYPE.secondary,size:o.SIZE.lg,style:{flex:1},onClick:()=>{p()}},t("wallet_transfer_btn_cancel_transaction")),e.default.createElement(o,{className:"ok-switch-chain--button",category:o.CATEGORY.fill,type:o.TYPE.highlight,size:o.SIZE.lg,style:{flex:1},onClick:()=>{s?f():(A.error({title:t("wallet_dapp_connection_toast_unsupported_chain"),duration:3}),setTimeout(()=>{p(),u.push(b)},3e3))}},n.switchType===N.ADD_ETHEREUM_CHAIN?t("wallet_contract_interaction_btn_approval_permission"):t("wallet_dapp_conncetion_btn_switch_network")));return e.default.createElement("div",{className:"switch-chain--main"},e.default.createElement(q,{title:t("wallet_extension_popup_title_add_network"),backable:!1,closeable:!1}),e.default.createElement("div",{className:"switch-chain--header"},e.default.createElement("div",{className:"switch-chain--header-icon"},e.default.createElement("img",{alt:"chain",src:n.icon,className:"switch-chain--header-icon-image"}),!s&&e.default.createElement("img",{alt:"unsupport",src:"/static/images/chain-unsupport.svg",className:"switch-chain--header-icon-unsupport"})),e.default.createElement("div",{className:"switch-chain--header-name"},n.name),e.default.createElement("div",{className:"switch-chain--header-origin"},n.origin)),s?e.default.createElement("div",{className:"switch-chain--info-list"},d.map(i=>e.default.createElement(I,{key:i.id,value:n[i.mapName]||n[i.backup],tooltip:i.text,name:i.title})),n.switchType===N.ADD_ETHEREUM_CHAIN&&_.map(i=>e.default.createElement(I,{name:i.title,key:i.id,value:n[i.mapName]||n[i.backup],tooltip:i.text}))):e.default.createElement("div",null,e.default.createElement("div",{className:"switch-chain--unsupport-title"},t("wallet_extension_addnetwork_title_network_notsupported",{network:n.chainName})),e.default.createElement("div",{className:"switch-chain--unsupport-desc"},t("wallet_extension_addnetwork_text_morenetworks_coming"))),s?v:e.default.createElement("div",{className:"ok-switch-chain--button-group"},e.default.createElement(o,{category:o.CATEGORY.fill,type:o.TYPE.highlight,size:o.SIZE.lg,style:{flex:1},onClick:()=>{p()}},t("wallet_extension_addnetwork_btn_got_it"))))},j=Z;export{j as default};

window.inOKXExtension = true;
window.ASSETS_BUILD_TYPE = "publish";

