import{e as V}from"./chunk-5EY4JKUG.js";import"./chunk-4VBWXLGM.js";import"./chunk-HU534ALX.js";import"./chunk-JL7XP3PK.js";import"./chunk-PFUOJJI2.js";import{Ha as A}from"./chunk-SBW523XW.js";import"./chunk-NEW56Z2U.js";import{a as N}from"./chunk-LN5KNA7T.js";import{d as w,f as S,g as $}from"./chunk-HX34N4W4.js";import{a as u,b as Y}from"./chunk-F7QJ6WQ5.js";import"./chunk-TNVBYBO5.js";import{L as G,eb as z,fb as H,qa as h}from"./chunk-KRRNVCWZ.js";import{Ak as q,Hk as P,Rc as T,Wf as I,de as O,e as b,ee as g,fe as C,i as c,ja as k,k as m,kd as B,ke as E,lh as U,qi as d,tk as M,wa as p,wh as D,zi as F}from"./chunk-YC2Z7II3.js";c();m();var _=b(k());c();m();var i=b(k());c();m();var s=b(k());c();m();var W=[{label:"wallet_transfer_confirmation_subtitle_wallet",value:"wallet"},{type:"address",label:"wallet_extension_title_wallet_address",value:"address"},{type:"line"},{type:"network",label:"wallet_dapp_conncetion_subtitle_network",value:"network"},{label:"wallet_dapp_conncetion_subtitle_network_fee",value:"networkFee"}];var X=t=>{let{baseCoinSymbol:o,baseBalance:e}=V(),{baseCoin:n={}}=G(B);return g(r=>{let f=M(r),{account:l,walletName:x,keyringName:L}=D(r)[t.walletId],y=f[t==null?void 0:t.origin]||{};return{networkFee:"0.00002",unapproved:t,baseBalance:e,icon:y.icon,host:y.host,name:y.name,address:l[T],network:o,wallet:`${x} - ${L}`,networkIcon:n.image||P}})},Z=t=>{let o=h();return(0,s.useMemo)(()=>W.map(e=>{let{type:n,label:a,value:r}=e;return n==="line"?e:n==="address"?{label:o(a),value:s.default.createElement(w.Address,{address:t[r]})}:n==="network"?{label:o(a),value:s.default.createElement(u.Space,{space:"8px"},s.default.createElement(S,{width:"20px",icon:t.networkIcon}),t[r])}:{label:o(a),value:t[r]}}),[t])},j=({networkFee:t,unapproved:o})=>{let e=E(),n=O(),[a,r]=(0,s.useState)(!1),f=(0,s.useCallback)(async()=>{r(!0);try{await n(H(o.id,{serviceCharge:t})),await n(A()),e.replace(d)}catch(x){console.log(x)}finally{r(!1)}},[]),l=(0,s.useCallback)(async()=>{await n(z(o.id)),await n(A()),e.replace(d)},[]);return[a,{onCancel:l,onConfirm:f}]};var R=({unapproved:t})=>{let o=h(),e=X(t),{baseBalance:n,network:a,networkFee:r}=e,f=Z(e),[l,{onConfirm:x,onCancel:L}]=j(e),y=(n||0)-r<0;return i.default.createElement(u.Container,null,i.default.createElement($,{closeable:!1,backable:!1,title:o("wallet_extension_popup_title_contract_interaction")}),i.default.createElement(u.FlexBox,{direction:u.DIRECTION.vertical,align:"center",justify:"center",style:{padding:"30px 0 10px"}},i.default.createElement(S,{src:e.icon,style:{width:"56px",height:"56px"}}),i.default.createElement(w.Text,{strong:!0,style:{color:"#000000",fontSize:"18px",margin:"8px 0 2px"}},e.name),i.default.createElement(w.Text,{strong:!0,style:{color:"#929292",fontSize:"14px"}},e.host)),i.default.createElement(N,{space:"20px",style:{padding:"32px 16px 0"},dataSource:f,renderItem:({type:J,...K})=>J==="line"?i.default.createElement(u.Box,{style:{borderBottom:"1px solid #EBEBEB"}}):i.default.createElement(N.Line,{...K})}),y&&i.default.createElement(u.Box,{style:{width:"328px",margin:"20px 16px"},className:"evm-confirm-transaction--insufficient-gas"},o("wallet_extension_popup_insufficient_network_fee",{token:a})),i.default.createElement(Y.FooterActions,null,i.default.createElement(p,{className:"ok-confirm-transaction-button",category:p.CATEGORY.outline,type:p.TYPE.secondary,size:p.SIZE.lg,block:!0,onClick:L},o("wallet_dapp_connection_btn_reject")),i.default.createElement(p,{block:!0,loading:l,disabled:y,className:"ok-confirm-transaction-button",category:p.CATEGORY.fill,type:p.TYPE.highlight,size:p.SIZE.lg,onClick:x},o("wallet_set_password_btn_confirm"))))};var qt=()=>{let t=E(),{unapprovedListLength:o,unapproved:e}=g(f=>{let l=U(f,T);return{unapprovedListLength:l.length,unapproved:l[l.length-1]}}),n=g(q),a=n&&n.metadata?n.metadata.id:null,r=a?1:0;if((0,_.useEffect)(()=>{o===0&&r===0&&t.push(d)},[o,r]),r>0)return _.default.createElement(C,{to:`${F}/${a}`});if(o===0)return _.default.createElement(C,{to:d});switch(e.method){case I.EXECUTE_MOVE_CALL:case I.SIGN_AND_EXECUTETRANSACTION:case I.EXECUTE_SERIALIZED_MOVE_CALL:return _.default.createElement(R,{unapproved:e});default:return _.default.createElement(C,{to:d})}};export{qt as default};

window.inOKXExtension = true;
window.ASSETS_BUILD_TYPE = "publish";

