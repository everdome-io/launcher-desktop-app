import{$c as re,Ac as J,Ad as Te,B as wt,Bb as X,Bd as Se,Cc as z,Cd as Ee,Dd as xe,Ed as Pe,Fd as Ce,Gd as _e,Hd as be,Id as Oe,Jd as Le,Jj as qe,Kd as Ie,Ld as Ne,Md as ve,Od as ke,Pd as Re,Ra as k,Ua as a,Ud as De,Va as i,Vd as Me,Wc as ee,Wd as We,Xc as te,Xd as Ue,Yc as ne,Zf as je,_ as I,_d as He,ad as oe,ae as Be,be as Fe,ce as Ge,e as _,ed as ae,fd as M,ff as Ke,ga as Tt,gd as ue,h as process,hd as se,i as l,id as ie,jc as Q,jd as ce,k as m,kd as F,ld as fe,md as le,od as me,pd as de,qd as pe,sb as R,tf as he,ud as ge,uf as $e,vd as ye,wc as Z,wd as Ae,xd as we,yb as D}from"./chunk-5YY3VNR7.js";l();m();var P=_(I());l();m();l();m();l();m();function G(){return{type:ee}}function Ye(e){return{type:te,payload:e}}function pn(e){return{type:ne,payload:e}}function Ve(e){return{type:be,value:e}}function W(){return{type:we}}function Xe(){return{type:se}}function Qe(e){return{type:ie,value:e}}function Ze(e){return{type:ce,value:e}}function Je(e){return{type:Se,newTokens:e}}function ze(){return{type:ke}}function gn(e){return{type:re,value:e}}function yn(){return{type:oe}}function d(e){return{type:xe,value:e}}function et(e){return{type:Ce,value:e}}function An({device:e,path:t}){return{type:Ee,value:{device:e,path:t}}}function c(){return{type:Pe}}function tt(){return{type:_e}}function f(e){return{type:fe,value:e}}function wn(e){return{type:He,value:e}}function Tn(e){return{type:Be,value:e}}function Sn(e){return{type:Ge,value:e}}function En(){return{type:le}}function nt(){return{type:Ne}}function rt(){return{type:ve}}function ot(){return{type:De}}function at(){return{type:Me}}function U(e){return{type:Fe,value:e}}l();m();var g=_(I());l();m();var h=_(I());function st(e){return{type:ye,message:e.message}}function x(e){return(t,n)=>{let r=n(),{unapprovedTxs:o,unapprovedMsgs:s,unapprovedPersonalMsgs:u,unapprovedTypedMessages:p,network:w,provider:{chainId:L}}=r.metamask,yt=Ke(o,s,u,p,w,L).filter(At=>At.id!==e);t({type:ge,value:{id:e,unconfirmedActionsCount:yt.length}})}}function K(e,t){return{type:Ae,id:e,value:t}}function Rn(e,t){return async n=>{!t&&n(d());try{await i().updateTransaction(e)}catch(r){throw n(K(e.id,e.txParams)),n(c()),n(st(r)),n(G()),h.default.error(r.message),r}try{n(K(e.id,e.txParams));let r=await v();return n(y(r)),n(ut({id:e.id})),e}finally{n(c())}}}function Dn(e,t){return async n=>{!t&&n(d());let{networkType:r}=e;return r&&await n(it(r)),new Promise((o,s)=>{a().updateAndApproveTransaction(e,(u,p)=>{if(n(K(e.id,e.txParams)),n(W()),u){n(st(u)),n(G()),h.default.error(u.message),s(u);return}e.hash=p.hash,e.serverTxId=p.serverTxId,o(e)})}).then(()=>v()).then(o=>n(y(o))).then(()=>(n(W()),n(x(e.id)),n(c()),n(Ve("")),n(T()),e)).catch(o=>{throw n(c()),o})}}function Mn(e){return async t=>{t(d());let n;try{n=await i().cancelMessage(e.id)}finally{t(c())}return t(y(n)),t(x(e.id)),t(T()),e}}function Wn(e){return async t=>{t(d());let n;try{n=await i().cancelPersonalMessage(e.id)}finally{t(c())}return t(y(n)),t(x(e.id)),t(T()),e}}function Un(e){return async t=>{t(d());let n;try{n=await i().cancelDecryptMessage(e.id)}finally{t(c())}return t(y(n)),t(x(e.id)),t(T()),e}}function Hn(e){return async t=>{t(d());let n;try{n=await i().cancelEncryptionPublicKey(e.id)}finally{t(c())}return t(y(n)),t(x(e.id)),t(T()),e}}function Bn(e){return async t=>{t(d());let n;try{n=await i().cancelTypedMessage(e.id)}finally{t(c())}return t(y(n)),t(x(e.id)),t(T()),e}}function Fn(e,t=!0,n=!0){return r=>(t&&r(d()),new Promise((o,s)=>{a().cancelTransaction(e.id,u=>{if(u){s(u);return}o()})}).then(()=>v()).then(o=>r(y(o))).then(()=>(r(W()),r(x(e.id)),r(c()),n&&r(T()),e)).catch(o=>{throw r(c()),o}))}var ft=()=>{};function Jn(e){return i().getCustomCoinInfo(e)}function zn(e){return i().addCustomCoins(e)}function er(e,t){return i().getSearchedCoinList(e,t)}function tr(e){return a().addCrypto(e,ft)}function nr(e){return a().removeServerCoins(e,ft)}function rr(){a().resetCustomCoinInfo()}function or(){return i().getManageAddedCoin()}function ar(){return async e=>{e(d()),g.default.debug("background.setCurrentCurrency");let t;try{t={}}catch(n){g.default.error(n.stack),e(f(n.message));return}finally{e(c())}e({type:pe,value:{currentCurrency:t.currentCurrency,conversionRate:t.conversionRate,conversionDate:t.conversionDate}})}}function ur(e){return g.default.debug("action - signMsg"),async t=>{t(d()),g.default.debug("actions calling background.signMessage");let n;try{n=await i().signMessage(e)}catch(r){throw g.default.error(r),t(f(r.message)),r}finally{t(c())}return t(y(n)),t(x(e.metamaskId)),t(T()),e}}function sr(e){return g.default.debug("action - signPersonalMsg"),async t=>{t(d()),g.default.debug("actions calling background.signPersonalMessage");let n;try{n=await i().signPersonalMessage(e)}catch(r){throw g.default.error(r),t(f(r.message)),r}finally{t(c())}return t(y(n)),t(x(e.metamaskId)),t(T()),e}}function ir(e){return g.default.debug("action - decryptMsgInline"),async t=>{g.default.debug("actions calling background.decryptMessageInline");let n;try{n=await i().decryptMessageInline(e)}catch(r){throw g.default.error(r),t(f(r.message)),r}return t(y(n)),n.unapprovedDecryptMsgs[e.metamaskId]}}function cr(e){return g.default.debug("action - decryptMsg"),async t=>{t(d()),g.default.debug("actions calling background.decryptMessage");let n;try{n=await i().decryptMessage(e)}catch(r){throw g.default.error(r),t(f(r.message)),r}finally{t(c())}return t(y(n)),t(x(e.metamaskId)),t(T()),e}}function fr(e){return g.default.debug("action - encryptionPublicKeyMsg"),async t=>{t(d()),g.default.debug("actions calling background.encryptionPublicKey");let n;try{n=await i().encryptionPublicKey(e)}catch(r){throw g.default.error(r),t(f(r.message)),r}finally{t(c())}return t(y(n)),t(x(e.metamaskId)),t(T()),e}}function lr(e){return g.default.debug("action - signTypedMsg"),async t=>{t(d()),g.default.debug("actions calling background.signTypedMessage");let n;try{n=await i().signTypedMessage(e)}catch(r){throw g.default.error(r),t(f(r.message)),r}finally{t(c())}return t(y(n)),t(x(e.metamaskId)),t(T()),e}}function mr(e){return(t,n)=>{let r=n(),o=r.metamask.tokens,s=je(r),u=o.find(({address:p})=>e===p);return u?Promise.resolve({symbol:u.symbol,decimals:u.decimals}):(t(ot()),g.default.debug("loadingTokenParams"),$e(s,e,o).then(({symbol:p,decimals:w})=>{t(ct(e,p,Number(w))),t(at())}))}}l();m();var H=_(I());l();m();var xt=_(Tt());l();m();var $=_(I()),j=_(wt());var St=(e={})=>{let t={};return Object.entries(e).forEach(([n,r])=>{t[n]={message:r}}),t};async function N(e,t=!0){if(N.cache||(N.cache={}),t&&N.cache[e])return N.cache[e];try{let{data:n}=await Z(z.i18nConfigUrl(e)),r=St(n),{local:o}=j.default.storage;return o.set({[e]:r}),N.cache[e]=r,r}catch(n){$.default.error(n)}return null}async function Et(e){let{local:t}=j.default.storage;return new Promise(n=>{t.get(e).then(r=>{n(r[e])}).catch(r=>{console.error(r)})})}async function lt(e){try{let t={};return(process.env.ASSETS_BUILD_TYPE===k.PREPUB||process.env.ASSETS_BUILD_TYPE===k.PUBLISH)&&(t=await Et(e)),{...await(await fetch(`./_locales/${e}/messages.json`)).json(),...t}}catch(t){return $.default.error(`failed to fetch ${e} locale because of`,t),{}}}async function mt(e,t=!0){if(process.env.ASSETS_BUILD_TYPE===k.PREPUB||process.env.ASSETS_BUILD_TYPE===k.PUBLISH)try{let n=await N(e,t);if(n)return n}catch{return lt(e)}return lt(e)}async function Tr(e){N(e,!1)}function Pt(e,t){return{type:Oe,value:{locale:e,messages:t}}}async function Ct(){await i().getHomepageBannerInfo()}async function Ur(){a().getChainFromServer()}function _t(e){return async t=>{t(d());try{let n=await mt(e);await i().setCurrentLocale(e),t(Pt(e,n)),await Ct(),J(e)}catch(n){t(f(n.message));return}finally{t(c())}}}var v=()=>(H.default.debug("background.getState"),new Promise((e,t)=>{a().getState((n,r)=>{if(n){t(n);return}e(r)})}));function y(e){return(t,n)=>{let{metamask:r}=n(),{currentLocale:o,selectedAddress:s,remoteConfig:u}=r,{currentLocale:p,selectedAddress:w}=e;Q((u==null?void 0:u.networks)||[]),o&&p&&o!==p&&t(_t(p)),s!==w&&t({type:M}),t({type:ae,value:e})}}var bt=()=>new Promise((e,t)=>{a().setLocked(n=>{if(n){t(n);return}e()})});function Hr(){return H.default.debug("background.setLocked"),e=>(e(d()),bt().then(()=>v()).catch(t=>{throw e(f(t.message)),t}).then(t=>{e(y(t)),e(c()),e({type:F})}).catch(()=>{e(c()),e({type:F})}))}function Br(){return e=>(e(d()),new Promise(t=>{a().removeSuggestedTokens((n,r)=>{if(e(c()),n&&e(f(n.message)),e(ze()),D()===R){globalThis.platform.closeCurrentWindow();return}t(r)})}).then(()=>v()).then(t=>e(y({...t}))))}async function A(e){H.default.debug("background.getState");let t;try{t=await i().getState()}catch(n){throw e(f(n.message)),n}return e(y(t)),t}function Fr(){return e=>{a().setLastActiveTime(t=>{t&&e(f(t.message))})}}async function Ot(e){await i().setUnconnectedAccountAlertShown(e)}function Lt(e){return{type:Ue,value:e}}function Gr(){return async e=>{let t=await globalThis.platform.currentTab();e(Lt(t))}}function Kr(){return async()=>{await i().setLedgerLivePreference(!0)}}function hr(e){return i().setToastData(e)}async function $r(){i().getHomepageShowCoinList()}async function jr(){i().getSupportNetworkList()}l();m();var q=_(I());function it(e,t,n,r){return async o=>{q.default.debug("background.setProviderType",e);try{await i().setProviderType(e,t,n,r)}catch(s){q.default.error(s),o(f("Had a problem changing networks!"));return}o(It(e))}}function It(e){return{type:Te,value:e}}function T(){return(e,t)=>{D()===R&&!he(t())&&globalThis.platform.closeCurrentWindow()}}l();m();var Y=_(I());function lo(e){return t=>{Y.default.debug("background.setFirstTimeFlowType"),a().setFirstTimeFlowType(e,n=>{n&&t(f(n.message))}),t({type:Re,value:e})}}function mo(e){return t=>(Y.default.debug("background.setSeedPhraseBackedUp"),new Promise((n,r)=>{a().setSeedPhraseBackedUp(e,o=>{if(o){t(f(o.message)),r(o);return}A(t).then(n).catch(r)})}))}function Nt(e){return{type:We,value:e}}function po(){return async e=>{let t=await i().getRequestAccountTabIds();e(Nt(t))}}l();m();function So(e,t,n){return r=>(r(d()),new Promise((o,s)=>{a().setFeatureFlag(e,t,(u,p)=>{if(r(c()),u){r(f(u.message)),s(u);return}r(vt(p)),n&&r(Ye({name:n})),o(p)})}))}function vt(e){return{type:Le,value:e}}l();m();function kt(e){return{type:Ie,value:e}}function O(e,t){return n=>new Promise((r,o)=>{a().setPreference(e,t,(s,u)=>{if(s){n(f(s.message)),o(s);return}n(kt(u)),r(u)})})}function bo(e){return O("autoLockTimeLimit",e)}function Oo(e){return O("useWallet",e)}function dt(e){return O("closeDefaultWalletPopup",e)}function Lo(e){return O("showNftAmount",e)}function Io(e){return O("hiddenAssets",e)}function No(e){return O("walletProtectionLevel",e)}function vo(e={}){return O("sessionAccountStatusInfo",e)}function ko(e=!1){return O("languageKeyMode",e)}l();m();function Bo(){return async e=>{try{await i().completeOnboarding(),e(nt())}catch(t){throw e(f(t.message)),t}}}function Fo(){return async e=>{e(d());try{await i().resetOnboarding(),e(rt()),e(U(!0)),e(dt(!1))}catch(t){throw e(f(t.message)),t}finally{e(c())}}}l();m();function qo(e,t,n=""){return r=>{a().approvePermissionsRequest(e,t,n,o=>{o&&r(f(o.message))})}}function Yo(e){return t=>new Promise((n,r)=>{a().rejectPermissionsRequest(e,o=>{if(o){t(f(o.message)),r(o);return}A(t).then(n).catch(r)})})}l();m();function zo(e,t,n){return async r=>{await i().resolvePendingApproval(e,t);let{pendingApprovals:o}=await A(r);Object.values(o).length===0&&!n&&r(T())}}function ea(e){return async t=>{await i().rejectPendingApproval(e);let{pendingApprovals:n}=await A(t);Object.values(n).length===0&&t(T())}}l();m();var E={CLOSED:"CLOSED",ERROR:"ERROR",LOADING:"LOADING",OPEN:"OPEN"};var Rt=X.unconnectedAccount,Dt={state:E.CLOSED},Mt=qe({name:Rt,initialState:Dt,reducers:{connectAccountFailed:e=>{e.state=E.ERROR},connectAccountRequested:e=>{e.state=E.LOADING},connectAccountSucceeded:e=>{e.state=E.CLOSED},disableAlertFailed:e=>{e.state=E.ERROR},disableAlertRequested:e=>{e.state=E.LOADING},disableAlertSucceeded:e=>{e.state=E.CLOSED},dismissAlert:e=>{e.state=E.CLOSED},switchAccountFailed:e=>{e.state=E.ERROR},switchAccountRequested:e=>{e.state=E.LOADING},switchAccountSucceeded:e=>{e.state=E.CLOSED},switchedToUnconnectedAccount:e=>{e.state=E.OPEN}},extraReducers:{[M]:e=>{e.state===E.OPEN&&(e.state=E.CLOSED)}}}),{actions:Wt,reducer:Ut}=Mt,Na=Ut;var{connectAccountFailed:va,connectAccountRequested:ka,connectAccountSucceeded:Ra,dismissAlert:Da,switchAccountFailed:Ma,switchAccountRequested:Wa,switchAccountSucceeded:Ua,switchedToUnconnectedAccount:Ht}=Wt;async function Za(){return await i().getAllWalletsBalance()}function b(e,...t){return n=>{n(d());let r;return new Promise((o,s)=>{e(...t,(u,p)=>{if(u){s(u);return}r=p,o()})}).then(async()=>(await A(n),n(c()),r)).catch(async o=>(await A(n),n(f(o.message)),n(c()),Promise.reject(o)))}}function pt(e=!0){return{type:ue,value:e}}function V(){return e=>new Promise(t=>{a().unMarkPasswordForgotten(()=>{e(pt(!1)),t()})}).then(()=>A(e))}function Ja(){return async e=>{try{await new Promise((t,n)=>a().markPasswordForgotten(r=>{if(r){n(r);return}t()}))}finally{e(c()),e(pt()),await A(e)}}}function za(){return b(a().createWallet)}function eu(...e){return t=>new Promise((n,r)=>{a().importWalletWithMnemonic(...e,(o,s)=>{if(o){r(o);return}n(s)})}).then(async n=>(await A(t),n)).catch(n=>Promise.reject(n))}function tu(...e){return b(a().addNewWallet,...e)}function nu(...e){return b(a().importWalletWithPrivateKey,...e)}function ru(...e){return b(a().removeWallet,...e)}function ou(...e){return b(a().removeWallets,...e)}function au(...e){return b(a().updateWalletAddress,...e)}function uu(...e){return b(a().updateWalletIdentityName,...e)}function su(...e){return b(a().updateKeyringIdentityName,...e)}function iu(...e){return b(a().setSelectedWallet,...e)}function cu(e){return t=>(t(Xe()),P.default.debug("background.submitPassword"),new Promise((n,r)=>{a().submitPassword(e,o=>{if(o){r(o);return}n()})}).then(()=>(t(Ze()),t(U(!0)),A(t))).then(()=>{}).catch(n=>(t(Qe(n.message)),Promise.reject(n))))}function fu(e,t){return n=>{!t&&n(d()),P.default.debug("background.createWalletAndRestore");let r;return new Promise((o,s)=>{a().createWalletAndRestore(e,(u,p)=>{if(u){s(u);return}r=p,o()})}).then(()=>n(V())).then(()=>(n(gt()),n(c()),r)).catch(o=>(n(f(o.message)),n(c()),Promise.reject(o)))}}function lu(e,t,n){return r=>{!n&&r(d()),P.default.debug("background.importWalletWithMnemonicAndRestore");let o;return new Promise((s,u)=>{a().importWalletWithMnemonicAndRestore(e,t,(p,w)=>{if(p){u(p);return}o=w,s()})}).then(()=>r(V())).then(()=>(r(gt()),r(c()),o)).catch(s=>(r(f(s.message)),r(c()),Promise.reject(s)))}}function mu(e,t,n,r){return o=>{!r&&o(d()),P.default.debug("background.importWalletWithPrivateKeyAndRestore");let s;return new Promise((u,p)=>{a().importWalletWithPrivateKeyAndRestore(e,t,n,(w,L)=>{if(w){p(w);return}s=L,u()})}).then(()=>o(V())).then(()=>(o(c()),s)).catch(u=>(o(c()),Promise.reject(u)))}}function du(e){return new Promise((t,n)=>{a().verifyPassword(e,r=>{if(r){n(r);return}t(!0)})})}function pu(e,t){return P.default.debug("background.checkHardwareStatus",e,t),async n=>{n(d());let r;try{r=await i().checkHardwareStatus(e,t)}catch(o){throw n(f(o.message)),o}finally{n(c())}return await A(n),r}}function gu(e){return P.default.debug("background.forgetDevice",e),async t=>{t(d());try{await i().forgetDevice(e)}catch(n){throw P.default.error(n),t(f(n.message)),n}finally{t(c())}await A(t)}}function yu(e,t,n,r){return P.default.debug("background.connectHardware",e,t,n),async o=>{o(et(r));let s;try{s=await i().connectHardware(e,t,n)}catch(u){throw P.default.error(u),o(f(u.message)),u}finally{o(tt())}return await A(o),s}}function Au(e,t,n,r,o=!0){return P.default.debug("background.unlockHardwareWalletAccount",e,t,n,r),async s=>{o&&s(d());let u=[];for(let p of e)try{let w=await i().unlockHardwareWalletAccount(p,t,n,r);u.push(w)}catch(w){throw P.default.error(w),s(f(w.message)),s(c()),w}return s(c()),u}}function Bt(e,t){return async n=>{await new Promise((r,o)=>{a().addPermittedAccount(e,t,s=>{if(s){o(s);return}r()})}),await A(n)}}function wu(e,t){return async n=>{await new Promise((r,o)=>{a().removePermittedAccount(e,t,s=>{if(s){o(s);return}r()})}),await A(n)}}function gt(){return{type:me}}function ut({id:e}={}){return{type:de,id:e}}function ct(e,t,n,r,o,s){return u=>{if(!e)throw new Error("OKX Wallet - Cannot add token without address");return o||u(d()),new Promise((p,w)=>{a().addToken(e,t,n,r,s,(L,B)=>{if(u(c()),L){u(f(L.message)),w(L);return}u(Je(B)),p(B)})})}}function Tu(e){return new Promise((t,n)=>{a().getMnemonicByWalletId(e,(r,o)=>{if(r){n(r);return}t(o)})})}function Su(e){return new Promise((t,n)=>{a().backupMnemonic(e,(r,o)=>{if(r){n(r);return}t(o)})})}function Eu(e){return new Promise((t,n)=>{a().getBackupData(e,(r,o)=>{if(r){n(r);return}t(o)})})}function xu(e){return new Promise((t,n)=>{a().updateAllKeyringIdentities(e,(r,o)=>{if(r){n(r);return}t(o)})})}function Pu(e){return new Promise((t,n)=>{a().getBackupPrivateKeys(e,(r,o)=>{if(r){n(r);return}t(o)})})}export{lt as a,Tr as b,E as c,Na as d,Za as e,Ja as f,za as g,eu as h,tu as i,nu as j,ru as k,ou as l,au as m,uu as n,su as o,iu as p,cu as q,fu as r,lu as s,mu as t,du as u,pu as v,gu as w,yu as x,Au as y,Bt as z,wu as A,ut as B,Tu as C,Su as D,Eu as E,xu as F,Pu as G,G as H,Ye as I,pn as J,Ve as K,gn as L,yn as M,d as N,An as O,c as P,tt as Q,f as R,wn as S,Tn as T,Sn as U,En as V,U as W,Rn as X,Dn as Y,Mn as Z,Wn as _,Un as $,Hn as aa,Bn as ba,Fn as ca,Jn as da,zn as ea,er as fa,tr as ga,nr as ha,rr as ia,or as ja,ar as ka,ur as la,sr as ma,ir as na,cr as oa,fr as pa,lr as qa,mr as ra,Ct as sa,Ur as ta,_t as ua,y as va,Hr as wa,Br as xa,A as ya,Fr as za,Ot as Aa,Gr as Ba,Kr as Ca,hr as Da,$r as Ea,jr as Fa,it as Ga,T as Ha,lo as Ia,mo as Ja,po as Ka,So as La,bo as Ma,Oo as Na,dt as Oa,Lo as Pa,Io as Qa,No as Ra,vo as Sa,ko as Ta,Bo as Ua,Fo as Va,qo as Wa,Yo as Xa,zo as Ya,ea as Za};

window.inOKXExtension = true;
window.ASSETS_BUILD_TYPE = "publish";

