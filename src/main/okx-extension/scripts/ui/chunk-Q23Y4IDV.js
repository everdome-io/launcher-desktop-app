import{l as B}from"./chunk-QBRKUY3J.js";import{R as A}from"./chunk-XBLB7XW3.js";import{Aj as $,Jj as E,Qa as q,ak as L,e as S,eg as h,i as j,k as O,ka as U,qg as w,yj as x,zj as N}from"./chunk-5YY3VNR7.js";j();O();var r=S(q()),l=S(U());var z=E({name:"balanceSlice",initialState:{amountObj:{}},reducers:{setAmountObj:(t,{payload:n})=>{t.amountObj=(0,l.cloneDeep)(n)}}}),{actions:D,reducer:G}=z;function _(t){let n={},f={},p=new r.default(0),g=w(t).symbol||"$",{balance:y}=t.metamask,b=h(t),R=(0,l.groupBy)(b,"keyringId"),T=b.map(e=>e.walletId),W=B(t);return T.forEach(e=>{var d,C,k;let m=(d=y[e])==null?void 0:d.data,s=(C=y[e])==null?void 0:C.nft,i=(k=y[e])==null?void 0:k.defi;if(m&&m.length>0){let v=x(t)||[],F=N(t)[e]||[],M=$(t)[e]||[],u=new r.default(0),a="0";if(m.map(o=>{if((o.currencyAmount>=1||F.some(c=>c.key===o.key)||v.some(c=>c.key===o.key))&&!o.voucherToken&&!M.some(c=>c.key===o.key)){let c=o.currencyAmount||0;u=u.plus(new r.default(`${c}`)),o.platformType===0&&(a=L(a,c))}return null}),W){let o=(s==null?void 0:s.currencyAmount)||0;u=u.plus(new r.default(`${o}`))}u=u.plus(new r.default(`${(i==null?void 0:i.currencyAmount)||0}`)),n[e]=u,f[e]=a}else n[e]=new r.default(0),f[e]="0"}),Object.entries(R).forEach(([e,m])=>{let s=m.reduce((i,d)=>i.plus(new r.default(String(Number(n[d.walletId]||0).toFixed(10)))),new r.default(0));n[e]=s,p=p.plus(s)}),Object.keys(n).forEach(e=>{n[e]=A(String(n[e]),g)}),n.amount=A(String(p),g),n.platformAssetAmount=f,n}var{setAmountObj:I}=D,ee=G;export{_ as a,ee as b};

window.inOKXExtension = true;
window.ASSETS_BUILD_TYPE = "publish";

