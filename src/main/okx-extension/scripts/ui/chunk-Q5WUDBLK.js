import{a as Q}from"./chunk-YUPHF2OZ.js";import{a as l,e as B,f as ot,h as N,i as et}from"./chunk-PFBN4VGD.js";import{a as dt}from"./chunk-RJTK42A4.js";import{Aa as bt,K as tt,ca as ht,na as k}from"./chunk-XBLB7XW3.js";import{$j as Y,Cc as gt,Ga as _t,Lc as Lt,Ma as R,Tc as It,Yj as At,_j as j,ba as pt,da as W,e as C,ga as U,i as y,k as g,ka as Zt,ta as D,xa as xt,ya as K,zc as yt}from"./chunk-5YY3VNR7.js";y();g();var a=C(U());var jt=C(dt());y();g();var A=C(U()),q=C(dt());y();g();var d=C(U());y();g();y();g();var G="LEGAL",_="DIGITAL";var rt=t=>{typeof t!="string"&&(t=t.toString());let o=t==null?void 0:t.length;return o<6?56:o>=6&&o<=7?48:o>=8&&o<=9?40:o>=10&&o<12?32:o===12?30:o>=13&&o<=15?24:o>=16&&o<=18?20:o>=19&&o<=24?16:12};var V=(t,o)=>{if(!o)return t;let e=W.pow(10,o);return Y(Math.floor(j(t,e)),e)},Yt=2,st=(t,o,e,r)=>{let s=t===_?o:Y(o,e),n=t===_?j(o,e):o;return[r?V(s,r):s,V(n,Yt)]},St=t=>{if(typeof t=="object"){let{mode:o=_,value:e}=t,r=o||_,s=r===_?e==null?void 0:e[0]:(e==null?void 0:e[1])||0;return{mode:r,value:s,thousandthValue:W.thousandFormat(s)}}return{mode:_,value:t||0,thousandthValue:W.thousandFormat(t||0)}},nt=(t,o=0)=>t?W.thousandFormat(V(t,o)):0,Vt="HarmonyOS Sans,PingFang SC,Microsoft Yahei,Heiti SC,WenQuanYi Micro Hei,Helvetica Neue,Helvetica,Arial,sans-serif";function Tt(t,o=16){let r=document.createElement("canvas").getContext("2d");r.font=`700 ${o}px ${Vt}`;let s=r.measureText(t),n=Math.abs(s.actualBoundingBoxLeft)+Math.abs(s.actualBoundingBoxRight);return Math.max(s.width,n)}var Bt=t=>typeof t=="string"&&t.startsWith("0")&&!t.startsWith("0.")?t.slice(1):t,Nt=t=>{var o,e;return((e=(o=t==null?void 0:t.split("."))==null?void 0:o[0])==null?void 0:e.length)>=30},Et=(t,o)=>{var r,s;return((s=(r=t==null?void 0:t.split("."))==null?void 0:r[1])==null?void 0:s.length)>o};var Qt="usd",Ht=5e3,qt=(t,o=!0)=>{let e=(0,d.useRef)(),r=ht(t),[s,n]=(0,d.useState)(0),u=async()=>{let i={coinIds:[t]},S={headers:{currency:Qt}},{data:T}=await yt(gt.postMarketUrl,i,S),{currencyAmount:c}=T[0]||{};n(c||0)};return(0,d.useEffect)(()=>Number(r)?(n(r),e.current&&clearInterval(e.current),()=>{}):(u(t),o?(e.current=setInterval(i=>{u(i)},Ht,t),()=>{clearInterval(e.current)}):()=>{}),[t,r]),s},Xt=t=>{let{coin:o}=tt(t),e=qt(t);return{...o,coinPrice:e}},vt=({value:t,precision:o,symbol:e})=>{let r=(0,d.useMemo)(()=>{if(!t)return"0";let s=/,|\.$/.test(t);return`${nt(t,t.endsWith("0")?0:o)}${s?".":""}`},[t,o]);return(0,d.useMemo)(()=>{let s=rt(`${r}${e}`),n=Tt(r,s);return[s,n]},[e,r])},wt=(t,o)=>{let{flatCurrencyId:e}=t||{},[r,s]=(0,d.useState)(!1),{options:n,selectedCurrency:u}=Lt(({metamask:m})=>({options:m.currencies,selectedCurrency:m.selectedCurrency})),i=e&&n.find(({currencyId:m})=>m===e),[S,T]=(0,d.useState)(i||u),c=(0,d.useCallback)(pt(m=>{s(typeof m=="boolean"?m:L=>!L)},300),[]),f=(0,d.useCallback)(m=>{T(m),c(!1),o==null||o(m)},[]);return[{visible:r,options:n,flatCurrency:S,defaultCurrency:u},{onToggleVisible:c,onFlatCurrencyChange:f}]},H=2,Ft=({coinId:t,decimals:o,visible:e,autoFocus:r,maximumMode:s,maximumAmount:n,initialValue:u,flatCurrency:i,onChange:S,onModeChnage:T,onAmountChange:c})=>{let{mode:f,value:m,thousandthValue:L}=St(u),v=(0,d.useRef)(),[p,$]=(0,d.useState)(f),[x,Z]=(0,d.useState)(m||"0"),[it,ct]=(0,d.useState)(L),[F,E]=(0,d.useState)(!1),I=Xt(t),h=(0,d.useMemo)(()=>j(i==null?void 0:i.usdToThisRate,I.coinPrice),[i==null?void 0:i.usdToThisRate,I.coinPrice]),lt=(0,d.useCallback)(pt(async()=>{if(Number(h)){if(E(!0),await At(310),E(!1),p===_){let z=j(x,h);Z(z)}else{let z=Y(x,h);Z(z)}let w=p===G?_:G;$(w),T==null||T(w)}},300),[p,x,h,I,s,n]),at=(0,d.useCallback)((w,z)=>{x==="0"&&!w||Nt(w)||(Z(w||"0"),ct(Bt(z.target.value)),c==null||c(st(p,w,h),!0))},[p,x,h]),ut=(0,d.useCallback)(()=>{!e&&r&&v.current.input.focus()},[e,r]);(0,d.useEffect)(()=>{r&&v.current.input.focus()},[r]),(0,d.useEffect)(()=>{e||v.current.input.focus()},[e]);let X=(0,d.useMemo)(()=>{let w=p!==_,z=p===_?I.symbol:i==null?void 0:i.isoCode,J=p===G?H:o||I.decimals;return{symbol:z,switchFlatable:w,value:Et(x,J)?V(x,J):x,precision:p===_?o||I.decimals:H,contrastValue:nt(x,p===G?H:o||(I==null?void 0:I.vdecimalNum))}},[p,o,x,I,i]),mt=(0,d.useMemo)(()=>{let w=p===_?i==null?void 0:i.isoCode:I.symbol,z=p===_,J=p===_?j(x,h):Y(x,h);return{value:nt(J,p===_?H:o||(I==null?void 0:I.vdecimalNum)),symbol:w,switchFlatable:z}},[p,i,o,I,x,h]);return(0,d.useEffect)(()=>{!s||!Number(h)||Z(p===_?n:V(j(n,h),H))},[s,n,h]),(0,d.useEffect)(()=>{c==null||c(st(p,x,h)),S==null||S({mode:p,coin:I,flatCurrency:i,flatCurrencyId:i==null?void 0:i.currencyId,value:st(p,x,h,I.vdecimalNum)})},[p,h,x]),[{inputRef:v,realInput:it,inputEnter:X,contrastEnter:mt,switchAnimating:F,switchModeable:!!Number(h)},{onInputBlur:ut,onInputChange:at,onSwitchPricingMode:lt}]};y();g();var b=C(U());var Ct=C(dt()),Dt=C(Zt());var Jt=(t,o)=>{let e=k(),{defaults:r,alls:s}=(0,Dt.groupBy)(t,({currencyId:n})=>n===(o==null?void 0:o.currencyId)?"defaults":"alls");return[{type:"default",options:r,title:e("wallet_extension_send_item_default")},{type:"all",options:s,title:e("wallet_extension_send_item_all")}]},Kt=({value:t,options:o,defaultCurrency:e,onChange:r})=>{let s=k(),[n,u]=(0,b.useState)(""),i=(0,b.useCallback)(c=>{console.log(c.target.value),u(c.target.value)},[]),S=(0,b.useMemo)(()=>o.filter(c=>{var f,m;return((m=(f=c.isoCode)==null?void 0:f.toUpperCase())==null?void 0:m.indexOf(n==null?void 0:n.toUpperCase()))>-1}),[n,o]),T=Jt(o,e);return b.default.createElement(l.Box,{className:"select-fiat-currency"},b.default.createElement(l.Box,{className:"select-fiat-currency__search"},b.default.createElement(K.Search,{value:n,placeholder:s("wallet_extension_send_input_search_fiat"),onChange:i})),n?b.default.createElement(Q,{dataSource:S,emptyText:s("wallet_extension_text_noresults"),renderItem:c=>b.default.createElement(Q.Cell,{title:c==null?void 0:c.isoCode,className:"select-fiat-currency__item",onClick:()=>{r==null||r(c)}},(c==null?void 0:c.currencyId)===(t==null?void 0:t.currencyId)&&b.default.createElement(N,{icon:"okx-wallet-plugin-check",size:N.SIZE.xs}))}):b.default.createElement(l.Box,{className:"select-fiat-currency__content"},T.map(({type:c,title:f,options:m})=>b.default.createElement(l.Box,{className:(0,Ct.default)("select-fiat-currency__group",`select-fiat-currency__group__${c}`)},b.default.createElement(B.Text,{size:B.SIZE.xs,className:"select-fiat-currency_title"},f),b.default.createElement(Q,{dataSource:m,renderItem:L=>b.default.createElement(Q.Cell,{title:L==null?void 0:L.isoCode,className:"select-fiat-currency__item",onClick:()=>{r==null||r(L)}},(L==null?void 0:L.currencyId)===(t==null?void 0:t.currencyId)&&b.default.createElement(N,{icon:"okx-wallet-plugin-check",size:N.SIZE.xs}))})))))},Ot=b.default.memo(Kt);y();g();var ft=({coinId:t,onChange:o,autoFocus:e=!0,decimals:r,maximumMode:s,maximumAmount:n,onAmountChange:u,onModeChnage:i,onFlatChange:S,initialValue:T,className:c,...f})=>{let m=k(),[{visible:L,options:v,flatCurrency:p,defaultCurrency:$},{onToggleVisible:x,onFlatCurrencyChange:Z}]=wt(T,S),[{inputRef:it,realInput:ct,inputEnter:F,contrastEnter:E,switchModeable:I,switchAnimating:h},{onInputChange:lt,onSwitchPricingMode:at,onInputBlur:ut}]=Ft({coinId:t,visible:L,decimals:r,autoFocus:e,maximumMode:s,initialValue:T,maximumAmount:n,flatCurrency:p,onChange:o,onAmountChange:u,onModeChnage:i}),[X,mt]=vt(F),w=(0,A.useMemo)(()=>rt(`${E.value}${E.symbol}`),[E.value,E.symbol]);return A.default.createElement(l.Box,{className:(0,q.default)("coinAmount__input",c),...f},A.default.createElement(l.FlexBox,{justify:"center",align:l.ALIGN.center,style:{fontSize:X,position:"relative",height:"74px",fontWeight:700}},A.default.createElement(_t,{maxWidth:"280",title:X===12&&A.default.createElement(l.Box,{style:{wordBreak:"break-all"}},`${ct} ${F.symbol}`)},A.default.createElement(l.FlexBox,{style:{maxWidth:"232px"},className:(0,q.default)("coinAmount__input__input__enter",{coinAmount__input__input__enter__animation:h})},h?A.default.createElement(B.Text,{ellipsis:!0,style:{maxWidth:"200px",color:"inherit",fontSize:"inherit"}},F.contrastValue):A.default.createElement(K.Number,{min:0,autoFocus:!0,ref:it,max:Number.MAX_VALUE,precision:F.precision,style:{width:mt},value:F.value,onChange:lt,innerClassName:"coinAmount__input__box",inputClassName:"coinAmount__input__core",onBlur:ut}),A.default.createElement(l.Box,{style:{position:"relative",marginLeft:"4px"},onClick:F.switchFlatable?x:()=>{}},F.symbol,F.switchFlatable&&A.default.createElement(N,{size:N.SIZE.sm,src:"/static/images/center_down_fill.svg",className:"coinAmount__input__legal__icon",style:{top:"50%",transform:"translateY(-50%)",left:"100%"}})))),A.default.createElement(N.IconButton,{hovered:!1,size:N.SIZE.lg,tooltip:I?!1:{title:m("wallet_extension_receive_tooltip_not_support"),maxWidth:"350px",placement:_t.DIRECTION.bottomLeft},className:(0,q.default)("coinAmount__input__swtich__mode",{coinAmount__input__swtich__mode__disabled:!I,coinAmount__input__swtich__mode__abled:I}),icon:"okx-wallet-plugin-exchange",onClick:at})),A.default.createElement(l.FlexBox,{justify:"center",style:{position:"relative",marginTop:"8px",fontSize:w}},A.default.createElement(l.FlexBox,{align:l.ALIGN.center,className:(0,q.default)("coinAmount__input__contrast__enter",{coinAmount__input__contrast__enter__animation:h}),onClick:E.switchFlatable?x:()=>{}},A.default.createElement(B.Text,{ellipsis:!0,style:{maxWidth:"200px",color:"inherit",fontSize:"inherit"}},E==null?void 0:E.value),A.default.createElement(l.Box,{style:{position:"relative",marginLeft:"4px"}},E==null?void 0:E.symbol,E.switchFlatable&&A.default.createElement(N,{className:"coinAmount__input__legal__icon",size:N.SIZE.sm,src:"/static/images/center_down_fill.svg",style:{left:"100%",top:"50%",transform:"translateY(-50%)"}})))),A.default.createElement(xt,{isFull:!0,noMargin:!0,noContentPadding:!0,visible:L,title:m("wallet_extension_send_title_select_fiat"),onClose:x},A.default.createElement(Ot,{value:p,options:v,defaultCurrency:$,onChange:Z})))};ft.LEGALMODE=G;ft.DIGITALMODE=_;var Mt=A.default.memo(ft);y();g();var M=C(U());y();g();var zt=(t={})=>Object.entries(t).filter(([,o])=>!!o).map(([o,e])=>`${o}=${e}`).join("&"),kt=t=>{typeof t!="string"&&(t=t.toString());let o=t==null?void 0:t.length;return o<16?28:o>=17&&o<=21?22:o>=22&&o<=26?18:14};var Gt=t=>{let{coinId:o}=It(),{coin:e}=tt(t||o),r=bt(e.localType);return(0,M.useMemo)(()=>({...e,walletAddress:r,coinLogo:e==null?void 0:e.image}),[e,r])},Pt=()=>{let[t,o]=(0,M.useState)({}),[e,r]=(0,M.useState)(!1),s=(0,M.useCallback)(()=>{r(i=>!i)},[]),n=(0,M.useCallback)(i=>{s(),o(i)},[]),u=(0,M.useCallback)(()=>{o({})},[]);return[{visible:e,receiveState:t},{onConfirm:n,onClearState:u,onToggleVisible:s}]},Rt=16e3,$t=({coinId:t,decimal:o,chainName:e,baseCoinId:r,receiveState:s,appBaseChain:n,walletAddress:u,address:i})=>(0,M.useMemo)(()=>{var x;e=(x=e==null?void 0:e.trim())==null?void 0:x.toLowerCase();let T="",c=r===0;(c&&t!==Rt||!c&&n)&&(T=`${n}:`);let{mode:f,value:m,flatCurrency:L}=s||{},v={network:e,valuation:f!==_?m==null?void 0:m[1]:!1,currency:f!==_?L==null?void 0:L.isoCode:!1},p=(m==null?void 0:m[0])||0;c?Object.assign(v,{amount:p}):Object.assign(v,{contractAddress:i,decimal:o||18,value:p});let $=zt(v);return`${T}${u}?${$}`},[o,e,n,s,u,i]);y();g();var P=C(U());var to=({coinId:t,vdecimalNum:o,initialValue:e,onToggleVisible:r,onConfirm:s})=>{var S;let n=k(),[u,i]=(0,P.useState)({});return P.default.createElement(l.Container,{className:"receive__set_receive_amount"},P.default.createElement(et,{sticky:!1,title:n(e!=null&&e.mode?"wallet_extension_receive_btn_modify_amount":"wallet_extension_receive_btn_set_amount"),onBack:r,onClose:r,style:{background:"#ffffff"}}),P.default.createElement(Mt,{coinId:t,decimals:o,style:{marginTop:"90px"},onChange:i,initialValue:e}),P.default.createElement(ot.FooterActions,null,P.default.createElement(D,{size:D.SIZE.lg,type:D.TYPE.highlight,category:D.CATEGORY.fill,disabled:!Number((S=u==null?void 0:u.value)==null?void 0:S[0]),onClick:()=>{s(u)}},n("wallet_extension_receive_btn_confirm"))))},Wt=P.default.memo(to);y();g();var oo=({coinLogo:t,symbol:o,address:e,chainName:r,aggregation:s})=>a.default.createElement(l.Space,{space:12,direction:l.DIRECTION.horizontal},a.default.createElement(N,{src:t,style:{width:"40px",height:"40px"}}),a.default.createElement(l.Space,{direction:l.DIRECTION.vertical,space:4},a.default.createElement(l.FlexBox,{align:l.ALIGN.center},a.default.createElement(B.Text,{strong:700,size:B.SIZE.lg},o),s&&a.default.createElement(l.Box,{className:"receive__card__tag"},r)),a.default.createElement(B.Address,{wrap:!0,address:e,desensitize:!1,size:B.SIZE.sm,style:{color:"#929292"},copyable:{className:"receive__copy__button",icon:"okx-wallet-plugin-copy"}}))),eo=({mode:t,value:o,coin:e,flatCurrency:r,onClear:s})=>{let[n,u]=o||[],i=(0,a.useMemo)(()=>{let c=W.thousandFormat(t===_?n:u);return`${t===_?"":r.symbol}${c} ${t===_?e==null?void 0:e.symbol:""}`},[t,n,u,r==null?void 0:r.symbol,e==null?void 0:e.symbol]),S=(0,a.useMemo)(()=>{let c=W.thousandFormat(t===_?u:n);return`${t===G?"":r.symbol}${c}`},[t,n,u,r==null?void 0:r.symbol]),T=t===_?"":e==null?void 0:e.symbol;return a.default.createElement(l.FlexBox,{direction:l.DIRECTION.vertical,align:l.ALIGN.center,className:"receive__state"},a.default.createElement(B.AdaptiveText,{strong:700,fontSize:"28px",style:{marginBottom:"6px"},text:i,autoSize:kt},i),a.default.createElement(l.FlexBox,{justify:"center",align:l.ALIGN.center,style:{width:"100%"},className:"receive__state__subtitle"},a.default.createElement(B.Text,{strong:!0,style:{color:"#929292"},ellipsis:{tooltip:!0}},`\u2248 ${S}`),T,a.default.createElement(N.IconButton,{hovered:!1,size:N.SIZE.sm,icon:"okds-fail-circle-fill",className:"receive__state__clear",onClick:s})))},ro=({coinId:t,onBack:o,onClose:e})=>{let r=Gt(t),s=k(),{symbol:n,walletAddress:u,chainName:i,coinLogo:S,aggregation:T}=r,[{visible:c,receiveState:f},{onConfirm:m,onClearState:L,onToggleVisible:v}]=Pt(),p=$t({...r,walletAddress:u,receiveState:f}),$=!!(f!=null&&f.mode);return a.default.createElement(l.Container,{className:"receive",style:{overflow:c?"hidden":"auto"}},a.default.createElement(et,{bordered:!1,onBack:o,onClose:e,className:"receive__navigator"}),a.default.createElement(l.Box,{className:"receive__content"},a.default.createElement(l.Box,{className:(0,jt.default)("receive__qrcode__card",{receive__qrcode__card__has__amount:$})},a.default.createElement(oo,{symbol:n,coinLogo:S,chainName:i,address:u,aggregation:T}),a.default.createElement(l.Box,{className:"receive__devider"}),a.default.createElement(B.Text,{size:B.SIZE.sm,align:B.ALIGN.center,style:{color:"#929292",width:"100%",marginBottom:"12px"}},s("wallet_extension_toast_send_only_network_assets_tothis_address",{chain_name:i})),a.default.createElement(l.FlexBox,{justify:"center"},a.default.createElement(R,{padding:"8px",text:p,level:R.LEVEL.L,type:R.TYPE.svg,size:224,cornersDotOptions:{type:"dot"},cornersSquareOptions:{type:"dot"},dotsOptions:{type:"dots"}})),$&&a.default.createElement(eo,{...f,onClear:L}))),a.default.createElement(ot.FooterActions,{style:{backgroundColor:"transparent"}},a.default.createElement(D,{size:D.SIZE.lg,type:D.TYPE.highlight,category:D.CATEGORY.fill,onClick:v},s(f!=null&&f.mode?"wallet_extension_receive_btn_modify_amount":"wallet_extension_receive_btn_set_amount"))),c&&a.default.createElement(Wt,{...r,onConfirm:m,onToggleVisible:v,initialValue:f}))},Oe=a.default.memo(ro);export{G as a,Mt as b,Oe as c};

window.inOKXExtension = true;
window.ASSETS_BUILD_TYPE = "publish";

