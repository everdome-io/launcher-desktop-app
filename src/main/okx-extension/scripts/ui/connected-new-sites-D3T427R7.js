import{a as Z}from"./chunk-ML57WXYG.js";import{a as $}from"./chunk-ZSGHWUGY.js";import{A as F,z as j}from"./chunk-U3HLVTEP.js";import"./chunk-5TVTY5EZ.js";import{i as M}from"./chunk-PFBN4VGD.js";import"./chunk-RJTK42A4.js";import{na as G}from"./chunk-XBLB7XW3.js";import{Cg as O,Ka as v,Kc as B,Lc as r,Rc as H,bf as W,bg as A,e as C,ej as P,g as x,ga as b,gj as q,i as o,jj as z,k as s,kj as T,la as ee,lj as Y,ma as S,nh as E,ta as d,xa as I}from"./chunk-5YY3VNR7.js";o();s();o();s();var e=C(b());o();s();o();s();var i=C(b()),n=C(ee());o();s();var l=class extends i.Component{render(){let{connectedDomains:a,onDisconnect:p}=this.props,{t:g}=this.context;return i.default.createElement("main",{className:"connected-sites-list__content-rows"},a.map(c=>i.default.createElement("div",{key:c.origin,className:"connected-sites-list__content-row"},i.default.createElement("div",{className:"connected-sites-list__domain-info"},i.default.createElement(Z,{icon:c.icon,name:c.name,size:32/.75}),i.default.createElement("span",{className:"connected-sites-list__domain-name",title:c.extensionId||c.origin},this.getDomainDisplayName(c))),i.default.createElement("div",{className:"connected-sites-list__trash",onClick:()=>(v.success({title:g("wallet_extension_connect_toast_deleted"),duration:3,placement:v.DIRECTION.top,showClose:!0}),p(c.origin))},i.default.createElement(S,{className:"okx-wallet-plugin-trash",style:{fontSize:"22px",color:"#929292"}})))))}getDomainDisplayName(a){return a.extensionId?this.context.t("wallet_dapp_conncetion_subtitle_external_extension"):this.props.domainHostCount[a.host]>1?a.origin:W(a.origin)}};x(l,"contextTypes",{t:n.default.func}),x(l,"propTypes",{connectedDomains:n.default.arrayOf(n.default.shape({name:n.default.string,icon:n.default.string,origin:n.default.string,host:n.default.string})).isRequired,onDisconnect:n.default.func.isRequired,domainHostCount:n.default.objectOf(n.default.number).isRequired});var te=()=>{let m=G(),a=r(q),p=r(P),g=r(A),c=r(Y),J=r(O),D=B(),K=r(T),[u,f]=(0,e.useState)(),[Q,h]=(0,e.useState)(!1),t=r(z),[U,y]=(0,e.useState)(!1),N=Boolean(p.find(_=>_.host===(t==null?void 0:t.host))),k=async _=>{await D(F(_,g))},V=async _=>{if(!K){h(!0);return}f("pending");try{await D(j(_,g))}catch{setTimeout(()=>{f("disconnect")},800)}setTimeout(()=>{f("connect"),setTimeout(()=>{f("")},500)},800)},X=H(),L=()=>{if(J){y(!0);return}N?k(t==null?void 0:t.origin):V(t==null?void 0:t.origin)},R=()=>u==="pending"?e.default.createElement("div",{className:"connect-site-page__animation"},e.default.createElement("img",{src:(t==null?void 0:t.icon)||"/static/images/default-img.svg",className:"connect-site-page__origin-icon"}),e.default.createElement("img",{src:"/static/images/icon-64.png",className:"connect-site-page__origin-icon connect-site-page__origin-icon-network"})):u==="connect"?e.default.createElement("img",{src:"/static/images/check-green-solid.svg",className:"connect-site-page__origin-icon"}):e.default.createElement("img",{src:(t==null?void 0:t.icon)||"/static/images/default-img.svg",className:"connect-site-page__origin-icon"});return e.default.createElement("div",{className:"connect-site-page__wrapper"},e.default.createElement(M,{title:m("wallet_home_dapp_connection_btn_connect"),closeable:{icon:"okx-wallet-plugin-information-circle"},onClose:()=>X.push(`${E}?from=connect`)}),e.default.createElement("div",{className:"connect-site-page__origin"},e.default.createElement("div",{className:"connect-site-page__origin-wrapper"},R()),e.default.createElement("p",{className:"connect-site-page__origin-name"},t==null?void 0:t.name),e.default.createElement("p",{className:"connect-site-page__origin-info"},m(N&&!u?"wallet_dapp_conncetion_subtitle_wallet_has_connceted_to":"wallet_dapp_conncetion_subtitle_wallet_has_disconnceted_to",{curWalletName:c})),e.default.createElement("div",{className:"connect-site-page__origin-button-wrapper"},!u&&e.default.createElement(d,{category:d.CATEGORY.outline,type:d.TYPE.secondary,size:d.SIZE.lg,onClick:L},m(N?"wallet_dapp_connection_btn_disconncet":"wallet_home_dapp_connection_btn_connect")))),e.default.createElement("div",null,p.length?e.default.createElement("p",{className:"connect-site-page__connect-site"},m("wallet_dapp_conncetion_subtitle_connected_sites")):null,e.default.createElement(l,{domainHostCount:a,connectedDomains:p,onDisconnect:k})),e.default.createElement(I,{onClose:()=>{h(!1)},visible:Q,onCancel:()=>{h(!1)},whiteboard:!0,windowClass:"message-alert-box-main__wrapper",alignBottom:!1},e.default.createElement("div",{className:"message-alert-box-main"},e.default.createElement("img",{src:"/static/images/close2.svg",className:"message-alert-box-main-close-button",onClick:()=>{h(!1)}}),e.default.createElement("div",{className:"message-alert-box-main-text-bot"},m("wallet_dapp_conncetion_notify_conncetion_confirmation")))),e.default.createElement($,{backupShow:U,setBackupShow:y}))},ne=(0,e.memo)(te);export{ne as default};

window.inOKXExtension = true;
window.ASSETS_BUILD_TYPE = "publish";

