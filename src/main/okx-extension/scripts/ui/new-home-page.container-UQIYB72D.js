import{a as Yo}from"./chunk-TMQHNH3Q.js";import{a as Vo}from"./chunk-3HQ4YWMI.js";import{a as $o}from"./chunk-ZSGHWUGY.js";import{a as Mo}from"./chunk-MOOAZQJW.js";import{a as Ho,b as pt}from"./chunk-LDVZHOFH.js";import"./chunk-GI7JZJFS.js";import{b as Uo}from"./chunk-ZSR2WORX.js";import"./chunk-6ECUJFOF.js";import"./chunk-JQHY5ZEG.js";import"./chunk-2JIOJCXR.js";import"./chunk-QVAYM7Z6.js";import{c as zo,d as Go}from"./chunk-CJQOMMGE.js";import{a as Wo}from"./chunk-Q23Y4IDV.js";import{a as Po,c as Bo,d as Do,e as Oo,f as Fo,g as ze,i as Ge}from"./chunk-QBRKUY3J.js";import{c as Ot,r as Ft}from"./chunk-TYY4MUDF.js";import"./chunk-TDVG2NBK.js";import{b as Lo}from"./chunk-QWFNWJXB.js";import"./chunk-NBSAOCFO.js";import"./chunk-6UCPSTEH.js";import{Ea as po,Na as fo,Oa as uo,Qa as _o,S as ro,T as ao,Ta as go,U as mt,Xa as ho,ia as lo,sa as mo,ta as co}from"./chunk-U3HLVTEP.js";import{p as ko}from"./chunk-5TVTY5EZ.js";import"./chunk-THCUPPWU.js";import{a as ne}from"./chunk-FRFUH74V.js";import"./chunk-PFBN4VGD.js";import{a as ct}from"./chunk-RJTK42A4.js";import{O as Co,Qa as Eo,R as xo,Ua as So,Wa as Ao,c as Jn,h as Ye,i as yo,n as oe,na as v,q as Io,x as To,z as bo}from"./chunk-XBLB7XW3.js";import{$e as Ht,Bj as lt,Cb as Dt,Cg as $,Cj as io,Da as At,Ea as Te,Eg as Yt,Fg as zt,Ga as F,Hh as Me,Hk as vo,Ia as J,Jc as Wt,Ka as W,Kc as z,Kg as Gt,Lc as d,Lg as Vt,Lh as $e,Mg as jt,Na as ae,Nh as eo,Pa as be,Ph as to,Pk as xe,Qg as qt,Ra as rt,Rc as G,Sg as Zt,Tg as Kt,Tk as wo,Va as le,_j as No,bg as me,e as _,ej as Ue,fi as at,ga as y,gg as He,h as process,ha as it,hg as Mt,hh as Xt,i as s,ij as so,k as i,ka as Rn,kh as Qt,la as Ie,li as oo,ma as O,oh as Ce,ph as Jt,pj as ce,rb as Lt,rh as Rt,ri as no,sa as Q,sb as Pt,ta as p,vg as $t,xa as re,yb as Bt,yg as Ut}from"./chunk-5YY3VNR7.js";s();i();var kn=_(y());s();i();var o=_(y());var I=_(Ie());var _e=_(ct());var vn=_(Rn());s();i();var K=_(y());s();i();var jo=_(y());var es=10,Se=process.env.APP_VERSION,ts="VERSIONUPDATESHOWN",os=/(http|ftp|https):\/\/[\w\-_]+(\.[\w\-_]+)+([\w\-.,@?^=%&:/~+#]*[\w\-@?^=%&/~+#])?/,R="wallet_extension_rn",Ee=`v${Se==null?void 0:Se.split(".").join("_")}`,ns=()=>{let e=v(),t=e(`${R}_title_${Ee}`)||e(`${R}_title`),n=e(`${R}_version_${Ee}`)||e(`${R}_version`,{version:Se}),l=e(`${R}_button_${Ee}`)||e(`${R}_button`);return{tips:new Array(es).fill(!0).map((m,c)=>{let a=`${R}_content_${c+1}_${Ee}`;return{key:a,content:e(a)}}).filter(({key:m,content:c})=>!!c&&c!==m),title:t,version:n,confirm:l}},qo=({history:e})=>{let t=v(),[n,l]=jo.default.useState(!1),r=`${ts}-${Se}`,m=ns();Ye(()=>{!it.get(r)&&!!m.tips.length&&l(!0)});let c=To(()=>{l(!1),it.set(r,!0);let a=t(`${R}_button_link_${Ee}`);!a||(os.test(a)?globalThis.open(a):e.push(a))},[]);return{visible:n,onConfirm:c,...m}};s();i();var Zo=e=>{let{tips:t,title:n,version:l,confirm:r,visible:m,onConfirm:c}=qo(e);return K.default.createElement(re,{hideCloseBtn:!0,noContentPadding:!0,visible:m,windowStyle:{width:256}},K.default.createElement("div",{className:"version-dialog"},K.default.createElement("img",{className:"version-dialog__logo",src:"static/images/version_update_logo.svg"}),K.default.createElement("h1",{className:"version-dialog__title"},n),K.default.createElement("div",{className:"version-dialog__desc"},l),K.default.createElement("ul",{className:"version-dialog__tips"},t.map(({content:a})=>K.default.createElement("li",{key:a,className:"version-dialog__tip"},a))),K.default.createElement(p,{circle:!0,className:"version-dialog__button",category:p.CATEGORY.fill,type:p.TYPE.highlight,onClick:c},r)))};s();i();var se=_(y()),ft=_(Ie());s();i();var B=_(y());s();i();var Ae=_(y());var Ko=_(ct()),ss=({item:e,index:t})=>{let[n,l]=(0,Ae.useState)(!1),r=t%2>1?F.DIRECTION.top:F.DIRECTION.topRight;return Ae.default.createElement(F,{show:n,title:e.collectionName,trigger:F.TRIGGER_TYPES.hover,placement:r},Ae.default.createElement("span",{onMouseOver:()=>{let m=e.isIdentification?127:144;document.querySelector(`.ok-nft--collection-name-hidden-${e.id}`).clientWidth>m&&l(!0)},onMouseLeave:()=>{l(!1)},className:(0,Ko.default)("ok-nft--collection-name",{"ok-nft--collection-identification-name":e.isIdentification})},e.collectionName))},Xo=ss;var Ve=e=>{let t=e.salePrice||e.lastPrice||e.bestOfferPrice,n=v(),l=n("wallet_extension_nft_detail_text_price"),r="New";return e.lastPrice?l=n("wallet_extension_nft_detail_text_last"):e.bestOfferPrice&&(l=n("wallet_extension_nft_detail_text_best_offer")),B.default.createElement("div",{onClick:e.onClick,className:"ok-nft--main-item"},e.isNew&&B.default.createElement("div",{className:"ok-nft--is-new"},r),B.default.createElement(Mo,{startStatus:e.activeId===2,src:e.image,alt:"",classnames:"ok-nft--image",backupImage:"/static/images/nft/nft-backup-image.png"}),B.default.createElement("div",{className:"ok-nft--main-item-info"},B.default.createElement("div",{className:"ok-nft--collections"},B.default.createElement(Xo,{item:e}),B.default.createElement("div",{className:`ok-nft--collection-name-hidden-${e.id}`,style:{position:"absolute",visibility:"hidden"}},e.collectionName),e.isIdentification&&B.default.createElement("img",{src:"/static/images/nft/nft-isidentification.svg",className:"ok-nft--flag-image"}),B.default.createElement("img",{src:e.chainIcon,className:"ok-nft--chain-image"})),B.default.createElement("div",{className:"ok-nft--name"},e.name),B.default.createElement("div",{className:"ok-nft--price-type"},l),B.default.createElement("div",{className:"ok-nft--price-value"},(t==null?void 0:t.currencyUrl)&&B.default.createElement("img",{src:`${t==null?void 0:t.currencyUrl}`,className:"ok-nft--price-value-chain-image"}),B.default.createElement("span",null,(t==null?void 0:t.priceDisplay)||"--"))))};s();i();var D={INIT:"init",FILTER:"filter"};s();i();var ee=_(y());var is=({type:e=D.INIT})=>{let t=v(),n=z(),l=(0,ee.useCallback)(()=>{n(Ge.setNftFilterInfo({filterInfo:{collectionFilter:[],chainListFilter:[],saleStatusFilter:[]}}))},[]),r={[D.INIT]:t("wallet_extension_nft_tab_nfts_desc"),[D.FILTER]:t("wallet_extension_nft_text_no_items_found")},m={[D.INIT]:t("wallet_extension_nft_tab_nfts_btn_explorenfts"),[D.FILTER]:t("wallet_extension_nft_btn_back_to_items")},c={[D.INIT]:"/static/images/nft/no-nft.png",[D.FILTER]:"/static/images/nft/nft-filter-no-collection.svg"};return ee.default.createElement("div",{className:e===D.INIT?"ok-nft-no-data-init":"ok-nft--no-filter-result"},ee.default.createElement("div",{style:{width:"86px",height:"86px"}},ee.default.createElement(J,{width:86,height:86,alt:"",src:c[e]})),ee.default.createElement("div",{className:e===D.INIT?"ok-nft-no-data-text":"ok-nft--no-filter-result-text"},r[e]),ee.default.createElement(p,{category:p.CATEGORY.fill,type:p.TYPE.highlight,size:p.SIZE.md,onClick:()=>{if(e===D.INIT){globalThis.platform.openTab({url:"https://www.okx.com/web3/nft/featured"});return}l()},className:e===D.INIT?"ok-nft-no-data-button":"ok-nft--no-filter-result-button"},m[e]))},dt=is;var ut=({list:e,filterStatus:t})=>{let n=d(ze),l=G();return e.length>0?se.default.createElement("div",{className:"ok-nft--main-list"},e.map(r=>se.default.createElement(Ve,{key:r.id,...r,activeId:n,onClick:()=>{l.push({search:`chainId=${r.chain}&contractAddress=${r.contractAddress}&tokenId=${encodeURIComponent(r.tokenId)}`,pathname:`${Ce}`})}}))):t?se.default.createElement("div",{className:"ok-nft--main-no-nft"},se.default.createElement(dt,{type:D.FILTER})):se.default.createElement("div",{className:"ok-nft--main-no-nft"},se.default.createElement(dt,{type:D.INIT}))};ut.propTypes={list:ft.default.array,filterStatus:ft.default.bool};ut.defaultProps={list:[],filterStatus:!1};var Qo=ut;s();i();var H=_(y());var Jo=({data:e=[],accountAddress:t})=>{let[n,l]=(0,H.useState)(!1),r=G(),m=v(),c=m("extension_home_aptos_nft_card_receivenum",{num:H.default.createElement("span",{key:"language",className:"new-home-page-aptos-notify"},e.length)});return H.default.createElement(H.default.Fragment,null,H.default.createElement(re.Action,{windowStyle:{borderTopLeftRadius:"8px",borderTopRightRadius:"8px"},onClose:()=>{l(!1)},visible:n,title:H.default.createElement("span",{className:"new-home-page-aptos-title"},m("extension_aptos_nft_title_receiveallowed")),windowClass:"new-home-page-aptos-claim"},H.default.createElement("div",{className:"ok-nft--main-list"},e.map(a=>(a.coverUrl?a.image=a.coverUrl:a.resourceType===1&&(a.image=a.resourceUrl),a.lastPrice=xe(a.lastPrice),a.bestOffer=xe(a.bestOffer),a.sale=xe(a.sale),a.floorPriceDetail=xe(a.floorPriceDetail),H.default.createElement(Ve,{...a,key:a.tokenId,activeId:2,onClick:()=>{r.push({search:`chainId=${a.chain}&contractAddress=${a.contractAddress}&tokenId=${encodeURIComponent(a.tokenId)}&claim=true&offerAddress=${a.offerAddress}&accountAddress=${t}`,pathname:`${Ce}`})}}))))),H.default.createElement("div",{className:"new-home-page-aptos-box"},H.default.createElement(J,{alt:"",width:32,height:32,className:"new-home-page-aptos-image",src:e[0].coverUrl||e[0].resourceUrl}),H.default.createElement("div",{className:"new-home-page-aptos-text"},c),H.default.createElement("span",{className:"new-home-page-aptos-get",onClick:()=>{e.length>1?l(!0):r.push({search:`chainId=${e[0].chain}&contractAddress=${e[0].contractAddress}&tokenId=${encodeURIComponent(e[0].tokenId)}&claim=true&offerAddress=${e[0].offerAddress}&accountAddress=${t}`,pathname:`${Ce}`})}},m("extension_home_aptos_nft_card_receivenow"))))};s();i();var S=_(y());function Ro(){let e=v(),t=z(),[n,l]=(0,S.useState)(!1),r=d($),{hasThirdExt:m,closeDefaultWalletPopup:c}=d(({metamask:u})=>({hasThirdExt:u.preferences.hasThirdExt,closeDefaultWalletPopup:u.preferences.closeDefaultWalletPopup})),a=d(jt),h=d(({metamask:u})=>u.preferences.useWallet);(0,S.useEffect)(()=>{l((m||!window.chrome)&&!r&&!h&&(!c||a))},[m,r]);let[N,C]=(0,S.useState)(null);return yo(()=>{N&&t(mt(!0)),N&&N.destroy()}),(0,S.useEffect)(()=>{if(c&&t(mt(!1)),n){let u=W.info({duration:0,onClose:()=>{C(null),t(uo(!0))},icon:S.default.createElement("img",{src:"./static/images/setting/okx-icon.svg",className:"ok-home-notification--icon"}),key:"defaultWallet",customRender:({icon:T,close:E})=>S.default.createElement(S.default.Fragment,null,T,S.default.createElement("div",{className:"ok-home-notification--main"},S.default.createElement("div",{className:"ok-home-notification--body"},S.default.createElement("span",{className:"ok-home-notification--title"},e("wallet_extension_toast_title_set_as_default")),E),S.default.createElement("div",{className:"ok-home-notification--desc"},e("wallet_extension_toast_set_as_default_desc")),S.default.createElement("div",{className:"main-button-group"},S.default.createElement(p,{category:p.CATEGORY.outline,type:p.TYPE.primary,size:p.SIZE.xxs,onClick:()=>{u&&u.destroy()}},e("wallet_extension_toast_btn_not_now")),S.default.createElement(p,{category:p.CATEGORY.fill,type:p.TYPE.highlight,size:p.SIZE.xxs,onClick:()=>{t(fo(!0)),setTimeout(()=>{W.success({title:e("wallet_extension_toast_set_successfully")})},1e3),u&&u.destroy()}},e("wallet_extension_toast_btn_set_as_default")))))});C(u)}},[n]),""}s();i();s();i();var pe=_(y()),Le=_(Ie());s();i();var en=({number:e,hidden:t=!1})=>{let n=c=>a=>pe.default.createElement("span",{className:"account-number",style:{fontSize:`${c}px`}},a),l=[{length:27,render:c=>n(18)(pe.default.createElement(Lo,{className:"account-main__tooltip-text",tooltipProps:{prefixClassName:"account-main__tooltip"},text:c}))},{length:25,render:n(18)},{length:21,render:n(20)},{length:18,render:n(24)},{length:16,render:n(28)},{length:14,render:n(32)},{length:13,render:n(36)},{length:12,render:n(40)}],r=(0,pe.useMemo)(()=>{let c=l.find(({length:a})=>(e==null?void 0:e.length)>a);return c!=null&&c.render?c==null?void 0:c.render:a=>n(44)(a)},[e]);return pe.default.createElement("div",{className:"account-main"},r(t?"*****":e||"--"))};en.propTypes={number:Le.default.oneOfType([Le.default.string,Le.default.object]).isRequired,hidden:Le.default.bool.isRequired};var _t=en;s();i();s();i();s();i();s();i();var Y=_(y());s();i();var rs=()=>{let e=G(),t=()=>{e.push(`${Me}?nextPath=${$e}`)},n=v();return d($)?Y.default.createElement(Y.default.Fragment,null,Y.default.createElement("div",{className:"backup-float"},Y.default.createElement("div",{className:"float-left"},Y.default.createElement(O,{className:"okx-wallet-plugin-security-1",style:{fontSize:"24px",color:"#E84256"}})),Y.default.createElement("div",{className:"float-right"},Y.default.createElement("div",{className:"float-right-top"},n("wallet_home_backup_warning_maintitle_not_backup")),Y.default.createElement("div",{className:"float-right-mid"},n("wallet_home_backup_warning_subtitle_not_backup_risk")),Y.default.createElement("div",{className:"float-right-bot",onClick:t},Y.default.createElement(p,{category:p.CATEGORY.fill,type:p.TYPE.highlight,className:"float-right-bot-button"},n("wallet_home_backup_warning_btn_backup_now")))))):null},tn=rs;var gt=tn;s();i();var V=_(y());s();i();var x=_(y());var as=({isOkx:e})=>{let t=v(),n=d(h=>{let N=me(h),C=He(h);return{isMNEMONIC:C[N].keyringIdentityType==="MNEMONIC WALLET",isPRIVATE:C[N].keyringIdentityType==="PRIVATE KEY WALLET",nickname:h.metamask.provider.nickname,type:h.metamask.provider.type}}),{networkList:l,isEVM:r}=d(h=>{let N=lt(h).some(C=>vo(C.coinId));return{isEVM:N,networkList:N?qt(h):lt(h)}}),m=(0,x.useMemo)(()=>r?l.find(h=>h.localType===n.type)||{}:l[0],[n.type,r,l]),[c,a]=(0,x.useState)(!1);return x.default.createElement(x.default.Fragment,null,x.default.createElement(Uo,{type:"dapp",visible:c,closeCallback:()=>{a(!1)},isOkx:e,isEVM:r,isPRIVATE:n.isPRIVATE}),x.default.createElement("div",{className:"network-block",style:{cursor:!r&&n.isPRIVATE?"default":"pointer"},onClick:()=>{!r&&n.isPRIVATE||a(!0)}},n.isMNEMONIC?x.default.createElement(x.default.Fragment,null,e&&x.default.createElement("img",{src:"/static/images/all-chain.svg",className:"network-block--icon",alt:"network-icon"}),x.default.createElement("span",{className:"network-block-name"},t("wallet_extension_option_allchain")),x.default.createElement("img",{src:"/static/images/dapp-arrow.svg",alt:"",className:"network-block--arrow"})):x.default.createElement(x.default.Fragment,null,x.default.createElement(J,{width:24,height:24,alt:"",src:(m==null?void 0:m.icon)||(m==null?void 0:m.image)||ce,errorImg:ce,className:"network-block--icon"}),x.default.createElement("span",{className:"network-block-name"},m==null?void 0:m.chainName),r&&x.default.createElement("img",{src:"/static/images/dapp-arrow.svg",alt:"",className:"network-block--arrow"}))))},on=as;var ls=()=>{let e=d(c=>c.activeTab),t=d(Ue),n=(0,V.useMemo)(()=>t.find(c=>c.origin===e.origin)||{},[t]),l=n.origin&&n.origin.replace(/^https?:\/\//iu,""),r=d($);if(!l||r)return"";let m=v();return V.default.createElement("div",{className:"ok-dapp-state ok-dapp-state-relative"},V.default.createElement("div",{className:"ok-dapp-state--main"},V.default.createElement(J,{width:32,height:32,alt:"",src:n.icon||ce,errorImg:ce,className:"ok-dapp-state--icon"}),V.default.createElement("div",{className:"ok-dapp-state--status"},V.default.createElement("div",{className:"ok-dapp-state--origin"},l),V.default.createElement("div",{className:"ok-dapp-state--connected"},m("wallet_extension_home_foot_dapp_connceted"))),V.default.createElement(on,{isOkx:n.isOkx})))},nn=ls;s();i();var je=_(y());var ms=()=>{let e=v();return je.default.createElement("div",{className:"ok-dapp-state--finish"},je.default.createElement("img",{src:"/static/images/check-green-solid.svg"}),je.default.createElement("span",null,e("wallet_home_foot_dapp_connceted")))},sn=ms;s();i();var de=_(y()),rn=_(Ie());var an=({className:e})=>{let t=z(),{userInfo:n}=d(m=>({userInfo:Mt(m)})),l=G();return de.default.createElement("div",{className:e},(()=>de.default.createElement("div",{className:"new-home__account-info",onClick:async()=>{await t(zo(!0)),await t(Go(!0)),l.push(`${oo}?fromHome=1`)}},de.default.createElement("span",{className:"new-home__account-wallet",style:{color:n.keyringColor}},n.keyringName)," - ",de.default.createElement("span",{className:"new-home__account-wallet"},n.walletName),de.default.createElement("img",{className:"new-home_account-arrow",src:"./static/images/index/arrow.svg"})))())};an.propTypes={className:rn.default.string};var ln=an;s();i();var w=_(y());var cs=({hidden:e})=>{let t=v(),{defiList:n,defiLoading:l,selectedCurrency:r,defiLoadErr:m}=d(u=>{let{metamask:T}=u,E=me(u);return{defiList:T.defiLists[E]||[],defiLoading:T.defiLoading,defiLoadErr:T.defiLoadErr,selectedCurrency:T.selectedCurrency}}),c=()=>{le().fetchDefiList()};(0,w.useEffect)(()=>{c()},[]);let a=()=>w.default.createElement("div",{className:"new-home__defi-loader"},w.default.createElement(Q,{size:Q.SIZE.lg})),h=(0,w.useMemo)(()=>w.default.createElement("div",{className:"new-home__defi-list"},n.map(u=>w.default.createElement("div",{key:u.id,className:"new-home__defi-list-item",onClick:()=>{!u.web||globalThis.platform.openTab({url:u.web})}},w.default.createElement("img",{src:u.logo,alt:"logo",className:"new-home__defi-list-item-logo"}),w.default.createElement("div",{className:"new-home__defi-list-item-detail"},w.default.createElement("div",{className:"new-home__defi-list-item-detail-platform"},u.platform),w.default.createElement("div",{className:"new-home__defi-list-item-detail-networkNew"},u.networkNew)),w.default.createElement("div",{className:"new-home__defi-list-item-price"},e?"***":xo(No(u.balance,r.usdToThisRate),r.symbol))))),[n,r,e]),N=()=>w.default.createElement("div",{className:"new-home__defi-empty"},w.default.createElement("img",{src:"/static/images/explore-dapps.png",alt:"ExploreDApps",className:"new-home__defi-empty-img"}),w.default.createElement("div",{className:"new-home__defi-empty-slogan"},t("wallet_extension_text_enjoy_massive_defi")),w.default.createElement(p,{style:{padding:"8px 24px"},category:p.CATEGORY.fill,type:p.TYPE.highlight,size:p.SIZE.md,className:"new-home__defi-empty-button",onClick:()=>{globalThis.platform.openTab({url:t("extension_btn_link_okxweb3yield")})}},t("wallet_extension_btn_explore_dapps"))),C=()=>w.default.createElement("div",{className:"new-home__defi-error"},w.default.createElement("img",{className:"new-home__defi-error-img",src:"static/images/nft/nft-error.svg",alt:"error"}),w.default.createElement("div",{className:"new-home__defi-error-text"},t("wallet_extension_nft_text_loading_failed")),w.default.createElement(p,{category:p.CATEGORY.fill,type:p.TYPE.highlight,size:p.SIZE.sm,width:132,circle:!0,onClick:c},t("wallet_extension_nft_btn_refresh")));return m?C():w.default.createElement(w.default.Fragment,null,!!n.length&&h,!n.length&&(l?a():N()))},mn=cs;s();i();var k=_(y());var ht=_(Ie());var cn=_(ct()),pn=_(Jn());var Nt=({freeze:e,unfreeze:t})=>{let n=d(io),l=d($),r=v(),[m,c]=(0,k.useState)(!1);(0,k.useEffect)(()=>{m?e():t()},[m]);let a=n.map(({image:M,chainName:A,address:L})=>({value:{address:L,chainName:A},label:k.default.createElement("div",{className:"new-home__address-copy-chain-item"},k.default.createElement("div",{className:"new-home__address-copy-chain-item-left"},k.default.createElement("img",{src:M,alt:A})),k.default.createElement("div",{className:"new-home__address-copy-chain-item-main"},k.default.createElement("div",{className:"new-home__address-copy-chain-item-name"},A),k.default.createElement("div",{className:"new-home__address-copy-chain-item-addr"},Ht(L))),k.default.createElement("div",{className:"new-home__address-copy-chain-item-right"},k.default.createElement(O,{className:"okx-wallet-plugin-copy-1",style:{fontSize:"20px"}})))})),h=M=>{(0,pn.default)(M.value.address),W.success({title:r("wallet_extension_transaction_toast_network_address_copied",{network:M.value.chainName}),desc:M.value.address,duration:1.5,placement:W.DIRECTION.top,containerClassName:"address-copy-notification"})},N=(0,k.useRef)(null),C=()=>k.default.createElement("div",{ref:N,className:"new-home__address-copy-button"},k.default.createElement(F,{title:r("wallet_extension_top_copy_address"),gutter:6},k.default.createElement(ne,null,k.default.createElement(O,{className:"okx-wallet-plugin-copy-1",style:{fontSize:"20px"}})))),[u,T]=(0,k.useState)(Te.DIRECTION.left);(0,k.useEffect)(()=>{if(N&&N.current){let A=N.current.getBoundingClientRect().left*2>window.innerWidth;T(A?Te.DIRECTION.right:Te.DIRECTION.left)}},[N]);let{run:E}=oe(()=>{l&&W.warn({title:r("wallet_account_toast_backup_view_address"),duration:1.5,containerClassName:"address-copy-notification",placement:W.DIRECTION.top})},{leading:!0,wait:300});return k.default.createElement("div",{className:"new-home__address-copy",onClick:E},k.default.createElement("div",{className:(0,cn.default)({"new-home__address-copy-mask":!0},{"new-home__address-copy-mask-visible":m}),onClick:()=>{c(!1)}}),k.default.createElement(Te,{disabled:l,options:a,onChange:h,displayArea:C,align:u,popupProps:{zIndex:10001},optionContClassName:"new-home__address-copy-drop-container",optionItemClassName:"new-home__address-copy-drop-option",onToggleShow:M=>{setTimeout(()=>{c(M)},0)}}))};Nt.propTypes={freeze:ht.default.func,unfreeze:ht.default.func};Nt.defaultProps={freeze:()=>{},unfreeze:()=>{}};var dn=Nt;s();i();var Pe=_(y());var ps=({iconName:e,text:t,onClick:n})=>Pe.default.createElement("div",{className:"ok-home-button"},Pe.default.createElement("div",{className:"ok-home-button-icon-container",onClick:n},Pe.default.createElement(O,{className:e,style:{fontSize:"28px"}})),Pe.default.createElement("div",{className:"ok-home-button-text"},t)),qe=ps;s();i();var j=_(y());var ds=()=>{let[e,t]=(0,j.useState)(null),n=Co(),l=d(Zt);(0,j.useEffect)(()=>{l.length&&t(l[0])},[l]);let{run:r}=oe(m=>{Ot();let c=`https://${n}${m}`;globalThis.open(c)},{leading:!0,wait:300});return e?j.default.createElement("div",{className:"new-home__banner",onClick:()=>r(e.url)},j.default.createElement("div",{className:"new-home__banner-container"},j.default.createElement("img",{src:"/static/images/banner/ethw.png"}),j.default.createElement("p",{className:"new-home__banner-title"},e.title),j.default.createElement("p",{className:"new-home__banner-subtitle"},e.subTitle))):null},fn=ds;s();i();var X=_(y());var fs=({handleClick:e})=>X.default.createElement("div",{className:"skeleton-wrapper",onClick:e},X.default.createElement(ae.Input,{active:!0,className:"setting"}),X.default.createElement(ae.Input,{active:!0,className:"balance"}),X.default.createElement("div",{className:"operate-button-list"},Array(3).fill("").map((t,n)=>X.default.createElement("div",{className:"operate-button-item",key:n},X.default.createElement(ae.Avatar,{active:!0,className:"circle"}),X.default.createElement(ae.Input,{active:!0,className:"rectangle"})))),X.default.createElement(ae,{active:!0,paragraph:{className:"paragraph-item",rows:4,width:"100%"}})),un=fs;s();i();var ue=_(y());var Ze="CREATE_FAIL_CODE",vt="BALANCE_FAIL_CODE",fe="PENDING",_n=(e,t,n)=>{let{needSyncMap:l}=d(({metamask:E})=>({needSyncMap:E.needSyncMap})),r=Boolean(l[t]),[m,c]=(0,ue.useState)(!e||r),[a,h]=(0,ue.useState)(m?fe:""),N=async()=>{try{await Eo()}catch{h(vt);return}h("")},C=async()=>{let E=await le().getWalletTypeCreated(t);h(fe);try{await le().createWalletToServer({walletId:t,walletType:E,noticeBackend:!0})}catch{h(Ze);return}await N()},u=async()=>{try{await le().syncWalletToServer(t)}catch(E){console.log(E)}await N()},T=async()=>{e?r?await u():await N():await C()};return(0,ue.useEffect)(()=>{T()},[]),(0,ue.useEffect)(()=>{n.length>0&&(e||a!==Ze)&&a!==fe&&c(!1)},[n,a,e]),[{errorType:a,skeleton:m},{createWalletToServer:C}]};s();i();var U=_(y());var gn=new Dt,hn=()=>{let e=z(),[t,n]=(0,U.useState)("https://beta.okex.org"),l=d(r=>r.metamask.preferences.languageKeyMode);return(0,U.useEffect)(()=>{(async()=>{let{envApiDomain:r}=await gn.get("envApiDomain");r&&n(r)})()},[]),[U.default.createElement(F,{key:"languageKey",title:"Dev and beta env use to look up the language key"},U.default.createElement(ne,{onClick:()=>{e(go(!l)).then(()=>{window.location.reload()})}},U.default.createElement(O,{className:"okx-wallet-plugin-slow",style:{fontSize:"24px"}}))),U.default.createElement(F,{key:"changeNetwork",title:`${`Dev and beta env change api domain ${t}`}`},U.default.createElement(At,{searchable:!1,displayArea:()=>U.default.createElement(O,{className:"okx-wallet-plugin-fast",style:{fontSize:"24px"}}),key:"network",label:U.default.createElement("div",null,`Api Domain ${t}`),onChange:async r=>{await gn.set({envApiDomain:r.value}),window.location.reload()},value:window.localStorage.envApiDomain,options:[{label:"dev(http://kong-proxy.dev-e-okex.svc.dev.local:8443)",value:"http://kong-proxy.dev-e-okex.svc.dev.local:8443"},{label:"beat(https://beta.okex.org)",value:"https://beta.okex.org"},{label:"online(https://wallet.okex.org)",value:"https://wallet.okex.org"}]}))]};s();i();var Nn=null,wt=e=>{let{firstPermissionsRequestId:t,balance:n,addedCoins:l,scrollTop:r,setHomePageScrollTop:m,resetCustomCoinInfo:c,isNotification:a,totalUnapprovedCount:h,isNotBackup:N,getHomepageBannerInfo:C,nftFilter:u,activeId:T,nftListLoading:E,nftListLoadingError:M,nftFilterStatus:A,nftList:L,nftPageNo:Ke,totalNftCount:ie,amountForMonitor:q,nftAmountNumber:ge,walletId:te,watchedSeed:Xe,setWatchedSeed:he,removeToastHashMap:Be,isWalletCreated:De,getChainInfo:Oe}=e,b=v(),Ne=z(),[{errorType:Qe,skeleton:yn},{createWalletToServer:In}]=_n(De,te,l),{activeTab:Tn,hiddenAssets:Fe}=d(f=>({activeTab:f.activeTab,hiddenAssets:Ut(f)})),kt=256,bn=d(Ue),Je={};bn.forEach(f=>{f.origin===Tn.origin&&(Je=f)});let Cn=Je.origin&&Je.origin.replace(/^https?:\/\//iu,""),Re=d($),P=(0,o.useRef)(null),ve=(0,o.useRef)(null),[xn,yt]=(0,o.useState)(!1),[En,et]=(0,o.useState)(0),Sn=b("wallet_home_btn_manage_crypto"),Z=G(),An=190,Ln=24;Ro();let It=(f=3)=>{W.error({title:b("wallet_extension_toast_asset_error_try_again"),duration:f,placement:W.DIRECTION.top})};(0,o.useEffect)(()=>{switch(Qe){case Ze:It();break;case vt:It(1);break;default:break}},[Qe]),(0,o.useEffect)(()=>{T==1?et(Ln):T===2&&(L.length===2&&!A?et(54):et(0))},[T]);let[Tt,bt]=(0,o.useState)(!1);(0,o.useEffect)(()=>{Ft({wallet_id:te,coin_balance:q,nft_balance:ge})},[q,ge]),(0,o.useEffect)(()=>{(P==null?void 0:P.current)&&ve.current&&(P.current.scrollTop>=60&&ve.current.classList.add("is-stuck"),P.current.addEventListener("scroll",f=>ve.current.classList.toggle("is-stuck",f.target.scrollTop>=60),!1))},[P,ve]);let tt=d(Ao),Pn=d(So),Ct=()=>{let f=re.warn({alignBottom:!1,title:b("wallet_dapp_conncetion_modal_backup_your_wallet"),text:b("wallet_dapp_conncetion_alert_backup_wallet"),cancelText:b("wallet_transfer_btn_cancel_transaction"),confirmText:b("wallet_home_backup_warning_btn_backup_now"),onConfirm:()=>{f.destroy(),Z.push(`${Me}?nextPath=${$e}`)},onCancel:()=>{Ne(ho(e.firstPermissionsRequestId)),f.destroy()}})};(0,o.useEffect)(()=>{a&&h===0?!tt&&!Pn&&globalThis.platform.closeCurrentWindow():t&&Re&&Ct()},[Re,tt,t,Z,a,h]);let ot=d(f=>He(f)[te].account.aptos),Bn=d(Po),[nt,Dn]=(0,o.useState)([]);(0,o.useEffect)(()=>{ot&&wo(ot).then(f=>{Dn(f.list)})},[Bn]);let we=d(Kt),ke=bo().get("toastHash");(0,o.useEffect)(()=>{if(we[ke]){if(Nn===we[ke].message)return;Nn=we[ke].message,W.success({title:b("wallet_extension_popupsubtitle_imported",{walletName:we[ke].message}),duration:1.5,placement:W.DIRECTION.top}),Be()}},[we,ke]);let On=f=>({projects:f.collectionFilter.join(","),chainIds:f.chainListFilter.join(","),saleStatus:f.saleStatusFilter.join(",")}),[Fn,Wn]=(0,o.useState)(On(u));Vo(Fn);let st=async f=>{let ye={projects:u.collectionFilter.join(","),chainIds:u.chainListFilter.join(","),saleStatus:u.saleStatusFilter.join(","),pageNo:f};Wn(ye)};Io(()=>{st(1)},[u]),Ye(()=>{if(C(),m(0),Re){let f=(0,vn.cloneDeep)(Xe);f[te]=!1,he(f)}c(),Oe()});let Hn=68,Mn=148+24,We="0px";N&&(We=`${Mn}px`),Cn&&(We=`${Hn}px`);let xt=o.default.createElement("div",{className:`${l.length>8&&r>An?"ok-home-bottom-panel__sticky":""} ok-home-bottom-panel`,style:{bottom:We}},o.default.createElement(p,{circle:!0,category:p.CATEGORY.outline,type:p.TYPE.secondary,size:p.SIZE.md,className:"home-button sticky",onClick:()=>{Z.push(eo)}},o.default.createElement(O,{className:"okx-wallet-plugin-edit-wallet",style:{fontSize:"20px",marginRight:"7px"}}),Sn)),$n=b("wallet_extension_nft_popup_title_filter"),Un=A?`\uFF08${ie}\uFF09`:"",Yn=o.default.createElement("div",{className:(0,_e.default)({"ok-home-bottom-panel__sticky":(A||r>kt)&&L.length===ie&&L.length!==0},{"ok-home-bottom-panel__fixed":(A||r>kt)&&L.length<ie||L.length===0&&A},"ok-home-bottom-panel--nft","ok-home-bottom-panel__disabled"),style:{bottom:We}},o.default.createElement(p,{icon:"okx-wallet-plugin-filter",type:p.TYPE.secondary,category:A?p.CATEGORY.fill:p.CATEGORY.outline,iconType:p.ICON_POSITION.leading,className:"home-button-nft sticky",onClick:()=>{Z.push(Jt)}},$n+Un)),zn=o.default.createElement("div",{className:"ok-home--empty-div",style:{height:En}}),{run:Gn}=oe(()=>{P.current.scrollTop>=32&&!Tt?bt(!0):P.current.scrollTop<32&&Tt&&bt(!1)},{wait:50}),Et=[b("wallet_extension_nft_tab_coins"),o.default.createElement("div",null,b("wallet_extension_nft_tab_nfts"),nt.length>0&&o.default.createElement("span",{className:"new-home-nft-aptos-notify"})),b("wallet_extension_tab_defi")],Vn={1:()=>o.default.createElement(pt,{hidden:Fe,listData:l,listType:Ho.HOME_PAGE}),2:()=>M?o.default.createElement("div",{className:(0,_e.default)("ok-home--error-parent")},o.default.createElement("img",{src:"./static/images/nft/nft-error.svg",alt:"error"}),o.default.createElement("div",{className:(0,_e.default)("ok-home--error-text")},b("wallet_extension_nft_text_loading_failed")),o.default.createElement(p,{category:p.CATEGORY.fill,type:p.TYPE.highlight,size:p.SIZE.sm,width:132,circle:!0,onClick:()=>{st(1)}},b("wallet_extension_nft_btn_refresh"))):E&&L.length===0?o.default.createElement("div",{className:(0,_e.default)("ok-home--loading-parent")},o.default.createElement(Q,{size:Q.SIZE.xl})):o.default.createElement(o.default.Fragment,null,nt.length>0&&o.default.createElement(Jo,{data:nt,accountAddress:ot}),o.default.createElement(Qo,{filterStatus:A,list:L})),3:()=>o.default.createElement(mn,{hidden:Fe})},jn=()=>o.default.createElement(be,{className:"ok-home--tab",activeId:T,size:be.SIZE.xl,color:be.COLOR.grey,paneSpacing:0,onChange:f=>{Ne(Ge.setActiveId({id:f}))},average:!0},Array(Et.length).fill(1).map((f,ye)=>o.default.createElement(be.TabPane,{tab:Et[ye],key:ye,id:ye+1}))),qn=o.default.createElement("div",{className:"ok-home-button-group"},o.default.createElement(qe,{iconName:"okx-wallet-plugin-arrow-pointer-up",text:b("wallet_home_btn_send"),onClick:()=>{Z.push({pathname:at,state:{nextPage:Xt,isSend:!0}})}}),o.default.createElement(qe,{iconName:"okx-wallet-plugin-arrow-pointer-down",text:b("wallet_home_btn_receive"),onClick:()=>{N?yt(!0):Z.push({pathname:at,state:{nextPage:Rt,isReceive:!0}})}}),o.default.createElement(qe,{iconName:"okx-wallet-plugin-order",text:b("wallet_extension_header_text_history"),onClick:()=>{Z.push(no)}})),{run:Zn}=oe(()=>{let f=P.current.scrollTop;m(f),!E&&f>268*Math.ceil(L.length/2)+240-600&&ie>L.length&&st(Ke+1)},{wait:50}),Kn=o.default.createElement("div",{className:"ok-home--nft-loading-panel"},o.default.createElement("div",{className:"ok-home-page--nft-loading"},o.default.createElement(Q,{size:Q.SIZE.lg,style:{height:"30px",width:"30px"}}))),Xn=()=>{var f;return T===2&&E&&L.length>0&&((f=P==null?void 0:P.current)==null?void 0:f.scrollTop)>480?Kn:T===2?Yn:T===1?xt:T===3?null:xt},Qn=async()=>{Qe!==fe&&(W.destroyAll(),await In())},St=process.env.ASSETS_BUILD_TYPE===rt.DEV||process.env.ASSETS_BUILD_TYPE===rt.DAILY;return o.default.createElement("div",{className:"ok-home-page main-container",ref:P,onScroll:()=>{Gn()},onScrollCapture:()=>{Zn()}},yn&&o.default.createElement(un,{handleClick:Qn}),o.default.createElement("div",{className:"new-home__header-top"},o.default.createElement("div",{className:`new-home_header-menu ${St?"new-home_header-menu__dev":""}`},St&&o.default.createElement(hn,null),o.default.createElement(F,{title:b("wallet_extension_top_hover_settings"),gutter:6},o.default.createElement(ne,{onClick:()=>{Z.push(to)}},o.default.createElement(O,{className:"okx-wallet-plugin-setting",style:{fontSize:"24px"}}))),o.default.createElement(F,{title:b("wallet_extension_top_hover_connect"),offset:[-10,6],gutter:6},o.default.createElement(ne,{onClick:()=>{Z.push(Qt)}},o.default.createElement(O,{className:"okx-wallet-plugin-connect",style:{fontSize:"24px"}})))),o.default.createElement("div",{className:"new-home__account-menu",ref:ve},o.default.createElement(F,{title:b("wallet_extension_top_manage_wallet"),gutter:6},o.default.createElement(ln,{className:(0,_e.default)("new-home__info-container")})),o.default.createElement("div",{className:"new-home__account-icon-line"}),o.default.createElement(dn,{freeze:()=>{P.current.style.overflowY="hidden"},unfreeze:()=>{P.current.style.overflowY="auto"}})),o.default.createElement("div",{className:"new-home__account"},o.default.createElement("div",{className:"new-home__account-assets",onClick:()=>{Ne(_o(!Fe))}},o.default.createElement(_t,{hidden:Fe,number:n})),qn,o.default.createElement(fn,null)),jn(),Vn[T](),Xn(),zn),De&&o.default.createElement(gt,null),o.default.createElement(nn,null),tt&&o.default.createElement(sn,null),o.default.createElement($o,{backupShow:xn,setBackupShow:yt}),o.default.createElement(Yo,{showBackup:Ct}),o.default.createElement(Zo,null))};wt.propTypes={balance:I.default.oneOfType([I.default.number,I.default.string]),addedCoins:I.default.array,scrollTop:I.default.number,setHomePageScrollTop:I.default.func,resetCustomCoinInfo:I.default.func,getHomepageBannerInfo:I.default.func,isNotBackup:I.default.bool,isNotification:I.default.bool,totalUnapprovedCount:I.default.number,firstPermissionsRequestId:I.default.string,nftFilter:I.default.object,activeId:I.default.number,nftListLoading:I.default.bool,nftListLoadingError:I.default.bool,nftFilterStatus:I.default.bool,totalNftCount:I.default.number,nftPageNo:I.default.number,amountForMonitor:I.default.string,nftAmountNumber:I.default.string,watchedSeed:I.default.object};wt.defaultProps={balance:0,addedCoins:[],scrollTop:0,setHomePageScrollTop:()=>{},resetCustomCoinInfo:()=>{},getHomepageBannerInfo:()=>{},isNotBackup:!1,isNotification:!1,totalUnapprovedCount:0,firstPermissionsRequestId:"",nftListLoadingError:!1,amountForMonitor:"0",nftAmountNumber:0,watchedSeed:!1};var wn=wt;var us=e=>e.map(t=>({...t,currencyAmountFormated:null,coinAmount:null})),_s=e=>{var Oe,b;let{metamask:t}=e,{createdMap:n,needSyncMap:l={}}=t,r=$t(e),m=Bt(),c=m===Lt,a=m===Pt,h=so(e),N=h&&h.metadata?h.metadata.id:null,C=Fo(e),u=ze(e),T=Object.keys(C).some(Ne=>C[Ne].length!==0),E=Bo(e),{list:M,total:A,pageNo:L}=E,{nftAmountNumber:Ke}=Yt(e),ie=Vt(e),q=me(e),ge=Wo(e),te=ge[q],Xe=ge.platformAssetAmount[q],he=((Oe=e.metamask)==null?void 0:Oe.balanceCoinList)&&((b=e.metamask)==null?void 0:b.balanceCoinList[q])||zt(e),Be=Boolean(n[q]),De=Boolean(l[q]);return(!Be||De)&&(te="--",he=us(he)),{isPopup:c,isNotification:a,totalUnapprovedCount:r,firstPermissionsRequestId:N,nftFilter:C,balance:te,addedCoins:he,scrollTop:Gt(e),isNotBackup:$(e),activeId:u,nftListLoading:Do(e),nftListLoadingError:Oo(e),nftFilterStatus:T,nftList:M,nftPageNo:L,totalNftCount:A,walletId:q,amountForMonitor:Xe,nftAmountNumber:Ke,watchedSeed:ie,isWalletCreated:Be}},gs=e=>({setHomePageScrollTop(t){e(ro(t))},resetCustomCoinInfo(){lo()},async getHomepageShowCoinList(){await po()},async getHomepageBannerInfo(){await mo()},setWatchedSeed(t){e(ao(t))},removeToastHashMap:ko,getChainInfo:co}),Ml=Wt(_s,gs)(kn.default.memo(wn));export{us as clearAmount,Ml as default};
//! dapp处理完请求均需要关闭首页， 插件内部唤起不需要关闭首页

window.inOKXExtension = true;
window.ASSETS_BUILD_TYPE = "publish";

