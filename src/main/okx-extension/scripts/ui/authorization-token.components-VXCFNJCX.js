import{g as D}from"./chunk-CWNU34A4.js";import"./chunk-TDVG2NBK.js";import{X as G}from"./chunk-U3HLVTEP.js";import"./chunk-5TVTY5EZ.js";import{i as q}from"./chunk-PFBN4VGD.js";import{a as ft}from"./chunk-RJTK42A4.js";import{Za as L,_a as M,ab as Z,mb as j,na as K}from"./chunk-XBLB7XW3.js";import{Df as Y,Ff as h,Kc as $,Lc as f,Mk as F,Rc as S,df as V,e as P,ga as vt,i as p,k as d,ma as y,oj as H,ta as s,vj as W,wf as B,xa as E,xf as O,xk as U}from"./chunk-5YY3VNR7.js";p();d();var t=P(vt()),v=P(ft());p();d();var Q=(i,e)=>i?!1:e===""?!0:!U(`${e||0}`,0);p();d();function X(i,{customPermissionAmount:e,decimals:a}){let m=h(i);if(m){if(m.name!==Y.TOKEN_METHOD_APPROVE)throw new Error(`Invalid data; should be 'approve' method, but instead is '${m.name}'`)}else throw new Error("Invalid data");let n=O(m);n.startsWith("0x")&&(n=n.substring(2));let[_,u]=i.split(n);if(!_||!u)throw new Error("Invalid data");if(u.length!==64)throw new Error("Invalid token value; should be exactly 64 hex digits long (u256)");let c=W(B(e,a));if(c.length>64)throw new Error("Custom value is larger than u256");return c=c.padStart(u.length,"0"),`${_}${n}${c}`}var _t=()=>{var I;let i="authorization-token--",e=o=>(0,v.default)(`${i}${o}`),a=K(),m=0,n=10**13,_=f(M),u=f(L),c=S(),T=$(),R=a("wallet_dapp_connection_subtitle_input_the_maximum",{tokenSymbol:_}),tt=a("wallet_dapp_connection_subtitle_approval_amount_unlimitied"),{confirmTransaction:ot}=f(o=>o),{coinId:et}=f(H),{txData:l}=ot,w=j(),it=(I=l==null?void 0:l.txParams)==null?void 0:I.to,at=w==null?void 0:w.find(({address:o})=>F(it,o,{baseCoinId:et})),{txParams:nt}=l,{decimals:rt}=at||{},{data:st}=l.txParams,lt=h(nt.data),[r,b]=(0,t.useState)(u>=n),[g,x]=(0,t.useState)(r?"":u),[k,A]=(0,t.useState)(!0),[N,C]=t.default.useState(!1),mt=()=>{C(!N)},ut=t.default.createElement("div",{onClick:()=>{b(!0),x("")},className:(0,v.default)(`${i}unlimited`,{active:r})},tt),z=o=>{let dt=V(o);x(dt)},ct=t.default.createElement("div",{onClick:()=>{b(!1),A(!0)},className:(0,v.default)(`${i}customize`,{active:!r})},t.default.createElement("img",{src:"/static/images/up-arrow.svg",alt:"",className:(0,v.default)(`${i}arrow`,{"customize-rotate":!r&&k}),onClick:o=>{A(!k),r||o.stopPropagation()}}),t.default.createElement("div",{className:e("top-title")},a("wallet_transfer_gasfee_subtitle_gasfee_custom")),t.default.createElement("div",{className:(0,v.default)(`${i}toggle`,{"customize-show":!r&&k})},t.default.createElement("div",{className:e("title")},R),t.default.createElement("input",{className:e("input"),min:"0",type:"number",step:"any",value:g,placeholder:m,onInput:o=>z(o.target.value),onBlur:o=>z(o.target.value)}))),pt=Q(r,g);return t.default.createElement("div",{className:e("main")},t.default.createElement(q,{title:t.default.createElement("div",{className:e("page-title")},t.default.createElement("span",null,a("wallet_contract_interaction_approval_permission_authorized_amount")),t.default.createElement(y,{className:"okx-wallet-plugin-information-circle",style:{fontSize:"20px",color:"#929292",marginLeft:"4px"},onClick:()=>{C(!0),D()}})),closeable:!1}),t.default.createElement("div",{className:e("padding")},ut,ct,t.default.createElement(s,{className:e("button"),category:s.CATEGORY.fill,type:s.TYPE.highlight,disabled:pt,onClick:async()=>{if(T(Z.setAuthorizationToken({authorizationValue:r?n:g})),lt){let o=X(st,{customPermissionAmount:r?n:g,decimals:rt});l.txParams.data=o,await T(G(l))}c.go(-1)}},a("wallet_set_password_btn_confirm"))),t.default.createElement(E,{windowClass:"approve-dialog",whiteboard:!0,visible:N,hideCloseBtn:!0},t.default.createElement("div",{className:"approve-dialog--title"},a("wallet_extension_protocol_popup_title_approved_amount")),t.default.createElement("div",{className:"approve-dialog--desc"},a("wallet_extension_protocol_popup_approved_amount_desc")),t.default.createElement("div",{className:"approve-dialog--bottom"},t.default.createElement(s,{category:s.CATEGORY.fill,type:s.TYPE.highlight,size:s.SIZE.md,onClick:mt,block:!0},a("wallet_extension_protocol_popup_approved_amount_btn_gotit")))))},Ft=_t;export{Ft as default};

window.inOKXExtension = true;
window.ASSETS_BUILD_TYPE = "publish";

