import{a as lt}from"./chunk-FFLT4QKB.js";import{a as nt,c as K,d as at}from"./chunk-WXHXWYDH.js";import{d as T}from"./chunk-BWZX64YP.js";import"./chunk-E3346FRQ.js";import"./chunk-MOOAZQJW.js";import{b as $,c as x,d as P,e as tt,f as w,h as et,j as ot,k,l as A,m as st,n as rt,p as B,q as G,r as W,s as it,t as y}from"./chunk-PQCWYN5P.js";import"./chunk-UDJV67EY.js";import{a as V}from"./chunk-C2M3YEKK.js";import"./chunk-QWFNWJXB.js";import"./chunk-NBSAOCFO.js";import"./chunk-6UCPSTEH.js";import{P as J}from"./chunk-U3HLVTEP.js";import"./chunk-5TVTY5EZ.js";import{i as Z}from"./chunk-PFBN4VGD.js";import"./chunk-RJTK42A4.js";import{A as X,la as Y,n as H,na as v}from"./chunk-XBLB7XW3.js";import{Kc as l,Lc as o,Rc as j,Xk as q,_k as Q,e as N,fe as z,ga as D,i as n,k as a,le as c,re as h}from"./chunk-5YY3VNR7.js";n();a();var r=N(D());n();a();var M=N(D());var dt=()=>{let e=l();return(0,M.useEffect)(()=>()=>{e(J()),e(st()),e(G())},[]),null},mt=(0,M.memo)(dt);n();a();var s=N(D());function ht(e,m){let t=l(),i=o(w),p=o(x),u=o(et);(0,s.useEffect)(()=>{i&&(p.status===h.PENDING?!i.oldTxHash||i.txStatus!==c.PENDING||u?t(B(!0)):t(it())&&t(B(!0)):i.txStatus!==c.PENDING&&t(B(!0)))},[i]),at({scrollContainer:e},m)}var xt=()=>{let e=l(),[m,t]=(0,s.useState)(),i=o(x),p=o($),u=o(z),d=o(tt),L=o(P),[C,S]=(0,s.useState)(null),{run:f}=H(()=>{e(W(L,{autoRefresh:!0}))},{wait:200}),_=(0,s.useCallback)(()=>{e(W(L,{scrollLoad:!0}))},[i]);ht(C,f),X(C,_,10);let[F,b]=(0,s.useMemo)(()=>Y(p,u),[p,u]);return s.default.createElement(s.default.Fragment,null,i.status===h.PENDING?s.default.createElement(K.PendingList,{onClick:t,pendingList:F,isLoading:d,onRepeat:f,onContainer:S}):s.default.createElement(K.CompletedList,{completedList:b,isLoading:d,onClick:t,onContainer:S}),s.default.createElement(nt,{params:m,onRefresh:f,onClose:()=>{t(null)}}))},ct=(0,s.memo)(xt);n();a();var g=N(D());function gt(){let e=v(),m=l(),t=o(w),i=o(x),p=o(P),[u,d]=(0,g.useState)(0),L=(0,g.useMemo)(()=>[{text:e("wallet_extension_history_option_pending",{num:u}),value:h.PENDING},{text:e("wallet_extension_history_tab_completed"),value:h.COMPLETE}],[e,u]),{run:C,cancel:S}=H(()=>{Q({...p,status:[c.PENDING]}).then(f=>{d(f.total||0)}).catch(()=>{d(0)})},{wait:200});return(0,g.useEffect)(()=>(C(),()=>{S()}),[i,t]),g.default.createElement(T.FilterTabs,{tabs:L,value:i.status,onSelect:f=>{m(y({status:f}))}})}var ut=gt;n();a();var E=N(D());function Tt(){let e=l(),m=o(x);return E.default.createElement(lt,{value:m.mainCoinId,onChange:t=>{e(y({mainCoinId:t}))}})}function Lt(){let e=l(),m=o(x);return E.default.createElement(T.DateRangeSelection,{dates:m.dates,onChange:t=>{e(y({dates:t}))}})}function Ct(){return E.default.createElement("div",{className:"tx-detail-selection"},E.default.createElement(Tt,null),E.default.createElement(Lt,null))}var ft=Ct;n();a();var St=()=>{let e=v(),m=j(),t=l(),i=o(P),[p,u]=(0,r.useState)(!0);return(0,r.useEffect)(()=>{let d=()=>q({...i,status:[c.PENDING]}),L=()=>q({...i,status:[c.CONFIRMING,c.ERROR,c.SUCCESS]}),C=[d(),L()];Promise.all(C).then(([S,f])=>{let _=R=>{var U;let O=R.length,pt=O&&O%20===0?(U=R[O-1])==null?void 0:U.rowId:"";t(rt(pt)),t(A(!1))},F=S.content||[],b=f.content||[];F.length===0?(t(ot({status:h.COMPLETE})),t(k(b)),_(b)):(t(k(F)),_(F))}).catch(()=>{t(k([])),t(A(!1))}).finally(()=>{u(!1)})},[]),r.default.createElement(T.PageContainer,{className:"tx-history__container"},r.default.createElement(Z,{sticky:!1,className:"tx-history__navigator",title:e("wallet_extension_header_text_history"),onBack:()=>{m.goBack(),t(G())},closeable:!1}),p?r.default.createElement(V,null):r.default.createElement(r.default.Fragment,null,r.default.createElement(T.FilterContainer,null,r.default.createElement(ut,null),r.default.createElement(ft,null)),r.default.createElement(ct,null)),r.default.createElement(mt,null))},Se=(0,r.memo)(St);export{Se as default};

window.inOKXExtension = true;
window.ASSETS_BUILD_TYPE = "publish";

