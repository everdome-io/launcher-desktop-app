import{a as ee}from"./chunk-HVJHHABX.js";import{b as Z,c as j,d as q,e as G,i as Q,j as J,k as X}from"./chunk-B5EKMKMH.js";import{Ja as K,Ua as M,r as O,s as D,t as R,y as E}from"./chunk-U3HLVTEP.js";import{c as U}from"./chunk-5TVTY5EZ.js";import{i as Y}from"./chunk-PFBN4VGD.js";import{k as z,na as V,x as B,z as $}from"./chunk-XBLB7XW3.js";import{Ha as i,Hb as C,Kc as T,Kh as F,La as v,Lc as W,Va as A,ah as x,aj as L,e as k,ga as me,i as b,k as I,ka as de,nh as H,ta as m,tb as P,ya as c,yb as S}from"./chunk-5YY3VNR7.js";b();I();var r=k(me());var N=k(de());var pe="https://www.okx.com/support/hc/zh-cn/articles/4407989094413",d={SEED:"seed",KEY:"key",HARDWARE:"hardware",CREATE:"create"},Ce=({history:re})=>{let se=$(),oe=i.useForm(),o=V(),[f,{set:y}]=z(!1),[a,te]=(0,r.useState)({}),t=T(),{seedPhrase:l,privateKey:p,unlockHardwareWallets:n,chooseNetworkList:g}=W(e=>({seedPhrase:Z(e),privateKey:j(e),unlockHardwareWallets:q(e),chooseNetworkList:G(e),onboardingInitiator:L(e)})),ae=se.get("from")===d.HARDWARE,w=async(e,s,u=["all"])=>{try{t(K(!0)).then(async()=>{await t(M());let _=`${F}/${e}/${u[0]}`,{keyringName:ne="",walletName:ie=""}=s||{},_e=`${ne}-${ie}`;e===d.HARDWARE&&S()===P&&(globalThis.platform.openExtensionInPopup(`${_}?anim=1`),globalThis.platform.closeCurrentWindow()),re.push({pathname:_,state:{walletName:_e,anim:"1",next:H||x}})}).catch(console.log)}catch(_){console.error(_.message)}},h=r.default.useMemo(()=>{let{password:e,confirmPassword:s}=a;return!((e==null?void 0:e.length)>=6&&e===s)},[f,p,l,n,a]),le=B(async()=>{var e;if(!(f||h)){y(!0);try{if(l){let s=await t(D(a.password,((e=l==null?void 0:l.trim().toLowerCase().match(/\w+/gu))==null?void 0:e.join(" "))||"",!0));w(d.SEED,s),t(Q())}if(p){let s=await t(R(a.password,g,p,!0));w(d.KEY,s,g),t(J())}if(!N.default.isEmpty(n)){await A().setPassword(a.password);let s=await t(E(n.selectedAccounts,n.device,n.path,n.description,!1));w(d.HARDWARE,s,[C]),t(X())}if(!l&&!p&&N.default.isEmpty(n)){let s=await t(O(a.password,!0));w(d.CREATE,s)}}catch(s){s.message===U&&v.error(o("wallet_home_toast_network_error"))}finally{y(!1)}}},[h,a,l,p,E,g]);return r.default.createElement("div",{className:"create-password"},r.default.createElement(Y,{bordered:!1,closeable:!1}),r.default.createElement("div",{className:"create-password__container"},r.default.createElement("h1",{className:"create-password__title"},o("wallet_signup_maintitle_set_password")),r.default.createElement("div",{className:"create-password__desc"},o(ae?"wallet_extension_signup_subtitle_set_password_hardware":"wallet_signup_subtitle_set_password"),r.default.createElement("a",{target:"__blank",href:o("wallet_set_password_header_link_learn_more_url")||pe,className:"create-password__desc__link"},o("wallet_set_password_header_link_learn_more"))),r.default.createElement(i,{form:oe,size:m.SIZE.lg,onSubmit:le,validateTrigger:["onChange"],className:"create-password__form",onValuesChange:(e,s)=>{te(s)}},r.default.createElement(i.Item,{name:"password",style:{marginBottom:8},className:"create-password__form__input",label:o("wallet_set_password_subtitle_password")},r.default.createElement(c.Password,{autoFocus:!0,autoComplete:"off",size:c.SIZE.xl,placeholder:o("wallet_set_password_errortip_password_not_long_enough")})),r.default.createElement(i.Item,{noStyle:!0,style:{minHeight:25},shouldUpdate:(e,s)=>e.password!==s.password},({getFieldValue:e})=>{let s=e("password");return r.default.createElement(ee,{password:s})}),r.default.createElement(i.Item,{name:"confirmPassword",style:{flex:1},dependencies:["password"],className:"create-password__form__input",rules:[({getFieldValue:e})=>({validator:(s,u)=>{let _=e("password");return u&&_!==u?Promise.reject(o("wallet_set_password_errortip_password_not_match")):Promise.resolve()}})],label:o("wallet_set_password_subtitle_confirm_password")},r.default.createElement(c.Password,{autoComplete:"off",size:c.SIZE.xl,placeholder:o("wallet_set_password_errortip_password_not_long_enough")})),r.default.createElement("div",{className:"create-password__agreement"},o("wallet_extension_password_toast_text_continue_to_agree",{terms_service:""}),r.default.createElement("a",{className:"create-password__agreement__link",href:o("wallet_extension_password_toast_link_terms_servicenew"),target:"__blank"},o("wallet_estension_password_toast_link_terms_service"))),r.default.createElement(i.Item,{noStyle:!0},r.default.createElement(m,{block:!0,htmlType:"submit",disabled:h,size:m.SIZE.lg,type:m.TYPE.highlight,loading:f,category:m.CATEGORY.fill},o("wallet_set_password_btn_confirm"))))))};export{d as a,Ce as b};

window.inOKXExtension = true;
window.ASSETS_BUILD_TYPE = "publish";

